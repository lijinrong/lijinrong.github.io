{"./":{"url":"./","title":"Introduction","keywords":"","body":"ä»‹ç» è¿™æ˜¯ä¸ªäººå­¦ä¹ æ•´ç†çš„å­¦ä¹ ç¬”è®°ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ "},"bugå¤„ç†ç¬”è®°/inputæ ‡ç­¾é»˜è®¤å®½åº¦é—®é¢˜.html":{"url":"bugå¤„ç†ç¬”è®°/inputæ ‡ç­¾é»˜è®¤å®½åº¦é—®é¢˜.html","title":"Inputæ ‡ç­¾é»˜è®¤å®½åº¦é—®é¢˜","keywords":"","body":"inputæ ‡ç­¾é»˜è®¤å®½åº¦ input æ ‡ç­¾é»˜è®¤æ˜¯ä¸€ä¸ª inline-block å…ƒç´ ï¼Œå®ƒçš„å®½åº¦åº”è¯¥ç”±å†…å®¹æ’‘å¼€ã€‚å¯æ˜¯ input æ ‡ç­¾é‡Œå¹¶æ²¡æœ‰åµŒå¥—å…¶ä»–å…ƒç´ æˆ–è€…æ–‡æœ¬ï¼Œæˆ‘ä»¬å¹³æ—¶çœ‹åˆ° input å…ƒç´ æ˜¯é»˜è®¤æ˜¯æœ‰å®½åº¦çš„ï¼Œé‚£ä¹ˆå®ƒåˆ°åº•æ˜¯ç”±ä»€ä¹ˆâ€æ’‘å¼€â€œå®½åº¦çš„å‘¢ï¼Ÿ MDNæ–‡æ¡£ï¼š size æ§ä»¶çš„åˆå§‹å¤§å°ã€‚ä»¥åƒç´ ä¸ºå•ä½ã€‚ä½†å½“ type å±æ€§ä¸º text æˆ– password æ—¶, å®ƒè¡¨ç¤ºè¾“å…¥çš„å­—ç¬¦çš„é•¿åº¦ã€‚ä»HTML5å¼€å§‹, æ­¤å±æ€§ä»…é€‚ç”¨äºå½“ type å±æ€§ä¸º text,search,tel,url,email,æˆ– passwordï¼›å¦åˆ™ä¼šè¢«å¿½ç•¥ã€‚ æ­¤å¤–ï¼Œå®ƒçš„å€¼å¿…é¡»å¤§äº0ã€‚ å¦‚æœæœªæŒ‡å®šå¤§å°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼20ã€‚ HTML5 æ¦‚è¿° \"ç”¨æˆ·ä»£ç†åº”è¯¥ç¡®ä¿è‡³å°‘å¤§éƒ¨åˆ†å­—ç¬¦æ˜¯å¯è§çš„\", ä½†æ˜¯ä¸åŒçš„å­—ç¬¦çš„ç”¨ä¸åŒçš„å­—ä½“è¡¨ç¤ºå¯èƒ½ä¼šå¯¼è‡´å®½åº¦ä¸åŒã€‚åœ¨æŸäº›æµè§ˆå™¨ä¸­ï¼Œä¸€ä¸²å¸¦æœ‰xçš„å­—ç¬¦å³ä½¿å®šä¹‰äº†åˆ°xçš„å¤§å°ä¹Ÿå°†æ˜¾ç¤ºä¸å®Œæ•´ã€‚ æ‰€ä»¥ï¼Œinput é»˜è®¤æ˜¯æœ‰20ä¸ªå­—ç¬¦çš„å®½åº¦çš„ï¼Œé‚£ä¹Ÿå°±æ˜¯ä»£è¡¨ç€ï¼Œé™¤äº† size ä»¥å¤–ï¼Œfont-size ä¹Ÿå†³å®šäº† input çš„å®½åº¦ã€‚é‚£æˆ‘ä»¬å¯ä»¥æŠŠ input çœ‹æˆæ˜¯é»˜è®¤è£…äº†20ä¸ªå­—ç¬¦çš„è¡Œå†…å—å…ƒç´ ã€‚ "},"å…¶ä»–ç¬”è®°/å‰ç«¯å¼€å‘é¢è¯•å¸¸è§é—®é¢˜.html":{"url":"å…¶ä»–ç¬”è®°/å‰ç«¯å¼€å‘é¢è¯•å¸¸è§é—®é¢˜.html","title":"å‰ç«¯å¼€å‘é¢è¯•å¸¸è§é—®é¢˜","keywords":"","body":"ä¸‰æ å¸ƒå±€çš„äº”ç§æ–¹æ³•ï¼š float absolute flex Table-cell Gridé¡µé¢å¸ƒå±€çš„å˜é€šï¼š ä¸‰æ å¸ƒå±€ï¼šå·¦å³å®½åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº” ä¸‰æ å¸ƒå±€ï¼šä¸Šä¸‹å®½åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº” ä¸¤æ å¸ƒå±€ï¼šå·¦å®½åº¦å›ºå®šï¼Œå³è‡ªé€‚åº” ä¸¤æ å¸ƒå±€ï¼šå³å®½åº¦å›ºå®šï¼Œå·¦è‡ªé€‚åº” ä¸¤æ å¸ƒå±€ï¼šä¸Šå®½åº¦å›ºå®šï¼Œä¸‹è‡ªé€‚åº” ä¸¤æ å¸ƒå±€ï¼šä¸‹å®½åº¦å›ºå®šï¼Œä¸Šè‡ªé€‚åº” jsè·å–ç›’æ¨¡å‹çš„å®½é«˜ï¼š dom.style.width/height åªèƒ½è·å–å†…è”æ ·å¼çš„å®½é«˜ï¼Œå¤–è”æ ·å¼å–ä¸åˆ° Dom.currentStyle.width/height åªæ”¯æŒie Window.getComputedStyle.width/height æ”¯æŒieã€ffã€chrome dom.getBoundingClientRect().width/height é€šè¿‡è§†çª—ä½ç½®çš„æ–¹æ³•è·å– å¦‚ä½•åˆ›å»ºBFCï¼š 1ã€floatçš„å€¼ä¸æ˜¯noneã€‚ 2ã€positionçš„å€¼ä¸æ˜¯staticæˆ–è€…relativeã€‚ 3ã€displayçš„å€¼æ˜¯inline-blockã€table-cellã€flexã€table-captionæˆ–è€…inline-flex 4ã€overflowçš„å€¼ä¸æ˜¯visible getå’Œpostçš„åŒºåˆ« Getè¯·æ±‚çš„å›é€€æ˜¯æ— å®³çš„ï¼Œè€Œpostè¯·æ±‚ä¼šé‡æ–°æäº¤è¯·æ±‚ Getè¯·æ±‚çš„urlåœ°å€å¯ä»¥è¢«æ”¶è—ï¼Œpostä¸å¯ä»¥ Getè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜ï¼Œpostä¸ä¼š Getè¯·æ±‚ä¼šä¿å­˜åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œpostä¸ä¼š Getè¯·æ±‚åœ¨urlä¸­ä¼ é€’çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œpostæ²¡æœ‰ Getè¯·æ±‚æ¯”postä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨urlä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ Getè¯·æ±‚çš„å‚æ•°æ”¾åœ¨urlä¸Šï¼Œè€Œpostæ”¾åœ¨request bodyä¸ŠhttpçŠ¶æ€ç ï¼š 1xxï¼šæŒ‡ç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç† 2xxï¼šæˆåŠŸï¼Œè¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ 3xxï¼šé‡å®šå‘ï¼Œè¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œ 4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç° 5xxï¼šæœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ "},"å…¶ä»–ç¬”è®°/é¢è¯•é—®é¢˜.html":{"url":"å…¶ä»–ç¬”è®°/é¢è¯•é—®é¢˜.html","title":"é¢è¯•é—®é¢˜","keywords":"","body":" åŸå‹é“¾ ç»§æ‰¿ é—­åŒ… é—­åŒ…æ˜¯ä»€ä¹ˆ ç†è®ºè§’åº¦ï¼šé—­åŒ…æ˜¯æŒ‡èƒ½å¤Ÿè®¿é—®åˆ°è‡ªç”±å˜é‡ï¼ˆè‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‡½æ•°å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ï¼‰çš„å‡½æ•° å®è·µè§’åº¦ï¼šå³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œå®ƒä»ç„¶å­˜åœ¨ï¼Œå¹¶å¼•ç”¨äº†è‡ªç”±å˜é‡ é—­åŒ…ä¸ºä»€ä¹ˆèƒ½è®¿é—®åˆ°å±€éƒ¨å˜é‡ instanceOfåŸç† v8åƒåœ¾å›æ”¶æœºåˆ¶ newæ“ä½œç¬¦çš„è¿‡ç¨‹ äº‹ä»¶å¾ªç¯æœºåˆ¶ promise React setStateæ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥ å‰ç«¯æ¨¡å—åŒ–è§„èŒƒ commonjs AMD CMD ES module http2.0ä¼˜åŒ–ç‚¹ äºŒè¿›åˆ¶åˆ†å¸§:å¸§(frame)åŒ…å«éƒ¨åˆ†ï¼šç±»å‹Type, é•¿åº¦Length, æ ‡è®°Flags, æµæ ‡è¯†Streamå’Œframe payloadæœ‰æ•ˆè½½è·ã€‚ è¯·æ±‚ä¼˜å…ˆçº§:æŠŠhttpæ¶ˆæ¯åˆ†ä¸ºå¾ˆå¤šç‹¬ç«‹å¸§ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡ä¼˜åŒ–è¿™äº›å¸§çš„äº¤é”™å’Œä¼ è¾“é¡ºåºè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚æ¯ä¸ªæµéƒ½å¯ä»¥å¸¦æœ‰ä¸€ä¸ª31æ¯”ç‰¹çš„ä¼˜å…ˆå€¼ï¼š0 è¡¨ç¤ºæœ€é«˜ä¼˜å…ˆçº§ï¼›2çš„31æ¬¡æ–¹-1 è¡¨ç¤ºæœ€ä½ä¼˜å…ˆçº§ã€‚ å¤šè·¯å¤ç”¨ (Multiplexing) / è¿æ¥å…±äº«:åœ¨http1.1ä¸­ï¼Œæµè§ˆå™¨å®¢æˆ·ç«¯åœ¨åŒä¸€æ—¶é—´ï¼Œé’ˆå¯¹åŒä¸€åŸŸåä¸‹çš„è¯·æ±‚æœ‰ä¸€å®šæ•°é‡çš„é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶æ•°ç›®çš„è¯·æ±‚ä¼šè¢«é˜»å¡ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä½•ä¸€äº›ç«™ç‚¹ä¼šæœ‰å¤šä¸ªé™æ€èµ„æº CDN åŸŸåçš„åŸå› ä¹‹ä¸€ã€‚è€Œhttp2.0ä¸­çš„å¤šè·¯å¤ç”¨ä¼˜åŒ–äº†è¿™ä¸€æ€§èƒ½ã€‚å¤šè·¯å¤ç”¨å…è®¸åŒæ—¶é€šè¿‡å•ä¸€çš„http/2 è¿æ¥å‘èµ·å¤šé‡çš„è¯·æ±‚-å“åº”æ¶ˆæ¯ã€‚æœ‰äº†æ–°çš„åˆ†å¸§æœºåˆ¶åï¼Œhttp/2 ä¸å†ä¾èµ–å¤šä¸ªTCPè¿æ¥å»å®ç°å¤šæµå¹¶è¡Œäº†ã€‚æ¯ä¸ªæ•°æ®æµéƒ½æ‹†åˆ†æˆå¾ˆå¤šäº’ä¸ä¾èµ–çš„å¸§ï¼Œè€Œè¿™äº›å¸§å¯ä»¥äº¤é”™ï¼ˆä¹±åºå‘é€ï¼‰ï¼Œè¿˜å¯ä»¥åˆ†ä¼˜å…ˆçº§ï¼Œæœ€åå†åœ¨å¦ä¸€ç«¯æŠŠå®ƒä»¬é‡æ–°ç»„åˆèµ·æ¥ã€‚ å¤´éƒ¨å‹ç¼©:http1.xçš„å¤´å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ã€‚http/2ä½¿ç”¨encoderæ¥å‡å°‘éœ€è¦ä¼ è¾“çš„headerå¤§å°ï¼Œé€šè®¯åŒæ–¹å„è‡ªç¼“å­˜ä¸€ä»½å¤´éƒ¨å­—æ®µè¡¨ï¼Œæ—¢é¿å…äº†é‡å¤headerçš„ä¼ è¾“ï¼Œåˆå‡å°äº†éœ€è¦ä¼ è¾“çš„å¤§å°ã€‚ æœåŠ¡ç«¯æ¨é€: é‡åˆ°é—®é¢˜å¦‚ä½•è§£å†³ "},"æŠ€æœ¯ç¬”è®°/React-reduxç”¨æ³•.html":{"url":"æŠ€æœ¯ç¬”è®°/React-reduxç”¨æ³•.html","title":"React Reduxç”¨æ³•","keywords":"","body":"React Redux ç”¨æ³• class componentç”¨æ³•ï¼š const mapStateToProps = (state) => ({ todos: state.todos }) const mapDispatchToProps = (dispatch) => { return { // dispatching plain actions increment: () => dispatch({ type: 'INCREMENT' }), decrement: () => dispatch({ type: 'DECREMENT' }), reset: () => dispatch({ type: 'RESET' }), } } class A { ... } export default connect(mapStateToProps, mapDispatchToProps)(A) hookç”¨æ³•ï¼š import React from 'react' import { useSelector, useStore } from 'react-redux' export const CounterComponent = () => { const counter = useSelector(state => state.counter) const dispatch = useDispatch() const store = useStore() store.dispatch({type: 'increment-counter'}) return dispatch({ type: 'increment-counter' })}>{counter}{store.getState()} } "},"æŠ€æœ¯ç¬”è®°/async awaitä¸ºä»€ä¹ˆå¯ä»¥æ•è·Promiseå†…éƒ¨å¼‚å¸¸.html":{"url":"æŠ€æœ¯ç¬”è®°/async awaitä¸ºä»€ä¹ˆå¯ä»¥æ•è·Promiseå†…éƒ¨å¼‚å¸¸.html","title":"Async Awaitä¸ºä»€ä¹ˆå¯ä»¥æ•è·Promiseå†…éƒ¨å¼‚å¸¸","keywords":"","body":"async await ä¸ºä»€ä¹ˆå¯ä»¥æ•è·åˆ°Promiseå†…éƒ¨å¼‚å¸¸ æºä»£ç vsç¼–è¯‘åçš„ä»£ç  æºä»£ç å¦‚ä¸‹ï¼š async function test() { try { await Promise.reject('bad'); } catch (err) { console.log(err); } } ç¼–è¯‘åçš„ä»£ç å¦‚ä¸‹ï¼š function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } } function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err); } _next(undefined); }); }; } function test() { return _test.apply(this, arguments); } function _test() { _test = _asyncToGenerator(function* () { try { yield Promise.reject('bad'); } catch (err) { console.log(err); } }); return _test.apply(this, arguments); } é€æ­¥åˆ†æï¼š å‡½æ•°æ‰§è¡Œï¼Œå®é™…ä¸Šæ‰§è¡Œ_asyncToGeneratorè¿”å›çš„å‡½æ•°ï¼Œ_asyncToGeneratorä¼ å…¥çš„fnä¸ºä¸€ä¸ªè¿­ä»£å™¨ asyncToGeneratorè¿”å›çš„å‡½æ•°ï¼Œè¿”å›äº†ä¸€ä¸ªPromiseï¼Œå¹¶å¼€å§‹é€’å½’æ‰§è¡Œfnè¿­ä»£å™¨ å½“yield è¿”å›ä¸€ä¸ªfullfilledçš„Promiseæ—¶ï¼Œä¼šè°ƒç”¨_nextæ–¹æ³•ï¼Œå½“è¿”å›ä¸€ä¸ªrejectedçš„Promiseæ—¶ï¼Œä¼šè°ƒç”¨_throwæ–¹æ³• å½“è°ƒç”¨_throwæ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨è¿­ä»£å™¨çš„throwæ–¹æ³•æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸ä¼šå…ˆè¢«è¿­ä»£å™¨å†…éƒ¨çš„try catchæ•è·ï¼Œå³æˆ‘ä»¬ä»£ç å†™çš„try catch "},"æŠ€æœ¯ç¬”è®°/cssæ­ç§˜ç¬”è®°.html":{"url":"æŠ€æœ¯ç¬”è®°/cssæ­ç§˜ç¬”è®°.html","title":"Cssæ­ç§˜ç¬”è®°","keywords":"","body":"[TOC] ç¬¬ä¸€ç«  Webæ ‡å‡†ï¼šæ˜¯æ•Œè¿˜æ˜¯å‹ æµè§ˆå™¨å‰ç¼€ æ¯ä¸ªæµè§ˆå™¨éƒ½å¯ä»¥å®ç° è¿™äº›å®éªŒæ€§çš„(ç”šè‡³æ˜¯ç§æœ‰çš„ã€éæ ‡å‡†çš„)ç‰¹æ€§ï¼Œä½†è¦åœ¨åç§°å‰é¢åŠ ä¸Šè‡ª å·±ç‰¹æœ‰çš„å‰ç¼€ã€‚ åªæ˜¯ç»™å¼€å‘è€…å°è¯•çš„æ–°ç‰¹æ€§ï¼Œå¦‚æœåç»­è¢«é‡‡ç”¨ï¼Œæ˜¯ä¸éœ€è¦ä½¿ç”¨å¸¦å‰ç¼€çš„ç‰¹æ€§çš„ã€‚ä½†æ˜¯æµè§ˆå™¨å‰ç¼€è¢«æ»¥ç”¨ï¼Œå¯¼è‡´å¾ˆå¤šç‰¹æ€§éƒ½åŠ ä¸Šäº†æµè§ˆå™¨åç¼€ï¼ŒåŠ å¤§äº†ç»´æŠ¤æˆæœ¬ã€‚ ç›®å‰çš„è§£å†³æ–¹æ¡ˆï¼šè¿™äº›å®éªŒæ€§ç‰¹æ€§éœ€è¦é€šè¿‡é…ç½®å¼€å…³æ¥å¯ç”¨ï¼Œè¿™å¯ä»¥æœ‰æ•ˆé˜²æ­¢å¼€ å‘è€…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå› ä¸ºä½ ä¸èƒ½è¦æ±‚ç”¨æˆ·ä¸ºäº†æ­£ç¡®åœ°æµè§ˆä½ çš„ç½‘ç«™ è€Œå»ä¿®æ”¹æµè§ˆå™¨è®¾ç½® ç¬¬äºŒç«  èƒŒæ™¯å’Œè¾¹æ¡† 1ã€åŠé€æ˜è¾¹æ¡† é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åœ¨backgroundå±æ€§ä½¿ç”¨rgba()å’Œhsla()ï¼Œä½†æ˜¯åœ¨è¾¹æ¡†ä¸­ä½¿ç”¨åŠé€æ˜é¢œè‰²æ—¶ï¼Œä¼šå‘ç°è¾¹æ¡†èƒŒåä¼šæœ‰èƒŒæ™¯è‰²ï¼Œå¦‚ä¸‹ï¼š border: 10px solid hsla(0,0%,100%,.5); background: white; è§£å†³æ–¹æ¡ˆï¼š â€‹ åœ¨ CSS 2.1 ä¸­ï¼Œè¿™å°±æ˜¯èƒŒæ™¯çš„å·¥ä½œåŸç†ã€‚æˆ‘ä»¬åªèƒ½æ¥å—å®ƒå¹¶ä¸”å‘å‰çœ‹ã€‚ è°¢å¤©è°¢åœ°ï¼Œä»èƒŒæ™¯ä¸è¾¹æ¡†(ç¬¬ä¸‰ç‰ˆ)(http://w3.org/TR/css3-background)å¼€ å§‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ background-clip å±æ€§æ¥è°ƒæ•´ä¸Šè¿°é»˜è®¤è¡Œä¸ºæ‰€å¸¦æ¥çš„ä¸ ä¾¿ã€‚è¿™ä¸ªå±æ€§çš„åˆå§‹å€¼æ˜¯ border-boxï¼Œæ„å‘³ç€èƒŒæ™¯ä¼šè¢«å…ƒç´ çš„ border box(è¾¹æ¡†çš„å¤–æ²¿æ¡†)è£åˆ‡æ‰ã€‚å¦‚æœä¸å¸Œæœ›èƒŒæ™¯ä¾µå…¥è¾¹æ¡†æ‰€åœ¨çš„èŒƒå›´ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠå®ƒçš„å€¼è®¾ä¸º padding-boxï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¼šç”¨å†…è¾¹è·çš„å¤–æ²¿æ¥æŠŠèƒŒæ™¯è£åˆ‡æ‰ã€‚ å³backgroundé»˜è®¤åŒ…å«borderçš„ä½ç½®ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹å°±å¯è§£å†³ï¼š border: 10px solid hsla(0,0%,100%,.5); background: white; background-clip: padding-box; 2ã€å¤šé‡è¾¹æ¡† box-shadow æ–¹æ¡ˆ box-shadow: h-shadow v-shadow blur spread color inset; å¦‚ä¸Šï¼Œbox-shadowæ¥å—ç¬¬å››ä¸ªå‚æ•°æ‰©å¼ åŠå¾„ï¼Œé€šè¿‡æŒ‡å®šæ­£å€¼æˆ–è´Ÿå€¼ï¼Œå¯ä»¥è®©æŠ•å½±é¢ç§¯åŠ å¤§æˆ–è€…å‡å°ã€‚ä¸€ä¸ªæ­£å€¼çš„æ‰©å¼ åŠå¾„åŠ  ä¸Šä¸¤ä¸ªä¸ºé›¶çš„åç§»é‡ä»¥åŠä¸ºé›¶çš„æ¨¡ç³Šå€¼ï¼Œå¾—åˆ°çš„â€œæŠ•å½±â€å…¶å®å°±åƒä¸€é“å®çº¿è¾¹æ¡†ï¼Œå¦‚å›¾ï¼š background: yellowgreen; box-shadow: 0 0 0 10px #655; è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨box-shadowçš„é€—å·åˆ†éš”è¯­æ³•ï¼Œè®¾ç½®ä»»æ„æ•°é‡çš„æŠ•å½±ï¼š background: yellowgreen; box-shadow: 0 0 0 10px #655, 0 0 0 15px deeppink; å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œbox-shadow æ˜¯å±‚å±‚å åŠ çš„ï¼Œç¬¬ä¸€å±‚æŠ•å½±ä½äºæœ€é¡¶å±‚ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¦‚æœä½ æ„¿æ„ï¼Œç”šè‡³è¿˜å¯ä»¥åœ¨è¿™äº›â€œè¾¹æ¡†â€çš„åº•ä¸‹å†åŠ ä¸€ å±‚å¸¸è§„çš„æŠ•å½±: background: yellowgreen; box-shadow: 0 0 0 10px #655, 0 0 0 15px deeppink, 0 2px 5px 15px rgba(0,0,0,.6); å¤šé‡æŠ•å½±è§£å†³æ–¹æ¡ˆåœ¨ç»å¤§å¤šæ•°åœºåˆéƒ½å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚ æŠ•å½±çš„è¡Œä¸ºè·Ÿè¾¹æ¡†ä¸å®Œå…¨ä¸€è‡´ï¼Œå› ä¸ºå®ƒä¸ä¼šå½±å“å¸ƒå±€ï¼Œè€Œä¸”ä¹Ÿä¸ä¼š å—åˆ° box-sizing å±æ€§çš„å½±å“ã€‚ä¸è¿‡ï¼Œä½ è¿˜æ˜¯å¯ä»¥é€šè¿‡å†…è¾¹è·æˆ–å¤–è¾¹è·(è¿™å–å†³äºæŠ•å½±æ˜¯å†…åµŒå’Œè¿˜æ˜¯å¤–æ‰©çš„)æ¥é¢å¤–æ¨¡æ‹Ÿå‡ºè¾¹æ¡†æ‰€éœ€è¦å æ®çš„ç©ºé—´ã€‚ ä¸Šè¿°æ–¹æ³•æ‰€åˆ›å»ºå‡ºçš„å‡â€œè¾¹æ¡†â€å‡ºç°åœ¨å…ƒç´ çš„å¤–åœˆã€‚å®ƒä»¬å¹¶ä¸ä¼šå“ åº”é¼ æ ‡äº‹ä»¶ï¼Œæ¯”å¦‚æ‚¬åœæˆ–ç‚¹å‡»ã€‚å¦‚æœè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä½ å¯ä»¥ç»™ box-shadowå±æ€§åŠ ä¸Šinsetå…³é”®å­—ï¼Œæ¥ä½¿æŠ•å½±ç»˜åˆ¶åœ¨å…ƒç´ çš„å†…åœˆã€‚ è¯·æ³¨æ„ï¼Œæ­¤æ—¶ä½ éœ€è¦å¢åŠ é¢å¤–çš„å†…è¾¹è·æ¥è…¾å‡ºè¶³å¤Ÿçš„ç©ºéš™ã€‚ outline æ–¹æ¡ˆ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½åªéœ€è¦ä¸¤å±‚è¾¹æ¡†ï¼Œé‚£å°±å¯ä»¥å…ˆè®¾ç½®ä¸€å±‚å¸¸è§„è¾¹ æ¡†ï¼Œå†åŠ ä¸Š outline(æè¾¹)å±æ€§æ¥äº§ç”Ÿå¤–å±‚çš„è¾¹æ¡†ã€‚è¿™ç§æ–¹æ³•çš„ä¸€å¤§ä¼˜ ç‚¹åœ¨äºè¾¹æ¡†æ ·å¼ååˆ†çµæ´»ï¼Œä¸åƒä¸Šé¢çš„ box-shadow æ–¹æ¡ˆåªèƒ½æ¨¡æ‹Ÿå®çº¿è¾¹æ¡†(å‡è®¾æˆ‘ä»¬éœ€è¦äº§ç”Ÿè™šçº¿è¾¹æ¡†æ•ˆæœï¼Œbox-shadow å°±æ²¡è¾™äº†)ã€‚ background: yellowgreen; border: 10px solid #655; outline: 5px solid deeppink; æè¾¹çš„å¦ä¸€ä¸ªå¥½å¤„åœ¨äºï¼Œä½ å¯ä»¥é€šè¿‡ outline-offset å±æ€§æ¥æ§åˆ¶å®ƒè·Ÿå…ƒç´ è¾¹ç¼˜ä¹‹é—´çš„é—´è·ï¼Œè¿™ä¸ªå±æ€§ç”šè‡³å¯ä»¥æ¥å—è´Ÿå€¼ã€‚è¿™å¯¹äºæŸäº›æ•ˆæœæ¥è¯´é å¸¸æœ‰ç”¨ï¼Œå¦‚ä¸‹ï¼š background: yellowgreen; border: 10px solid #655; outline: 5px dashed #fff; outline-offset: -10px; è¿™ä¸ªæ–¹æ¡ˆåŒæ ·ä¹Ÿæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š å¦‚ä¸Šæ‰€è¿°ï¼Œå®ƒåªé€‚ç”¨äºåŒå±‚â€œè¾¹æ¡†â€çš„åœºæ™¯ï¼Œå› ä¸º outline å¹¶ä¸èƒ½ æ¥å—ç”¨é€—å·åˆ†éš”çš„å¤šä¸ªå€¼ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è·å¾—æ›´å¤šå±‚çš„è¾¹æ¡†ï¼Œå‰ä¸€ ç§æ–¹æ¡ˆå°±æ˜¯æˆ‘ä»¬å”¯ä¸€çš„é€‰æ‹©äº†ã€‚ è¾¹æ¡†ä¸ä¸€å®šä¼šè´´åˆ border-radius å±æ€§äº§ç”Ÿçš„åœ†è§’ï¼Œå› æ­¤å¦‚æœå…ƒç´  æ˜¯åœ†è§’çš„ï¼Œå®ƒçš„æè¾¹å¯èƒ½è¿˜æ˜¯ç›´è§’çš„ã€‚è¯·æ³¨æ„ï¼Œè¿™ç§è¡Œ ä¸ºè¢« CSS å·¥ä½œç»„è®¤ä¸ºæ˜¯ä¸€ä¸ª bugï¼Œå› æ­¤æœªæ¥å¯èƒ½ä¼šæ”¹ä¸ºè´´åˆ border- radius åœ†è§’ã€‚ æ ¹æ® CSS åŸºæœ¬ UI ç‰¹æ€§(ç¬¬ä¸‰ç‰ˆ)è§„èŒƒ(http://w3.org/TR/css3-ui)æ‰€ è¿°ï¼Œâ€œæè¾¹å¯ä»¥ä¸æ˜¯çŸ©å½¢â€ã€‚å°½ç®¡åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæè¾¹éƒ½æ˜¯çŸ©å½¢ çš„ï¼Œä½†å¦‚æœä½ æƒ³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¯·åˆ‡è®°:æœ€å¥½åœ¨ä¸åŒæµè§ˆå™¨ä¸­å®Œæ•´ åœ°æµ‹è¯•æœ€ç»ˆæ•ˆæœã€‚ 3ã€çµæ´»çš„èƒŒæ™¯å®šä½ background-position çš„æ‰©å±•è¯­æ³• åœ¨ CSS èƒŒæ™¯ä¸è¾¹æ¡†(ç¬¬ä¸‰ç‰ˆ)(http://w3.org/TR/css3-background)ä¸­ï¼Œ background-position å±æ€§å·²ç»å¾—åˆ°æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬æŒ‡å®šèƒŒæ™¯å›¾ç‰‡è·ç¦»ä»» æ„è§’çš„åç§»é‡ï¼Œåªè¦æˆ‘ä»¬åœ¨åç§»é‡å‰é¢æŒ‡å®šå…³é”®å­—ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæƒ³è®©èƒŒ æ™¯å›¾ç‰‡è·Ÿå³è¾¹ç¼˜ä¿æŒ 20px çš„åç§»é‡ï¼ŒåŒæ—¶è·Ÿåº•è¾¹ä¿æŒ 10px çš„åç§»é‡ï¼Œå¯ä»¥è¿™æ ·åš: Tip: background-size: contain ä»£è¡¨å›¾ç‰‡ç¼©æ”¾è‡³å…¨éƒ¨æ˜¾ç¤ºåœ¨èƒŒæ™¯ä¸Šã€‚background-size: cover ä»£è¡¨å›¾ç‰‡ç¼©æ”¾è‡³æ•´ä¸ªè¦†ç›–èƒŒæ™¯ã€‚ background: url(code-pirate.svg) no-repeat #58a; background-position: right 20px bottom 10px; æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›ä¸€ä¸ªåˆé€‚çš„å›é€€æ–¹æ¡ˆã€‚å› ä¸ºå¯¹ä¸Šè¿°æ–¹æ¡ˆæ¥ è¯´ï¼Œåœ¨ä¸æ”¯æŒ background-position æ‰©å±•è¯­æ³•çš„æµè§ˆå™¨ä¸­ï¼ŒèƒŒæ™¯å›¾ç‰‡ä¼šç´§ è´´åœ¨å·¦ä¸Šè§’(èƒŒæ™¯å›¾ç‰‡çš„é»˜è®¤ä½ç½®)ã€‚è¿™çœ‹èµ·æ¥ä¼šå¾ˆå¥‡æ€ªï¼Œè€Œä¸”å®ƒä¼šå¹²æ‰°åˆ° æ–‡å­—çš„å¯è¯»æ€§ã€‚æä¾›ä¸€ä¸ªå›é€€æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠè€å¥—çš„ bottom right å®šä½å€¼å†™è¿› background çš„ç®€å†™å±æ€§ä¸­: background: url(code-pirate.svg) no-repeat bottom right #58a; background-position: right 20px bottom 10px; background-origin åœ¨ç»™èƒŒæ™¯å›¾ç‰‡è®¾ç½®è·ç¦»æŸä¸ªè§’çš„åç§»é‡æ—¶ï¼Œæœ‰ä¸€ç§æƒ…å†µæå…¶å¸¸è§:åç§» é‡ä¸å®¹å™¨çš„å†…è¾¹è·ä¸€è‡´ã€‚å¦‚æœé‡‡ç”¨ä¸Šé¢æåˆ°çš„ background-position çš„æ‰© å±•è¯­æ³•æ–¹æ¡ˆï¼Œä»£ç çœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„: padding: 10px; background: url(code-pirate.svg) no-repeat #58a; background-position: right 10px bottom 10px; ä½†æ˜¯æ¯æ¬¡æ”¹åŠ¨å†…è¾¹è·çš„å€¼æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åœ¨ä¸‰ä¸ªåœ°æ–¹æ›´æ–°è¿™ä¸ªå€¼ã€‚ background-originåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒçš„å€¼æ˜¯padding-boxã€‚å¦‚æœæŠŠå®ƒçš„å€¼æ”¹æˆ content-box(å‚è§ä¸‹é¢çš„ä»£ç )ï¼Œæˆ‘ä»¬åœ¨ background-position å± æ€§ä¸­ä½¿ç”¨çš„è¾¹è§’å…³é”®å­—å°†ä¼šä»¥å†…å®¹åŒºçš„è¾¹ç¼˜ä½œä¸ºåŸºå‡†(ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶èƒŒæ™¯ å›¾ç‰‡è·ç¦»è¾¹è§’çš„åç§»é‡å°±è·Ÿå†…è¾¹è·ä¿æŒä¸€è‡´äº†): padding: 10px; background: url(\"code-pirate.svg\") no-repeat #58a bottom right; /* æˆ– 100% 100% */ background-origin: content-box; calc() æŠŠèƒŒæ™¯å›¾ç‰‡å®šä½åˆ°è·ç¦»åº•è¾¹ 10px ä¸” è·ç¦»å³è¾¹ 20px çš„ä½ç½®ã€‚å¦‚æœæˆ‘ä»¬ä»ç„¶ä»¥å·¦ä¸Šè§’åç§»çš„æ€è·¯æ¥è€ƒè™‘ï¼Œå…¶å® å°±æ˜¯å¸Œæœ›å®ƒæœ‰ä¸€ä¸ª 100% - 20px çš„æ°´å¹³åç§»é‡ï¼Œä»¥åŠ 100% - 10px çš„å‚ç›´ åç§»é‡ã€‚calc() å‡½æ•°å…è®¸æˆ‘ä»¬æ‰§è¡Œæ­¤ç±»è¿ç®—ï¼Œå®ƒå¯ä»¥å®Œç¾åœ°åœ¨ background-position å±æ€§ä¸­ä½¿ç”¨: background: url(\"code-pirate.svg\") no-repeat; background-position: calc(100% - 20px) calc(100% - 10px); 4ã€è¾¹æ¡†å†…åœ†è§’ æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®¹å™¨ï¼Œåªåœ¨å†…ä¾§æœ‰åœ†è§’ï¼Œè€Œè¾¹æ¡†æˆ–æè¾¹çš„å››ä¸ªè§’åœ¨å¤– éƒ¨ä»ç„¶ä¿æŒç›´è§’çš„å½¢çŠ¶ï¼Œå¦‚å›¾ 2-15 æ‰€ç¤ºã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æ•ˆæœï¼Œç›®å‰è¿˜æ²¡ æœ‰è¢«æ»¥ç”¨ã€‚ç”¨ä¸¤ä¸ªå…ƒç´ å¯ä»¥å®ç°è¿™ä¸ªæ•ˆæœï¼Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„: ç›¸å…³è§„èŒƒ å›¾ 2-15 å®¹å™¨å¤–å›´æœ‰ä¸€é“è¾¹æ¡†ï¼Œä½†åªåœ¨å†… ä¾§æœ‰åœ†è§’ I have a nice subtle inner rounding, don't I look pretty? ```html I have a nice subtle inner rounding, don't I look pretty? .something-meaningful { background: #655; padding: .8em; } .something-meaningful > div { background: tan; border-radius: .8em; padding: 1em; } è¿™ä¸ªæ–¹æ³•å¾ˆå¥½ï¼Œä½†è¦æ±‚æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªå…ƒç´ ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå…ƒç´ ã€‚æœ‰ æ²¡æœ‰åŠæ³•å¯ä»¥åªç”¨ä¸€ä¸ªå…ƒç´ è¾¾æˆåŒæ ·çš„æ•ˆæœå‘¢?ï¼ˆç”¨box-shadowè¦†ç›–åœ†è§’æ—ç©ºä½™éƒ¨åˆ†é¢œè‰²ï¼‰ ```css background: tan; border-radius: .8em; padding: 1em; box-shadow: 0 0 0 .6em red; outline: .6em solid #655; 5ã€æ¡çº¹èƒŒæ™¯ å‡è®¾æˆ‘ä»¬æœ‰ä¸€æ¡åŸºæœ¬çš„å‚ç›´çº¿æ€§æ¸å˜ï¼Œé¢œè‰²ä»#fb3 è¿‡æ¸¡åˆ°#58a background: linear-gradient(#fb3, #58a); ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯•ç€æŠŠè¿™ä¸¤ä¸ªè‰²æ ‡æ‹‰è¿‘ä¸€ç‚¹: background: linear-gradient(#fb3 20%, #58a 80%); å¦‚æœæˆ‘ä»¬æŠŠä¸¤ä¸ªè‰²æ ‡é‡åˆåœ¨ä¸€èµ·ï¼Œ ä¼šå‘ç”Ÿä»€ä¹ˆ? background: linear-gradient(#fb3 50%, #58a 50%); â€œå¦‚æœå¤šä¸ªè‰²æ ‡å…·æœ‰ç›¸åŒçš„ä½ç½®ï¼Œå®ƒä»¬ä¼šäº§ç”Ÿä¸€ä¸ªæ— é™å°çš„è¿‡æ¸¡åŒºåŸŸï¼Œ è¿‡æ¸¡çš„èµ·æ­¢è‰²åˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæŒ‡å®šå€¼ã€‚ä»æ•ˆæœä¸Šçœ‹ï¼Œé¢œè‰²ä¼šåœ¨é‚£ ä¸ªä½ç½®çªç„¶å˜åŒ–ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¹³æ»‘çš„æ¸å˜è¿‡ç¨‹ã€‚â€ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå·²ç»æ²¡æœ‰ä»»ä½•æ¸å˜æ•ˆæœäº†ï¼Œåªæœ‰ä¸¤å—å®è‰²ï¼Œ å„å æ®äº† background-image ä¸€åŠçš„é¢ç§¯ã€‚æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸¤æ¡å·¨ å¤§çš„æ°´å¹³æ¡çº¹ã€‚ å› ä¸ºæ¸å˜æ˜¯ä¸€ç§ç”±ä»£ç ç”Ÿæˆçš„å›¾åƒï¼Œæˆ‘ä»¬èƒ½åƒå¯¹å¾…å…¶ä»–ä»»ä½•èƒŒæ™¯å›¾åƒé‚£ æ ·å¯¹å¾…å®ƒï¼Œè€Œä¸”è¿˜å¯ä»¥é€šè¿‡ background-size æ¥è°ƒæ•´å…¶å°ºå¯¸: background: linear-gradient(#fb3 50%, #58a 50%); background-size: 100% 30px; åœ¨å›¾ 2-24 ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤æ¡æ¡çº¹çš„é«˜åº¦éƒ½ç¼©å°åˆ°äº† 15pxã€‚ç”± äºèƒŒæ™¯åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯é‡å¤å¹³é“ºçš„ï¼Œæ•´ä¸ªå®¹å™¨å…¶å®å·²ç»è¢«å¡«æ»¡äº†æ°´å¹³æ¡çº¹ (å‚è§å›¾ 2-25)ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ç›¸åŒçš„æ–¹æ³•æ¥åˆ›å»ºä¸ç­‰å®½çš„æ¡çº¹ï¼Œåªéœ€è°ƒæ•´è‰²æ ‡çš„ä½ç½®å€¼ å³å¯: background: linear-gradient(#fb3 30%, #58a 30%); background-size: 100% 30px; ä¸ºäº†é¿å…æ¯æ¬¡æ”¹åŠ¨æ¡çº¹å®½åº¦æ—¶éƒ½è¦ä¿®æ”¹ä¸¤ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡ä»è§„èŒƒ é‚£é‡Œæ‰¾åˆ°æ·å¾„ã€‚ â€œå¦‚æœæŸä¸ªè‰²æ ‡çš„ä½ç½®å€¼æ¯”æ•´ä¸ªåˆ—è¡¨ä¸­åœ¨å®ƒä¹‹å‰çš„è‰²æ ‡çš„ä½ç½®å€¼éƒ½è¦ å°ï¼Œåˆ™è¯¥è‰²æ ‡çš„ä½ç½®å€¼ä¼šè¢«è®¾ç½®ä¸ºå®ƒå‰é¢æ‰€æœ‰è‰²æ ‡ä½ç½®å€¼çš„æœ€å¤§å€¼ã€‚â€ è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬æŠŠç¬¬äºŒä¸ªè‰²æ ‡çš„ä½ç½®å€¼è®¾ç½®ä¸º 0ï¼Œé‚£å®ƒçš„ä½ç½®å°± æ€»æ˜¯ä¼šè¢«æµè§ˆå™¨è°ƒæ•´ä¸ºå‰ä¸€ä¸ªè‰²æ ‡çš„ä½ç½®å€¼ï¼Œè¿™ä¸ªç»“æœæ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ å› æ­¤ï¼Œä¸‹é¢çš„ä»£ç ä¼šäº§ç”Ÿè·Ÿä¸Šå›¾ å®Œå…¨ä¸€æ ·çš„æ¡çº¹èƒŒæ™¯ï¼Œä½†ä»£ç ä¼šæ›´åŠ  DRY: background: linear-gradient(#fb3 30%, #58a 0); background-size: 100% 30px; å¦‚æœè¦åˆ›å»ºè¶…è¿‡ä¸¤ç§é¢œè‰²çš„æ¡çº¹ï¼Œä¹Ÿæ˜¯å¾ˆå®¹æ˜“çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹é¢çš„ä»£ ç å¯ä»¥ç”Ÿæˆä¸‰ç§é¢œè‰²çš„æ°´å¹³æ¡çº¹: background: linear-gradient(#fb3 33.3%, #58a 0, #58a 66.6%, yellowgreen 0); background-size: 100% 45px; å‚ç›´æ¡çº¹ æ°´å¹³æ¡çº¹æ˜¯æœ€å®¹æ˜“ç”¨ä»£ç å†™å‡ºæ¥çš„ï¼Œä½†æˆ‘ä»¬åœ¨ç½‘é¡µä¸Šçœ‹åˆ°çš„æ¡çº¹å›¾æ¡ˆå¹¶ ä¸éƒ½æ˜¯æ°´å¹³çš„ã€‚æœ‰äº›æ¡çº¹æ˜¯å‚ç›´çš„(å‚è§å›¾ 2-28)ï¼Œè€Œä¸”æŸäº›å½¢æ€çš„æ–œæ¡çº¹ æˆ–è®¸æ›´å—æ¬¢è¿ï¼Œæˆ–è€…çœ‹èµ·æ¥æ›´åŠ æœ‰è¶£ã€‚å¹¸è¿çš„æ˜¯ï¼ŒCSS æ¸å˜åŒæ ·ä¹Ÿèƒ½å¸®åŠ©æˆ‘ ä»¬åˆ›å»ºå‡ºè¿™äº›æ•ˆæœï¼Œåªæ˜¯éš¾åº¦ç¨æœ‰ä¸åŒã€‚ å‚ç›´æ¡çº¹çš„ä»£ç è·Ÿæ°´å¹³æ¡çº¹å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œå·®åˆ«ä¸»è¦åœ¨äº:æˆ‘ä»¬éœ€è¦åœ¨ å¼€å¤´åŠ ä¸Šä¸€ä¸ªé¢å¤–çš„å‚æ•°æ¥æŒ‡å®šæ¸å˜çš„æ–¹å‘ã€‚åœ¨æ°´å¹³æ¡çº¹çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å…¶ å®ä¹Ÿå¯ä»¥åŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œåªä¸è¿‡å®ƒçš„é»˜è®¤å€¼to bottomæœ¬æ¥å°±è·Ÿæˆ‘ä»¬çš„æ„ å›¾ä¸€è‡´ï¼Œäºæ˜¯å°±çœç•¥äº†ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠ background-size çš„å€¼é¢ å€’ ä¸€ä¸‹ï¼ŒåŸå› åº”è¯¥ä¸ç”¨å¤šè¯´äº†å§: background: linear-gradient(to right, /* æˆ– 90deg */ #fb3 50%, #58a 0); background-size: 30px 100%; æ–œå‘æ¡çº¹ åœ¨å®Œæˆäº†æ°´å¹³å’Œå‚ç›´æ¡çº¹ä¹‹åï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé¡ºç€å¾€ä¸‹æƒ³:å¦‚æœæˆ‘ä»¬å†æ¬¡ æ”¹å˜ background-size çš„å€¼å’Œæ¸å˜çš„æ–¹å‘ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥å¾—åˆ°æ–œå‘(æ¯”å¦‚ 45Â°)çš„æ¡çº¹å›¾æ¡ˆå‘¢?æ¯”å¦‚è¿™æ ·(ç»“æœå¦‚å›¾ 2-29 æ‰€ç¤º): background: linear-gradient(45deg,#fb3 50%, #58a 0); background-size: 30px 30px; å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªåŠæ³•è¡Œä¸é€šã€‚åŸå› åœ¨äºæˆ‘ä»¬åªæ˜¯æŠŠæ¯ä¸ªâ€œè´´ç‰‡â€1 1å†…éƒ¨çš„ æ¸å˜æ—‹è½¬äº† 45Â°ï¼Œè€Œä¸æ˜¯æŠŠæ•´ä¸ªé‡å¤çš„èƒŒæ™¯éƒ½æ—‹è½¬äº†ã€‚è¯•ç€å›å¿†ä¸€ä¸‹æˆ‘ä»¬ä»¥ å‰ç”¨ä½å›¾æ¥ç”Ÿæˆæ–œå‘æ¡çº¹æ—¶æ˜¯æ€ä¹ˆåšçš„å§ï¼Œåšæ³•ç±»ä¼¼å›¾ 2-30ã€‚å•ä¸ªè´´ç‰‡åŒ… å«äº†å››æ¡æ¡çº¹ï¼Œè€Œä¸æ˜¯ä¸¤æ¡ï¼Œåªæœ‰è¿™æ ·æ‰æœ‰å¯èƒ½åšåˆ°æ— ç¼æ‹¼æ¥ã€‚å®ƒæ­£æ˜¯æˆ‘ä»¬ éœ€è¦åœ¨ CSS ä»£ç ä¸­é‡æ–°å®ç°çš„è´´ç‰‡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€äº›è‰²æ ‡: background: linear-gradient(45deg, #fb3 25%, #58a 0, #58a 50%, #fb3 0, #fb3 75%, #58a 0); background-size: 30px 30px; æ›´å¥½çš„æ–œå‘æ¡çº¹ åœ¨å‰é¢çš„æ®µè½ä¸­å±•ç¤ºçš„æ–¹æ³•è¿˜ä¸å¤Ÿçµæ´»ã€‚å‡è®¾æˆ‘ä»¬æƒ³è®©æ¡çº¹ä¸æ˜¯ 45Â°è€Œæ˜¯ 60Â°æ€ä¹ˆåŠ?æˆ–è€…æ˜¯ 30Â°?åˆæˆ–è€…æ˜¯ 3.141 592 653 5Â°?å¦‚æœæˆ‘ä»¬åªæ˜¯æŠŠæ¸ å˜çš„è§’åº¦æ”¹ä¸€ä¸‹ï¼Œé‚£ä¹ˆç»“æœçœ‹èµ·æ¥ä¼šç›¸å½“ç³Ÿç³•ã€‚(æ¯”å¦‚åœ¨å›¾ 2-34 ä¸­ï¼Œæˆ‘ä»¬å° è¯•å®ç° 60Â°æ¡çº¹ï¼Œä½†ä»¥å¤±è´¥å‘Šç»ˆã€‚) å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•æ¥åˆ›å»ºæ–œå‘æ¡çº¹ã€‚ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„çœŸ ç›¸æ˜¯ linear-gradient() å’Œ radial-gradient() è¿˜å„æœ‰ä¸€ä¸ªå¾ªç¯å¼çš„åŠ å¼º ç‰ˆ:repeating-linear-gradient() å’Œ repeating-radial-gradient()ã€‚å®ƒä»¬çš„å·¥ä½œæ–¹å¼è·Ÿå‰ä¸¤è€…ç±»ä¼¼ï¼Œåªæœ‰ä¸€ç‚¹ä¸åŒ:è‰²æ ‡æ˜¯æ— é™å¾ªç¯é‡å¤çš„ï¼Œç›´åˆ°å¡«æ»¡æ•´ä¸ªèƒŒæ™¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé‡å¤æ¸å˜çš„ä¾‹å­(æ•ˆæœå‚è§å›¾ 2-35): background: repeating-linear-gradient(45deg, #fb3, #58a 30px); å®ƒç›¸å½“äºä¸‹é¢è¿™ä¸ªç®€å•çš„çº¿æ€§æ¸å˜: background: linear-gradient(45deg, #fb3, #58a 30px, #fb3 30px, #58a 60px, #fb3 60px, #58a 90px, #fb3 90px, #58a 120px, #fb3 120px, #58a 150px, ...); é‡å¤çº¿æ€§æ¸å˜å®Œç¾é€‚ç”¨äºâ€”â€”ä½ å·²ç»çŒœåˆ°äº†å§â€”â€”æ¡çº¹æ•ˆæœ!è¿™å¾—ç›Šäº å®ƒä»¬å¯ä»¥æ— é™å¾ªç¯çš„å¤©èµ‹ï¼Œä¸€ä¸ªæ¸å˜å›¾æ¡ˆå°±å¯è‡ªåŠ¨é‡å¤å¹¶é“ºæ»¡æ•´ä¸ªèƒŒæ™¯ã€‚å›  æ­¤ï¼Œæˆ‘ä»¬å†ä¹Ÿä¸éœ€è¦å»æ“å¿ƒå¦‚ä½•åˆ›å»ºå‡ºå¯ä»¥æ— ç¼æ‹¼æ¥çš„è´´ç‰‡äº†ã€‚ æˆ‘ä»¬è‹¦è‹¦è¿½å¯»çš„ 60Â°æ¡çº¹åªéœ€è¿™æ ·å†™å³å¯: background: repeating-linear-gradient(60deg, #fb3, #fb3 15px, #58a 0, #58a 30px); çµæ´»çš„åŒè‰²ç³»æ¡çº¹ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ¡çº¹å›¾æ¡ˆå¹¶ä¸æ˜¯ç”±å·®å¼‚æå¤§çš„å‡ ç§é¢œè‰²ç»„ æˆçš„ï¼Œè¿™äº›é¢œè‰²å¾€å¾€å±äºåŒä¸€è‰²ç³»ï¼Œåªæ˜¯åœ¨æ˜åº¦æ–¹é¢æœ‰ç€è½»å¾®çš„å·®å¼‚ã€‚ä¸¾ä¸ª ä¾‹å­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªæ¡çº¹å›¾æ¡ˆ: background: repeating-linear-gradient(30deg, #79b, #79b 15px, #58a 0, #58a 30px); åœ¨å›¾ 2-37 ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ¡çº¹æ˜¯ç”±ä¸€ä¸ªä¸»è‰²è°ƒ( å˜ä½“æ‰€ç»„æˆçš„ã€‚ä½†æ˜¯ï¼Œè¿™ä¸¤ç§é¢œè‰²ä¹‹é—´çš„å…³ç³»åœ¨ä»£ç ä¸­å¹¶æ²¡æœ‰ä½“ç°å‡ºæ¥ã€‚æ­¤ å¤–ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ”¹å˜è¿™ä¸ªæ¡çº¹çš„ä¸»è‰²è°ƒï¼Œç”šè‡³éœ€è¦ä¿®æ”¹å››å¤„! å¹¸è¿çš„æ˜¯ï¼Œè¿˜æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•:ä¸å†ä¸ºæ¯ç§æ¡çº¹å•ç‹¬æŒ‡å®šé¢œè‰²ï¼Œè€Œæ˜¯ æŠŠæœ€æ·±çš„é¢œè‰²æŒ‡å®šä¸ºèƒŒæ™¯è‰²ï¼ŒåŒæ—¶æŠŠåŠé€æ˜ç™½è‰²çš„æ¡çº¹å åŠ åœ¨èƒŒæ™¯è‰²ä¹‹ä¸Šæ¥ å¾—åˆ°æµ…è‰²æ¡çº¹: background: #58a; background-image: repeating-linear-gradient(30deg, hsla(0,0%,100%,.1), hsla(0,0%,100%,.1) 15px, transparent 0, transparent 30px); 6ã€å¤æ‚çš„èƒŒæ™¯å›¾æ¡ˆ ç½‘æ ¼ åªä½¿ç”¨ä¸€ä¸ªæ¸å˜æ—¶ï¼Œæˆ‘ä»¬èƒ½åˆ›å»ºçš„å›¾æ¡ˆå¹¶ä¸å¤šã€‚å½“æˆ‘ä»¬æŠŠå¤šä¸ªæ¸å˜å›¾ æ¡ˆç»„åˆèµ·æ¥ï¼Œè®©å®ƒä»¬é€è¿‡å½¼æ­¤çš„é€æ˜åŒºåŸŸæ˜¾ç°æ—¶ï¼Œç¥å¥‡çš„äº‹æƒ…å°±å‘ç”Ÿäº†ã€‚æŒ‰ ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯æŠŠæ°´å¹³å’Œå‚ç›´çš„æ¡çº¹å åŠ èµ·æ¥ï¼Œä»è€Œ å¾—åˆ°å„ç§æ ·å¼çš„ç½‘æ ¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹é¢çš„ä»£ç ä¼šåˆ›å»ºå¦‚å›¾ 2-39 æ‰€ç¤ºçš„æ¡Œå¸ƒ(æ–¹æ ¼çº¹)å›¾æ¡ˆã€‚ background: white; background-image: linear-gradient(90deg, rgba(200,0,0,.5) 50%, transparent 0), linear-gradient( rgba(200,0,0,.5) 50%, transparent 0); background-size: 30px 30px; åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç½‘æ ¼ä¸­æ¯ä¸ªæ ¼å­çš„å¤§å°å¯ä»¥è°ƒæ•´ï¼Œè€Œç½‘æ ¼çº¿æ¡ çš„ç²—ç»†åŒæ—¶ä¿æŒå›ºå®šã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œç±»ä¼¼å›¾çº¸è¾…åŠ©çº¿çš„ç½‘æ ¼å°±æ˜¯è¿™ç§æƒ…å†µã€‚è¿™ æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¾‹å­ï¼Œå±•ç¤ºäº†ä½¿ç”¨é•¿åº¦è€Œä¸æ˜¯ç™¾åˆ†æ¯”ä½œä¸ºè‰²æ ‡çš„åœºæ™¯: background: #58a; background-image: linear-gradient(white 1px, transparent 0), linear-gradient(90deg, white 1px, transparent 0); background-size: 30px 30px; æˆ‘ä»¬å¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸€å¹…ç”¨ 1px ç™½çº¿ç”»å‡ºæ¥çš„ 30px å¤§å°çš„ç½‘æ ¼å›¾æ¡ˆ (å‚è§å›¾ 2-40)ã€‚ä¸â€œçµæ´»çš„åŒè‰²ç³»æ¡çº¹â€ä¸€èŠ‚ä¸­çš„ä¾‹å­ç±»ä¼¼ï¼Œä¸»è‰²è°ƒåœ¨è¿™ é‡Œä¹Ÿèµ·åˆ°äº†å›é€€é¢œè‰²çš„ä½œç”¨ã€‚ åˆ©ç”¨è¿™ä¸ªè¿˜å¯ä»¥å®ç°æ›´å¤šçš„æ•ˆæœï¼š 7ã€ä¼ªéšæœºèƒŒæ™¯ ä¸ºäº†æ›´çœŸå®åœ°æ¨¡æ‹Ÿæ¡çº¹çš„éšæœºæ€§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¯èƒ½ä¼šæƒ³åˆ°ï¼ŒæŠŠè¿™ç»„æ¡çº¹ ä»ä¸€ä¸ªå¹³é¢æ‹†æ•£ä¸ºå¤šä¸ªå›¾å±‚:ä¸€ç§é¢œè‰²ä½œä¸ºåº•è‰²ï¼Œå¦ä¸‰ç§é¢œè‰²ä½œä¸ºæ¡çº¹ï¼Œç„¶ åå†è®©æ¡çº¹ä»¥ä¸åŒçš„é—´éš”è¿›è¡Œé‡å¤å¹³é“ºã€‚è¿™ä¸€ç‚¹ä¸éš¾åšåˆ°ï¼Œæˆ‘ä»¬åœ¨è‰²æ ‡ä¸­å®š å¥½æ¡çº¹çš„å®½åº¦ï¼Œå†ç”¨ background-size æ¥æ§åˆ¶æ¡çº¹çš„é—´è·ã€‚ä»£ç çœ‹èµ·æ¥å¯ èƒ½æ˜¯è¿™æ ·çš„: background: hsl(20, 40%, 90%); background-image: linear-gradient(90deg, #fb3 10px, transparent 0), linear-gradient(90deg, #ab4 20px, transparent 0), linear-gradient(90deg, #655 20px, transparent 0); background-size: 80px 100%, 60px 100%, 40px 100%; å› ä¸ºæœ€é¡¶å±‚è´´ç‰‡1 1 æˆ‘ä»¬åº”è¯¥æŠŠå¹³é“ºé—´è·æœ€å¤§çš„è´´ç‰‡å®‰æ’åœ¨æœ€é¡¶å±‚(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯æ©™è‰²æ¡ çº¹)ã€‚ åœ¨å›¾ 2-54 ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·çš„ç»“æœæ˜¾æ˜æ›´æœ‰éšæœºçš„æ„Ÿè§‰;ä½†å¦‚æœä»”ç»† è§‚å¯Ÿçš„è¯ï¼Œä»ç„¶å¯ä»¥çœ‹å‡ºå›¾æ¡ˆæ¯éš” 240px å°±ä¼šé‡å¤ä¸€æ¬¡ã€‚è¿™ä¸ªç»„åˆå›¾æ¡ˆä¸­ç¬¬ ä¸€ä¸ªè´´ç‰‡çš„ç»ˆç‚¹ï¼Œå°±æ˜¯å„å±‚èƒŒæ™¯å›¾åƒä»¥ä¸åŒé—´è·é‡å¤æ•°æ¬¡åå†æ¬¡ç»Ÿä¸€å¯¹é½çš„ ç‚¹ã€‚è®©æˆ‘ä»¬å†æ¬¡ç©¿è¶Šå›åˆä¸­æ•°å­¦è¯¾å ‚:å¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›æ•°å­—ï¼Œé‚£ä¹ˆå¯ä»¥åŒæ—¶ æ•´é™¤æ‰€æœ‰æ•°å­—çš„æœ€å°æ•°å­—å°±å«ä½œå®ƒä»¬çš„æœ€å°å…¬å€æ•°(LCM)ã€‚å› æ­¤ï¼Œè¿™é‡Œè´´ ç‰‡çš„å°ºå¯¸å®é™…ä¸Šå°±æ˜¯æ‰€æœ‰ background-size çš„æœ€å°å…¬å€æ•°ï¼Œè€Œ 40ã€60 å’Œ 80 çš„æœ€å°å…¬å€æ•°æ­£æ˜¯ 240ã€‚ æ ¹æ®è¿™ä¸ªé€»è¾‘ï¼Œè¦è®©è¿™ç§éšæœºæ€§æ›´åŠ çœŸå®ï¼Œæˆ‘ä»¬å¾—æŠŠè´´ç‰‡çš„å°ºå¯¸æœ€å¤§ åŒ–ã€‚æ„Ÿè°¢æ•°å­¦ï¼Œæˆ‘ä»¬ä¸éœ€è¦è‹¦è‹¦æ€ç´¢å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»çŸ¥é“ç­” æ¡ˆäº†ã€‚ä¸ºäº†è®©æœ€å°å…¬å€æ•°æœ€å¤§åŒ–ï¼Œè¿™äº›æ•°å­—æœ€å¥½æ˜¯â€œç›¸å¯¹è´¨æ•°â€11ã€‚åœ¨è¿™ç§æƒ… å†µä¸‹ï¼Œå®ƒä»¬çš„æœ€å°å…¬å€æ•°å°±æ˜¯å®ƒä»¬çš„ä¹˜ç§¯ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ3ã€4 å’Œ 5 æ˜¯ç›¸å¯¹è´¨ æ•°ï¼Œå› æ­¤å®ƒä»¬çš„æœ€å°å…¬å€æ•°å°±æ˜¯ 3Ã—4Ã—5=60ã€‚è¦è¾¾æˆç›¸å¯¹è´¨æ•°ï¼Œæœ€ç®€å•çš„åŠ æ³•å°±æ˜¯å°½é‡é€‰æ‹©è´¨æ•°ï¼Œå› ä¸ºè´¨æ•°è·Ÿå…¶ä»–ä»»æ„æ•°å­—éƒ½æ˜¯ç›¸å¯¹è´¨æ•°ã€‚åœ¨ç½‘ä¸Šå¯ä»¥ æ‰¾åˆ°è´¨æ•°çš„æ¸…å•ï¼Œå®ƒä»¬æœ‰çš„éå¸¸å¤§ã€‚ ä¸ºäº†è¿›ä¸€æ­¥å¢åŠ éšæœºæ€§ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ç”¨è´¨æ•°æ¥æŒ‡å®šå„ç»„æ¡çº¹çš„å®½åº¦ã€‚ äºæ˜¯æˆ‘ä»¬çš„ä»£ç å˜ä¸º: background: hsl(20, 40%, 90%); background-image: linear-gradient(90deg, #fb3 11px, transparent 0), linear-gradient(90deg, #ab4 23px, transparent 0), linear-gradient(90deg, #655 41px, transparent 0); background-size: 41px 100%, 61px 100%, 83px 100%; 8 è¿ç»­çš„å›¾åƒè¾¹æ¡† å‚ç…§ï¼šhttps://blog.csdn.net/qq_41903941/article/details/90259306 ç¬¬ä¸‰ç«  9ã€è‡ªé€‚åº”çš„æ¤­åœ† ç»™ä»»ä½•æ­£æ–¹å½¢å…ƒç´ è®¾ç½®ä¸€ä¸ªè¶³å¤Ÿå¤§çš„border- radiusï¼Œå°±å¯ä»¥æŠŠå®ƒå˜æˆä¸€ä¸ªåœ†å½¢ã€‚æ‰€ç”¨åˆ°çš„ CSS ä»£ç å¦‚ä¸‹æ‰€ç¤º: background: #fb3; width: 200px; height: 200px; border-radius: 100px; /* >= æ­£æ–¹å½¢è¾¹é•¿çš„ä¸€åŠ */ ä½ å¯èƒ½è¿˜æ³¨æ„åˆ°äº†ï¼Œå¦‚æœæŒ‡å®šä»»ä½•å¤§äº 100px çš„åŠå¾„ï¼Œä»ç„¶å¯ä»¥å¾—åˆ°ä¸€ ä¸ªåœ†å½¢ã€‚è§„èŒƒç‰¹åˆ«æŒ‡å‡ºäº†è¿™å…¶ä¸­çš„åŸå› : â€œå½“ä»»æ„ä¸¤ä¸ªç›¸é‚»åœ†è§’çš„åŠå¾„ä¹‹å’Œè¶…è¿‡ border box çš„å°ºå¯¸æ—¶ï¼Œç”¨æˆ· ä»£ç†å¿…é¡»æŒ‰æ¯”ä¾‹å‡å°å„ä¸ªè¾¹æ¡†åŠå¾„æ‰€ä½¿ç”¨çš„å€¼ï¼Œç›´åˆ°å®ƒä»¬ä¸ä¼šç›¸äº’é‡å  ä¸ºæ­¢ã€‚â€ è¯´åˆ° border-radiusï¼Œæœ‰ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„çœŸç›¸:å®ƒå¯ä»¥å•ç‹¬æŒ‡å®šæ°´å¹³ å’Œå‚ç›´åŠå¾„ï¼Œåªè¦ç”¨ä¸€ä¸ªæ–œæ (/)åˆ†éš”è¿™ä¸¤ä¸ªå€¼å³å¯ã€‚è¿™ä¸ªç‰¹æ€§å…è®¸æˆ‘ ä»¬åœ¨æ‹è§’å¤„åˆ›å»ºæ¤­åœ†åœ†è§’(å‚è§å›¾ 3-3)ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå°ºå¯¸ä¸º 200pxÃ—150px çš„å…ƒç´ ï¼Œå°±å¯ä»¥æŠŠå®ƒåœ†è§’çš„ä¸¤ä¸ªåŠå¾„å€¼åˆ†åˆ«æŒ‡å®šä¸ºå…ƒç´ å®½é«˜çš„ ä¸€åŠï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªç²¾ç¡®çš„æ¤­åœ†: border-radius: 100px / 75px; "},"æŠ€æœ¯ç¬”è®°/goè¯­è¨€å˜é‡å£°æ˜åçš„é»˜è®¤å€¼.html":{"url":"æŠ€æœ¯ç¬”è®°/goè¯­è¨€å˜é‡å£°æ˜åçš„é»˜è®¤å€¼.html","title":"Goè¯­è¨€å˜é‡å£°æ˜åçš„é»˜è®¤å€¼","keywords":"","body":"åœ¨ go è¯­è¨€ä¸­ï¼Œä»»ä½•ç±»å‹åœ¨å£°æ˜åæ²¡æœ‰èµ‹å€¼çš„æƒ…å†µä¸‹ï¼Œéƒ½å¯¹åº”ä¸€ä¸ªé›¶å€¼ã€‚ æ•´å½¢å¦‚ int8ã€byteã€int16ã€uintã€uintprt ç­‰ï¼Œé»˜è®¤å€¼ä¸º 0ã€‚ æµ®ç‚¹ç±»å‹å¦‚ float32ã€float64ï¼Œé»˜è®¤å€¼ä¸º 0ã€‚ å¸ƒå°”ç±»å‹ bool çš„é»˜è®¤å€¼ä¸º falseã€‚ å¤æ•°ç±»å‹å¦‚ complex64ã€complex128ï¼Œé»˜è®¤å€¼ä¸º 0+0iã€‚ å­—ç¬¦ä¸² string çš„é»˜è®¤å€¼ä¸ºâ€â€œã€‚ é”™è¯¯ç±»å‹ error çš„é»˜è®¤å€¼ä¸º nilã€‚ å¯¹äºä¸€äº›å¤åˆç±»å‹ï¼Œå¦‚æŒ‡é’ˆã€åˆ‡ç‰‡ã€å­—å…¸ã€é€šé“ã€æ¥å£ï¼Œé»˜è®¤å€¼ä¸º nilã€‚è€Œæ•°ç»„çš„é»˜è®¤å€¼è¦æ ¹æ®å…¶æ•°æ®ç±»å‹æ¥ç¡®å®šã€‚ä¾‹å¦‚ï¼švar a [4]intï¼Œå…¶é»˜è®¤å€¼ä¸º[0 0 0 0]ã€‚ "},"æŠ€æœ¯ç¬”è®°/http2.0.html":{"url":"æŠ€æœ¯ç¬”è®°/http2.0.html","title":"Http2.0","keywords":"","body":"HTTP 2.0 å¤šè·¯å¤ç”¨â€”â€”å¾—ç›ŠäºäºŒè¿›åˆ¶åˆ†å¸§ï¼Œå¤šä¸ªè¯·æ±‚åŒæ—¶å¤ç”¨åŒä¸€ä¸ªè¿æ¥ å¤´éƒ¨å‹ç¼©â€”â€”ç¬¬ä¸€æ¬¡è¯·æ±‚ä¸¤ç«¯ç¼“å­˜å¤´éƒ¨ï¼Œåç»­è¯·æ±‚åªå‘é€å·®å¼‚å¤´éƒ¨ æœåŠ¡å™¨æ¨é€â€”â€”è¯·æ±‚HTMLæ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨æ¨é€HTMLä¸­éœ€è¦çš„èµ„æºï¼Œå‡å°‘åŠ è½½æ—¶é—´ "},"æŠ€æœ¯ç¬”è®°/https.html":{"url":"æŠ€æœ¯ç¬”è®°/https.html","title":"Https","keywords":"","body":"HTTPS sslå»ºç«‹è¿æ¥è¿‡ç¨‹ å®¢æˆ·ç«¯è¯·æ±‚httpsåœ°å€ï¼Œå‘é€å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³• æœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯åï¼Œå“åº”åŒ¹é…å¥½çš„åŠ å¯†ç®—æ³•å’Œæ•°å­—è¯ä¹¦ï¼ˆå…¬é’¥ï¼‰ å®¢æˆ·ç«¯è§£æè¯ä¹¦ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼ˆä¼šè¯å¯†é’¥ï¼‰ å®¢æˆ·ç«¯é€šè¿‡å…¬é’¥åŠ å¯†ä¼šè¯å¯†é’¥ å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€4çš„åŠ å¯†ä¿¡æ¯ æœåŠ¡ç«¯è§£å¯†è·å¾—ä¼šè¯å¯†é’¥å¹¶å“åº”æˆåŠŸ å®¢æˆ·ç«¯é€šè¿‡ä¼šè¯å¯†é’¥åŠ å¯†ä¸€æ¡æ¶ˆæ¯å¹¶å‘é€ç»™æœåŠ¡ç«¯ï¼ŒéªŒè¯æœåŠ¡ç«¯æ˜¯å¦æ­£å¸¸æ¥æ”¶åŠ å¯†æ¶ˆæ¯ æœåŠ¡ç«¯å›ä¼ ä¸€æ¡é€šè¿‡ä¼šè¯å¯†é’¥åŠ å¯†çš„æ¶ˆæ¯ï¼Œå®¢æˆ·ç«¯æ¥æ”¶çš„è¯è¡¨æ˜sslè¿æ¥å»ºç«‹å®Œæˆäº† "},"æŠ€æœ¯ç¬”è®°/jsä½¿ç”¨æŠ€å·§.html":{"url":"æŠ€æœ¯ç¬”è®°/jsä½¿ç”¨æŠ€å·§.html","title":"Jsä½¿ç”¨æŠ€å·§","keywords":"","body":"1.ç”ŸæˆæŒ‡å®šèŒƒå›´çš„æ•°å­— åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªå¤„åœ¨ä¸¤ä¸ªæ•°ä¹‹é—´çš„æ•°ç»„ã€‚å‡è®¾æˆ‘ä»¬è¦åˆ¤æ–­æŸäººçš„ç”Ÿæ—¥æ˜¯å¦åœ¨æŸä¸ªèŒƒå›´çš„å¹´ä»½å†…ï¼Œé‚£ä¹ˆä¸‹é¢æ˜¯å®ç°å®ƒçš„ä¸€ä¸ªå¾ˆç®€å•çš„æ–¹æ³• ğŸ˜ let start = 1900, end = 2000; [...new Array(end + 1).keys()].slice(start); // [ 1900, 1901, ..., 2000] // è¿˜æœ‰è¿™ç§æ–¹å¼ï¼Œä½†å¯¹äºå¾ˆçš„èŒƒå›´å°±ä¸å¤ªç¨³å®š Array.from({ length: end - start + 1 }, (_, i) => start + i); 2.ä½¿ç”¨å€¼æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•° åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å€¼æ”¶é›†åˆ°æ•°ç»„ä¸­ï¼Œç„¶åå°†å…¶ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’ã€‚ ä½¿ç”¨ ES6ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦(...)å¹¶ä»[arg1, arg2] > (arg1, arg2)ä¸­æå–æ•°ç»„: const parts = { first: [0, 2], second: [1, 3], } [\"Hello\", \"World\", \"JS\", \"Tricks\"].slice(...parts.second) // [\"World\", \"JS\"] å¤åˆ¶ä»£ç  3.å°†å€¼ç”¨ä½œ Math æ–¹æ³•çš„å‚æ•° å½“æˆ‘ä»¬éœ€è¦åœ¨æ•°ç»„ä¸­ä½¿ç”¨Math.maxæˆ–Math.minæ¥æ‰¾åˆ°æœ€å¤§æˆ–è€…æœ€å°å€¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·è¿›è¡Œæ“ä½œï¼š const elementsHeight = [...document.body.children].map( el => el.getBoundingClientRect().y ); Math.max(...elementsHeight); // 474 const numbers = [100, 100, -1000, 2000, -3000, 40000]; Math.min(...numbers); // -3000 å¤åˆ¶ä»£ç  4.åˆå¹¶/å±•å¹³æ•°ç»„ä¸­çš„æ•°ç»„ Array æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œç§°ä¸ºArray.flatï¼Œå®ƒæ˜¯éœ€è¦ä¸€ä¸ªdepthå‚æ•°ï¼Œè¡¨ç¤ºæ•°ç»„åµŒå¥—çš„æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º1ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸çŸ¥é“æ·±åº¦æ€ä¹ˆåŠï¼Œåˆ™éœ€è¦å°†å…¶å…¨éƒ¨å±•å¹³ï¼Œåªéœ€å°†Infinityä½œä¸ºå‚æ•°å³å¯ ğŸ˜ const arrays = [[10], 50, [100, [2000, 3000, [40000]]]] arrays.flat(Infinity) // [ 10, 50, 100, 2000, 3000, 40000 ] å¤åˆ¶ä»£ç  5. é˜²æ­¢ä»£ç å´©æºƒ åœ¨ä»£ç ä¸­å‡ºç°ä¸å¯é¢„æµ‹çš„è¡Œä¸ºæ˜¯ä¸å¥½çš„ï¼Œä½†æ˜¯å¦‚æœä½ æœ‰è¿™ç§è¡Œä¸ºï¼Œä½ éœ€è¦å¤„ç†å®ƒã€‚ ä¾‹å¦‚ï¼Œå¸¸è§é”™è¯¯TypeErrorï¼Œè¯•è·å–undefined/nullç­‰å±æ€§ï¼Œå°±ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚ const found = [{ name: \"Alex\" }].find(i => i.name === 'Jim') console.log(found.name) // TypeError: Cannot read property 'name' of undefined å¤åˆ¶ä»£ç  æˆ‘ä»¬å¯ä»¥è¿™æ ·é¿å…å®ƒï¼š const found = [{ name: \"Alex\" }].find(i => i.name === 'Jim') || {} console.log(found.name) // undefined å¤åˆ¶ä»£ç  6. ä¼ é€’å‚æ•°çš„å¥½æ–¹æ³• å¯¹äºè¿™ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹å°±æ˜¯styled-componentsï¼Œåœ¨ES6ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¨¡æ¿å­—ç¬¦ä¸­ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’è€Œæ— éœ€ä½¿ç”¨æ–¹æ‹¬å·ã€‚ å¦‚æœè¦å®ç°æ ¼å¼åŒ–/è½¬æ¢æ–‡æœ¬çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ€å·§ï¼š const makeList = (raw) => raw .join() .trim() .split(\"\\n\") .map((s, i) => `${i + 1}. ${s}`) .join(\"\\n\"); makeList` Hello, World Hello, World `; // 1. Hello,World // 2. World,World å¤åˆ¶ä»£ç  7.äº¤æ¢å˜é‡ ä½¿ç”¨è§£æ„èµ‹å€¼è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°äº¤æ¢å˜é‡ ä½¿ç”¨è§£æ„èµ‹å€¼è¯­æ³• ğŸ˜¬: let a = \"hello\" let b = \"world\" // é”™è¯¯çš„æ–¹å¼ a = b b = a // { a: 'world', b: 'world' } // æ­£ç¡®çš„åšæ³• [a, b] = [b, a] // { a: 'world', b: 'hello' } å¤åˆ¶ä»£ç  8.æŒ‰å­—æ¯é¡ºåºæ’åº éœ€è¦åœ¨è·¨å›½é™…çš„é¡¹ç›®ä¸­ï¼Œå¯¹äºæŒ‰å­—å…¸æ’åºï¼Œä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„è¯­è¨€å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œå¦‚ä¸‹æ‰€ç¤º ğŸ˜¨ // é”™è¯¯çš„åšæ³• [\"a\", \"z\", \"Ã¤\"].sort((a, b) => a - b); // ['a', 'z', 'Ã¤'] // æ­£ç¡®çš„åšæ³• [\"a\", \"z\", \"Ã¤\"].sort((a, b) => a.localeCompare(b)); // [ 'a', 'Ã¤', 'z' ] å¤åˆ¶ä»£ç  localeCompare() :ç”¨æœ¬åœ°ç‰¹å®šçš„é¡ºåºæ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚ 9.éšè—éšç§ æœ€åä¸€ä¸ªæŠ€å·§æ˜¯å±è”½å­—ç¬¦ä¸²,å½“ä½ éœ€è¦å±è”½ä»»ä½•å˜é‡æ—¶(ä¸æ˜¯å¯†ç )ï¼Œä¸‹é¢è¿™ç§åšæ³•å¯ä»¥å¿«é€Ÿå¸®ä½ åšåˆ°ï¼š const password = \"hackme\"; password.substr(-3).padStart(password.length, \"*\"); // ***kme å¤åˆ¶ä»£ç  ä»£ç éƒ¨ç½²åå¯èƒ½å­˜åœ¨çš„BUGæ²¡æ³•å®æ—¶çŸ¥é“ï¼Œäº‹åä¸ºäº†è§£å†³è¿™äº›BUGï¼ŒèŠ±äº†å¤§é‡çš„æ—¶é—´è¿›è¡Œlog è°ƒè¯•ï¼Œè¿™è¾¹é¡ºä¾¿ç»™å¤§å®¶æ¨èä¸€ä¸ªå¥½ç”¨çš„BUGç›‘æ§å·¥å…· Fundebugã€‚ "},"æŠ€æœ¯ç¬”è®°/less ä½¿ç”¨æŠ€å·§.html":{"url":"æŠ€æœ¯ç¬”è®°/less ä½¿ç”¨æŠ€å·§.html","title":"Less ä½¿ç”¨æŠ€å·§","keywords":"","body":"1.å±‚çº§å…³ç³» è®©è¿™ä¸ªboxèŒƒå›´å†…çš„å…¨éƒ¨åŒ…è¿›æ¥ï¼Œè¿™æ ·çš„è¯å°±å®Œç¾çš„è¿›è¡Œè°ƒèŠ‚ï¼Œå†ä¹Ÿä¸ç”¨åˆ°å¤„æ‰¾ç¬¬å‡ è¡Œç¬¬å‡ ä¸ªï¼Œæˆ‘åˆšæ‰åœ¨å“ªä¸ªä½ç½®ç»™è¦†ç›–äº†ã€‚ä¸€çœ‹ä¾¿çŸ¥ï¼ .box{ width: 100%; height: 300px; p{ margin: 10px; span{ padding: 10px; a{ list-style: none; &:nth-child(1){ } } } } } 2.ä¸»è‰²è°ƒçš„ä½¿ç”¨ å°ç±³è¯ºåŸºäºšç­‰å…¬å¸ï¼Œéƒ½æœ‰è‡ªå·±çš„ä¸»è‰²è°ƒã€‚å¦‚æœæ¯æ¬¡åŠ ä¸€ä¸ª#e23615å¤ªéº»çƒ¦ï¼Œè€Œä¸”å¦‚æœè¯ºåŸºäºšè¦ææ´»åŠ¨ï¼è¿‡å¹´è¦æ¢æˆçº¢è‰²ï¼ä½ å®Œäº†ã€‚ã€‚ã€‚ä½ åšäº†æ— æ•°ä¸ªbackgroundå’Œfont-colorã€‚æ­¤æ—¶lessè§£å†³äº†è¿™ä¸ªé—®é¢˜ @bg-color: #000; @ft-color: #e1e1e1; .bg-color { background: @bg-color; color: @ft-color; padding: 8px 25px; } 3.æ‹¿ä»–å½“å‡½æ•°ç”¨ æ¯”å¦‚è¯´æˆ‘åœ¨box1ä¸­ç”¨äº†å¾ˆå¤šæ¼‚äº®çš„æ ·å¼ï¼Œåœ¨box2ä¸­æƒ³ä½¿ç”¨ï¼Œä½†å¿…é¡»æŠŠä»–ä»¬çš„10è¡Œæ ·å¼å…¨å¤åˆ¶è¿‡æ¥ï¼Œå¤šæ¬¡ä½¿ç”¨å¾ˆéº»çƒ¦ã€‚æ€ä¹ˆåŠï¼Ÿè¿™æ¬¡æ‹¿ä»–å½“å‡½æ•°ï¼Œ ç¬¬ä¸€ç§ï¼šæœ€ç®€å•ï¼Œæ”¾è¿›å»å°±è¡Œ .x{ background: #000; width: 300px; height: 100px; } .box { .x; border:1px solid #ccc } //ç›¸å½“äºè¿™æ ·ï¼Œè€Œä¸”èƒ½å¤šæ¬¡ä½¿ç”¨ï¼ //å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„å­¦ä¹ ï¼Œæ­¥æ­¥é«˜æ‰“ç«æœºï¼Œå“ªé‡Œä¸ä¼šç‚¹å“ªé‡Œ .box { background: #000; width: 300px; height: 100px; border:1px solid #ccc } ç¬¬äºŒç§ï¼šå½“å‡½æ•°æ¥å›è°ƒï¼Œè‡ªå·±è¿™ä¸ªé¢œè‰²æˆ‘ä¸ç¡®å®šæ€ä¹ˆåŠï¼Œæœ¨æœ‰å…³ç³» @color å°±æ˜¯ function(a) é‡Œé¢çš„aï¼Œå¯ä»¥çèµ·å @color å¯ä»¥æ”¾é»˜è®¤å€¼æ‡’å¾—åŠ¨ï¼Œä¹Ÿå¯ä»¥æ”¾å…¨æ–°çš„é¢œè‰²ã€‚ .x(@color){ background:@color; border:1px solid @color } .x(@color:#ccc){ background:@color; border:1px solid @color } .box { .x(#000); display:flex; } //ç›¸å½“äºåˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œæ¢ä¸€ä¸ªä¸»é¢˜ã€‚å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„å­¦ä¹  4.ä¸€ä¸ªclassæœ‰Nä¸ªæ–¹æ¡ˆ æ¯”å¦‚è¯´è¿™ä¸ªclasså«kings æˆ‘ç»™ä»–åšå‡ºäº†4ç§ä¸»é¢˜ï¼Œå„ç§å¤§å°å®Œå…¨ä¸åŒã€‚æ­¤æ—¶æˆ‘æ€»ä¸èƒ½èµ·åå« kings1ï¼Œkings2ï¼Œkings3å§ é¦–å…ˆæŠŠæ‰€æœ‰æ–¹æ¡ˆæ’åˆ—å‡ºæ¥ï¼ç„¶åboxæ¥æ˜¾ç¤ºã€‚ ç›¸å½“äºç”µè§†æœºï¼Œä½ æ”¾Nä¸ªå°è‡ªå·±é€‰å“ªä¸ªç”µè§†å‰§ @_ å…¶å®æ˜¯é»˜è®¤çš„æ„æ€ï¼Œä½ ä»€ä¹ˆéƒ½ä¸åŠ ç©ºç€å°±è¿™æ · ä½ è¦åŠ aæˆ–bæˆ–cå°±å¦ä¸€ç§æ–¹æ¡ˆ .king(@_, @width:1px, @height:1p, @bg:#fff) { width:@width; height:@height; background:@bg; } .king(a, @width:100px, @height:100p, @bg:#000) { width:@width; height:@height; background:@bg; } .king(b, @width:200px, @height:200p, @bg:#f88) { width:@width; height:@height; background:@bg; } .king(c, @width:300px, @height:300p, @bg:#0000CC;) { width:@width; height:@height; background:@bg; } .box{ .king(a) } 5.ç®€å•çš„è®¡ç®—å™¨ åŸºæœ¬çš„åŠ å‡ä¹˜é™¤åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ è€Œä¸”è¿‡ç¨‹ä¸­ä¸ç”¨æ‹…å¿ƒç”¨ä¸ç”¨åŠ px rem åœ¨aé‡ŒåŠ å°±è¡Œäº† @a:100px; .box{ width:(a/2)+3-5*2; } 6.argumentsçš„ä½¿ç”¨ å…¶å®ä»–å°±æ˜¯ç”¨æ¥ äº”é©¬åˆ†å°¸çš„ã€‚ æ¯”å¦‚borderçš„åˆ†å¸ƒ:ç”±æ•°å­—ï¼Œæ ·å¼ï¼Œé¢œè‰²æ‹¼å‡ºæ¥ã€‚ border: 1px solid #ccc æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ç”¨ä¸€ä¸ªå°±KOæ‰ï¼Ÿé‚£å°±æ˜¯arguments .bor(@a:1px, @b:solid, @c:#000) { border:@arguments } .box1{ .bor(); } .box2{ .bor(20px, dashed, #ccc); } "},"æŠ€æœ¯ç¬”è®°/markdown.html":{"url":"æŠ€æœ¯ç¬”è®°/markdown.html","title":"Markdown","keywords":"","body":"Markdown è¯­æ³•å­¦ä¹  [TOC] 1ã€å¿«æ·é”® åŠŸèƒ½ å¿«æ·é”® åŠ ç²— Ctrl+B æ–œä½“ Ctrl+I å¼•ç”¨ Ctrl+Q æ’å…¥é“¾æ¥ Ctrl+L æ’å…¥ä»£ç  Ctrl+K æ’å…¥å›¾ç‰‡ Ctrl+G æå‡æ ‡é¢˜ Ctrl+H æœ‰åºåˆ—è¡¨ Ctrl+O æ— åºåˆ—è¡¨ Ctrl+U æ¨ªçº¿ Ctrl+R æ’¤é”€ Ctrl+Z é‡åš Ctrl+Y 2ã€åŸºæœ¬è¯­æ³• 2.1 å­—ä½“è®¾ç½®æ–œä½“ç²—ä½“åˆ é™¤çº¿ æ­£å¸¸æ–‡å­— è¿™é‡Œæ˜¯æ–‡å­— è¿™é‡Œæ˜¯æ–‡å­— è¿™é‡Œæ˜¯æ–‡å­— è¿™é‡Œæ˜¯æ–‡å­— è¿™é‡Œæ˜¯æ–‡å­— 2.2 åˆ†çº§æ ‡é¢˜ å†™æ³•1: # ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜#### å››çº§æ ‡é¢˜##### äº”çº§æ ‡é¢˜###### å…­çº§æ ‡é¢˜ è¿™ä¸ªå†™æ³•å’Œ æ–‡å­—æ•ˆæœæ˜¯ä¸€æ ·çš„ å†™æ³•2ï¼š è¿™æ˜¯ä¸€ä¸ªä¸€çº§æ ‡é¢˜ æˆ–è€… äºŒçº§æ ‡é¢˜ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 2.3 é“¾æ¥ æ’å…¥æœ¬åœ°å›¾ç‰‡é“¾æ¥ è¯­æ³•è§„åˆ™ï¼Œæœ‰ä¸¤ç§å†™æ³•ï¼š æ’å…¥äº’è”ç½‘ä¸Šå›¾ç‰‡ è¯­æ³•è§„åˆ™ï¼š è‡ªåŠ¨è¿æ¥ Markdown æ”¯æŒä»¥æ¯”è¾ƒç®€çŸ­çš„è‡ªåŠ¨é“¾æ¥å½¢å¼æ¥å¤„ç†ç½‘å€å’Œç”µå­é‚®ä»¶ä¿¡ç®±ï¼Œåªè¦æ˜¯ç”¨<>åŒ…èµ·æ¥ï¼Œ Markdown å°±ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æˆé“¾æ¥ã€‚ä¹Ÿå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿæ˜¯å¯ä»¥æ˜¾ç¤ºæˆé“¾æ¥å½¢å¼çš„ ä¾‹å¦‚ï¼šhttp://www.baidu.com 2.4 åˆ†å‰²çº¿ ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·(*)ã€å‡å·(-)ã€åº•çº¿(_)æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ˜Ÿå·æˆ–æ˜¯å‡å·ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚ 2.5 ä»£ç å— å¯¹äºç¨‹åºå‘˜æ¥è¯´è¿™ä¸ªåŠŸèƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæ’å…¥ç¨‹åºä»£ç çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ©ç”¨ç¼©è¿›(tab), å¦ä¸€ç§æ˜¯åˆ©ç”¨è‹±æ–‡â€œ`â€ç¬¦å·ï¼ˆä¸€èˆ¬åœ¨ESCé”®ä¸‹æ–¹ï¼Œå’Œ~åŒä¸€ä¸ªé”®ï¼‰åŒ…è£¹ä»£ç ã€‚ ï¼ˆ1ï¼‰ä»£ç å—ï¼šç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ã€‚æ•ˆæœå¦‚ä¸‹ï¼š function test() { } 2ï¼‰è¡Œå†…å¼ï¼šå¦‚æœåœ¨ä¸€ä¸ªè¡Œå†…éœ€è¦å¼•ç”¨ä»£ç ï¼Œåªè¦ç”¨åå¼•å·`å¼•èµ·æ¥å°±å¥½ï¼ˆä¸€èˆ¬åœ¨ESCé”®ä¸‹æ–¹ï¼Œå’Œ~åŒä¸€ä¸ªé”®ï¼‰ ï¼ˆ3ï¼‰å¤šè¡Œä»£ç å—ä¸è¯­æ³•é«˜äº®ï¼šåœ¨éœ€è¦é«˜äº®çš„ä»£ç å—çš„å‰ä¸€è¡ŒåŠåä¸€è¡Œä½¿ç”¨ä¸‰ä¸ªå•åå¼•å·â€œ`â€åŒ…è£¹ï¼Œå°±å¯ä»¥äº†ã€‚ ç¤ºä¾‹å¦‚ä¸‹ ï¼ˆ4ï¼‰ä»£ç å—é‡Œé¢åŒ…å«htmlä»£ç  åœ¨ä»£ç åŒºå—é‡Œé¢ï¼Œ & ã€ ä¼šè‡ªåŠ¨è½¬æˆ HTML å®ä½“ï¼Œè¿™æ ·çš„æ–¹å¼è®©ä½ éå¸¸å®¹æ˜“ä½¿ç”¨ Markdown æ’å…¥èŒƒä¾‹ç”¨çš„ HTML åŸå§‹ç ï¼Œåªéœ€è¦å¤åˆ¶è´´ä¸Šï¼Œå‰©ä¸‹çš„ Markdown éƒ½ä¼šå¸®ä½ å¤„ç†ã€‚ æ³¨æ„ï¼šç®€ä¹¦ä»£ç å—é‡Œä¸æ”¯æŒhtmlã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š 2.6 å¼•ç”¨ åœ¨è¢«å¼•ç”¨çš„æ–‡æœ¬å‰åŠ ä¸Š>ç¬¦å·ï¼Œä»¥åŠä¸€ä¸ªç©ºæ ¼å°±å¯ä»¥äº†ï¼Œå¦‚æœåªè¾“å…¥äº†ä¸€ä¸ª>ç¬¦å·ä¼šäº§ç”Ÿä¸€ä¸ªç©ºç™½çš„å¼•ç”¨ã€‚ ï¼ˆ1ï¼‰åŸºæœ¬ä½¿ç”¨ ä½¿ç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ï¼ˆ2ï¼‰å¼•ç”¨çš„åµŒå¥—ä½¿ç”¨ ä½¿ç”¨å¦‚å›¾æ‰€ç¤ºï¼š ï¼ˆ3ï¼‰å¼•ç”¨å…¶å®ƒè¦ç´  å¼•ç”¨çš„åŒºå—å†…ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ Markdown è¯­æ³•ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç åŒºå—ç­‰ã€‚ ä½¿ç”¨å¦‚å›¾æ‰€ç¤ºï¼š 2.7 åˆ—è¡¨ ï¼ˆ1ï¼‰æ— åºåˆ—è¡¨ ä½¿ç”¨ *ï¼Œ+ï¼Œ- è¡¨ç¤ºæ— åºåˆ—è¡¨ã€‚ æ³¨æ„ï¼šç¬¦å·åé¢ä¸€å®šè¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œèµ·åˆ°ç¼©è¿›çš„ä½œç”¨ã€‚ ï¼ˆ2ï¼‰æœ‰åºåˆ—è¡¨ ä½¿ç”¨æ•°å­—å’Œä¸€ä¸ªè‹±æ–‡å¥ç‚¹è¡¨ç¤ºæœ‰åºåˆ—è¡¨ã€‚ æ³¨æ„ï¼šè‹±æ–‡å¥ç‚¹åé¢ä¸€å®šè¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œèµ·åˆ°ç¼©è¿›çš„ä½œç”¨ã€‚ ï¼ˆ3ï¼‰æ— åºåˆ—è¡¨å’Œæœ‰åºåˆ—è¡¨åŒæ—¶ä½¿ç”¨ ï¼ˆ4ï¼‰åˆ—è¡¨å’Œå…¶å®ƒè¦ç´ æ··åˆä½¿ç”¨ åˆ—è¡¨ä¸å…‰å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ Markdown è¯­æ³•ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€å¼•ç”¨ã€ä»£ç åŒºå—ç­‰ã€‚ æ³¨æ„äº‹é¡¹ï¼š ï¼ˆ1ï¼‰åŠ ç²—æ•ˆæœä¸èƒ½ç›´æ¥ç”¨äºåˆ—è¡¨æ ‡é¢˜é‡Œé¢ï¼Œä½†æ˜¯å¯ä»¥åµŒå¥—åœ¨åˆ—è¡¨é‡Œé¢æ··åˆä½¿ç”¨ã€‚ ï¼ˆ2ï¼‰åˆ—è¡¨ä¸­åŒ…å«ä»£ç å—ï¼ˆå‰é¢åŠ 2ä¸ªtabæˆ–è€…8ä¸ªç©ºæ ¼ï¼Œå¹¶ä¸”éœ€è¦ç©ºä¸€è¡Œï¼Œå¦åˆ™ä¸æ˜¾ç¤ºï¼‰ã€‚ ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹å›¾ï¼š ï¼ˆ5ï¼‰æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨åˆ—è¡¨æ—¶ï¼Œåªè¦æ˜¯æ•°å­—åé¢åŠ ä¸Šè‹±æ–‡çš„ç‚¹ï¼Œå°±ä¼šæ— æ„é—´äº§ç”Ÿåˆ—è¡¨ï¼Œæ¯”å¦‚2017.12.30 è¿™æ—¶å€™æƒ³è¡¨è¾¾çš„æ˜¯æ—¥æœŸï¼Œæœ‰äº›è½¯ä»¶æŠŠå®ƒè¢«è¯¯è®¤ä¸ºæ˜¯åˆ—è¡¨ã€‚è§£å†³æ–¹å¼ï¼šåœ¨æ¯ä¸ªç‚¹å‰é¢åŠ ä¸Š\\å°±å¯ä»¥äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2.8 è¡¨æ ¼ è¡¨æ ¼çš„åŸºæœ¬å†™æ³•å¾ˆç®€å•ï¼Œå°±è·Ÿè¡¨æ ¼çš„å½¢çŠ¶å¾ˆç›¸ä¼¼ï¼š è¡¨æ ¼å¯¹é½æ–¹å¼ï¼šæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¡¨æ ¼å•å…ƒæ ¼çš„å¯¹é½æ–¹å¼ï¼Œå†’å·åœ¨å·¦è¾¹è¡¨ç¤ºå·¦å¯¹é½ï¼Œå³è¾¹è¡¨ç¤ºæœ‰å¯¹é½ï¼Œä¸¤è¾¹éƒ½æœ‰è¡¨ç¤ºå±…ä¸­ã€‚ 3ã€å¸¸ç”¨æŠ€å·§ 3.1 æ¢è¡Œ æ–¹æ³•1: è¿ç»­ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼+å›è½¦ æ–¹æ³•2ï¼šä½¿ç”¨htmlè¯­è¨€æ¢è¡Œæ ‡ç­¾ï¼š 3.2 ç¼©è¿›å­—ç¬¦ ä¸æ–­è¡Œçš„ç©ºç™½æ ¼ æˆ– åŠè§’çš„ç©ºæ ¼ â€‚ æˆ– â€‚å…¨è§’çš„ç©ºæ ¼ â€ƒ æˆ– 3.3 ç‰¹æ®Šç¬¦å· ï¼ˆ1ï¼‰å¯¹äº Markdown ä¸­çš„è¯­æ³•ç¬¦å·ï¼Œå‰é¢åŠ åæ–œçº¿\\å³å¯æ˜¾ç¤ºç¬¦å·æœ¬èº«ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š ï¼ˆ2ï¼‰å…¶ä»–ç‰¹æ®Šå­—ç¬¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š æƒ³çŸ¥é“å­—ç¬¦å¯¹åº”çš„Unicodeç ï¼Œå¯ä»¥çœ‹è¿™ä¸ªç½‘ç«™ï¼šhttps://unicode-table.com/cn/ é™„ä¸Šå‡ ä¸ªå·¥å…·å¯¹ç‰¹æ®Šå­—ç¬¦çš„æ”¯æŒçš„å¯¹æ¯”å›¾: 3.4 å­—ä½“ã€å­—å·ä¸é¢œè‰² Markdownæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™çš„æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡ç±»ä¼¼HTMLçš„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¯ä»¥ä½¿æ™®é€šæ–‡æœ¬å†…å®¹å…·æœ‰ä¸€å®šçš„æ ¼å¼ã€‚ä½†æ˜¯å®ƒæœ¬èº«æ˜¯ä¸æ”¯æŒä¿®æ”¹å­—ä½“ã€å­—å·ä¸é¢œè‰²ç­‰åŠŸèƒ½çš„ï¼ CSDN-markdownç¼–è¾‘å™¨æ˜¯å…¶è¡ç”Ÿç‰ˆæœ¬ï¼Œæ‰©å±•äº†Markdownçš„åŠŸèƒ½ï¼ˆå¦‚è¡¨æ ¼ã€è„šæ³¨ã€å†…åµŒHTMLç­‰ç­‰ï¼‰ï¼å¯¹ï¼Œå°±æ˜¯å†…åµŒHTMLï¼Œæ¥ä¸‹æ¥è¦è®²çš„åŠŸèƒ½å°±éœ€è¦ä½¿ç”¨å†…åµŒHTMLçš„æ–¹æ³•æ¥å®ç°ã€‚ å­—ä½“ï¼Œå­—å·å’Œé¢œè‰²ç¼–è¾‘å¦‚ä¸‹ä»£ç  å…·ä½“é¢œè‰²åˆ†ç±»åŠæ ‡è®°è¯·çœ‹ä¸‹è¡¨ï¼š 3.5 é“¾æ¥çš„é«˜çº§æ“ä½œ é“¾æ¥çš„é«˜çº§æ“ä½œï¼ˆè¿™ä¸ªéœ€è¦æŒæ¡ä¸€ä¸‹ï¼Œå¾ˆæœ‰ç”¨ï¼‰ 1.è¡Œå†…å¼ è¿™ä¸ªåœ¨ä¸Šæ–‡ç¬¬äºŒæ¡åŸºæœ¬è¯­æ³•çš„ é“¾æ¥è¿™ä¸ªå°èŠ‚å·²ç»è¿‡ï¼Œè¿™é‡Œå°±ä¸ç»§ç»­è®²è§£äº†ã€‚ 2.å‚è€ƒå¼é“¾æ¥ åœ¨æ–‡æ¡£è¦æ’å…¥å›¾ç‰‡çš„åœ°æ–¹å†™![å›¾ç‰‡æˆ–ç½‘å€é“¾æ¥][æ ‡è®°]ï¼Œåœ¨æ–‡æ¡£çš„æœ€åå†™ä¸Š[æ ‡è®°]:å›¾ç‰‡åœ°å€ â€œæ ‡é¢˜â€ã€‚ï¼ˆæœ€åè¿™ä¸ªâ€æ ‡é¢˜â€å¯ä»¥ä¸å¡«å†™ï¼‰ ç¤ºä¾‹å¦‚ä¸‹ï¼š 3.å†…å®¹ç›®å½• åœ¨æ®µè½ä¸­å¡«å†™ [TOC] ä»¥æ˜¾ç¤ºå…¨æ–‡å†…å®¹çš„ç›®å½•ç»“æ„ã€‚ 4.é”šç‚¹ é”šç‚¹å…¶å®å°±æ˜¯é¡µå†…è¶…é“¾æ¥ã€‚æ¯”å¦‚æˆ‘è¿™é‡Œå†™ä¸‹ä¸€ä¸ªé”šç‚¹ï¼Œç‚¹å‡»å›åˆ°ç›®å½•ï¼Œå°±èƒ½è·³è½¬åˆ°ç›®å½•ã€‚ åœ¨ç›®å½•ä¸­ç‚¹å‡»è¿™ä¸€èŠ‚ï¼Œå°±èƒ½è·³è¿‡æ¥ã€‚ æ³¨æ„ï¼šåœ¨ç®€ä¹¦ä¸­ä½¿ç”¨é”šç‚¹æ—¶ï¼Œç‚¹å‡»ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„å½“å‰é¡µé¢ï¼Œè™½ç„¶é”šç‚¹ç”¨çš„ä¸æ˜¯å¾ˆèˆ’æœï¼Œä½†æ˜¯å¯ä»¥ç”¨æ³¨è„šå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ è¯­æ³•è¯´æ˜ï¼š åœ¨ä½ å‡†å¤‡è·³è½¬åˆ°çš„æŒ‡å®šæ ‡é¢˜åæ’å…¥é”šç‚¹{#æ ‡è®°}ï¼Œç„¶ååœ¨æ–‡æ¡£çš„å…¶å®ƒåœ°æ–¹å†™ä¸Šè¿æ¥åˆ°é”šç‚¹çš„é“¾æ¥ã€‚ ä½¿ç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 5.æ³¨è„š è¯­æ³•è¯´æ˜ï¼š åœ¨éœ€è¦æ·»åŠ æ³¨è„šçš„æ–‡å­—ååŠ ä¸Šè„šæ³¨åå­—æ³¨è„šåå­—,ç§°ä¸ºåŠ æ³¨ã€‚ ç„¶ååœ¨æ–‡æœ¬çš„ä»»æ„ä½ç½®(ä¸€èˆ¬åœ¨æœ€å)æ·»åŠ è„šæ³¨ï¼Œè„šæ³¨å‰å¿…é¡»æœ‰å¯¹åº”çš„è„šæ³¨åå­—ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š æ³¨ï¼š è„šæ³¨è‡ªåŠ¨è¢«æ¬è¿åˆ°æœ€åé¢ï¼Œè¯·åˆ°æ–‡ç« æœ«å°¾æŸ¥çœ‹ï¼Œå¹¶ä¸”è„šæ³¨åæ–¹çš„é“¾æ¥å¯ä»¥ç›´æ¥è·³è½¬å›åˆ°åŠ æ³¨çš„åœ°æ–¹ã€‚ ç”±äºç®€ä¹¦ä¸æ”¯æŒé”šç‚¹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ³¨è„šå®ç°é¡µé¢å†…éƒ¨çš„è·³è½¬ã€‚ 3.6 èƒŒæ™¯è‰² Markdownæœ¬èº«ä¸æ”¯æŒèƒŒæ™¯è‰²è®¾ç½®ï¼Œéœ€è¦é‡‡ç”¨å†…ç½®htmlçš„æ–¹å¼å®ç°ï¼šå€ŸåŠ© table, tr, td ç­‰è¡¨æ ¼æ ‡ç­¾çš„ bgcolor å±æ€§æ¥å®ç°èƒŒæ™¯è‰²çš„åŠŸèƒ½ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š èƒŒæ™¯è‰²æ˜¯ï¼šorange 3.7 emojiè¡¨æƒ…ç¬¦å· emojiè¡¨æƒ…ä½¿ç”¨:EMOJICODE:çš„æ ¼å¼ï¼Œè¯¦ç»†åˆ—è¡¨å¯è§ https://www.webpagefx.com/tools/emoji-cheat-sheet/ å½“ç„¶ç°åœ¨å¾ˆå¤šmarkdownå·¥å…·æˆ–è€…ç½‘ç«™éƒ½ä¸æ”¯æŒã€‚ ä¸‹é¢åˆ—å‡ºå‡ ä¸ªå¹³å°çš„å¯¹æ¯”ï¼š å·¥å…·æˆ–ç½‘ç«™ æ˜¯å¦æ”¯æŒemojiè¡¨æƒ…ç¬¦å· ç®€ä¹¦ å¦ MarkDownPad å¦ï¼ˆä¸çŸ¥é“ä»˜è´¹ç‰ˆæ˜¯å¦æ”¯æŒï¼‰ æœ‰é“äº‘ç¬”è®° å¦ zybuluo.com å¦ github æ˜¯ 4. é«˜ç«¯ç”¨æ³• 4.1 Latexæ•°å­¦å…¬å¼ ä½¿ç”¨LaTexæ•°å­¦å…¬å¼ 1.è¡Œå†…å…¬å¼ï¼šä½¿ç”¨ä¸¤ä¸ªâ€$â€ç¬¦å·å¼•ç”¨å…¬å¼: $å…¬å¼$ 2.è¡Œé—´å…¬å¼ï¼šä½¿ç”¨ä¸¤å¯¹â€œ$$â€ç¬¦å·å¼•ç”¨å…¬å¼ï¼š $$å…¬å¼$$ è¾“å…¥$\\sqrt{x^{2}}$ æ˜¾ç¤ºç»“æœæ˜¯x2â€¾â€¾âˆšx2 å…·ä½“å¯ä»¥å‚è€ƒ markdownç¼–è¾‘å™¨ä½¿ç”¨LaTexæ•°å­¦å…¬å¼ï¼ˆhttps://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Ftestcs_dn%2Farticle%2Fdetails%2F44229085ï¼‰ latexæ•°å­¦ç¬¦å·è¯¦è§ï¼šå¸¸ç”¨æ•°å­¦ç¬¦å·çš„ LaTeX è¡¨ç¤ºæ–¹æ³• 4.2 æµç¨‹å›¾ è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹æµç¨‹å›¾çš„è¯­æ³•ï¼Œä»…ä½œä¸ºäº†è§£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 4.3 åˆ¶ä½œä¸€ä»½å¾…åŠäº‹å®œâ€”-Todo åˆ—è¡¨ 4.4 ç»˜åˆ¶ åºåˆ—å›¾ 4.5 ç»˜åˆ¶ ç”˜ç‰¹å›¾ 5. Markdownå·¥å…· 1.markdownpadè½¯ä»¶ï¼Œå°±æ˜¯åˆ©ç”¨markdownè¯­è¨€å†™ç¬”è®°çš„ã€‚å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttp://markdownpad.com/ è½¯ä»¶å®‰è£…ä¹‹åçš„ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2.æœ‰é“äº‘ç¬”è®°æ”¯æŒmarkdownpadè¯­æ³•ã€‚å®˜æ–¹ç½‘å€ï¼šhttp://note.youdao.com/ å®ƒæœ‰åœ¨çº¿ç½‘é¡µç‰ˆä»¥åŠPCç«¯å¯ä»¥ä¸‹è½½ã€‚å½“ç„¶æœ‰é“äº‘ç¬”è®°ä¹Ÿæ”¯æŒhtmlè¯­æ³•ã€‚ ç½‘é¡µç‰ˆä½¿ç”¨markdownç¤ºä¾‹å›¾å¦‚ä¸‹ï¼š 3.åœ¨çº¿ç¼–è¾‘markdown https://www.zybuluo.com/mdeditor æœ¬æ–‡å‚è€ƒæ–‡ç« ï¼š http://blog.csdn.net/u010177286/article/details/50358720 https://www.zybuluo.com/mdeditor http://blog.leanote.com/post/freewalk/Markdown-%E8%AF%AD%E6%B3%95%E6%89%8B%E5%86%8C#title-18 "},"æŠ€æœ¯ç¬”è®°/react PureComponentå’ŒReact.memoçš„ç®€å•ä½œç”¨.html":{"url":"æŠ€æœ¯ç¬”è®°/react PureComponentå’ŒReact.memoçš„ç®€å•ä½œç”¨.html","title":"React PureComponentå’ŒReact.Memoçš„ç®€å•ä½œç”¨","keywords":"","body":"[TOC] react PureComponentå’ŒReact.memoçš„ç®€å•ä½œç”¨ PureComponent å’Œ React.memoçš„ä½œç”¨éƒ½æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–è€Œå‡ºç°çš„ï¼Œç›®çš„æ˜¯å‡å°‘ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ã€‚åŒºåˆ«æ˜¯PureComponentæ˜¯ä½œç”¨åœ¨class ç»„ä»¶ï¼ŒReact.memoæ˜¯ä½œç”¨åœ¨å‡½æ•°ç»„ä»¶ã€‚ PureComponent å…ˆæ¥çœ‹ä¸ªç®€å•ä¾‹å­ï¼š class Child extends React.Component { render() { console.log('Child render function is runing.'); return Child; } } class Parent extends React.Component { state = { num: 1, }; handleClick = () => { this.setState(state => ({ num: state.num + 1, })); }; render() { console.log('Parent render function is runing.'); return ( <> click to change{this.state.num} ); } } é¡µé¢å¾ˆç®€å•ï¼Œå°±ä¸€ä¸ªæŒ‰é’®ï¼Œå’Œåªæœ‰æ–‡æœ¬çš„å­ç»„ä»¶ï¼Œçˆ¶å­ç»„ä»¶æ²¡æœ‰ä»»ä½•é€šä¿¡ï¼š å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šå‘ç°çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶çš„renderå‡½æ•°éƒ½è¢«è§¦å‘äº†ï¼š ä½†æ˜¯çˆ¶å­ç»„ä»¶ä¹‹é—´æ˜¯æ²¡æœ‰ä»»ä½•é€šä¿¡çš„ï¼Œå­ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¸åº”è¯¥è¢«æ‰§è¡Œçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ä»£ç ï¼ŒæŠŠChildç»„ä»¶æ”¹æˆç»§æ‰¿React.PureComponent: class Child extends React.PureComponent { render() { console.log('Child render function is runing.'); return Child; } } è¿™æ—¶å€™æˆ‘ä»¬å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‘ç°å­ç»„ä»¶çš„renderå‡½æ•°ä¸ä¼šè§¦å‘äº†ï¼š ç„¶åï¼Œå½“æˆ‘ä»¬æŠŠæ•°å­—ä½œä¸ºpropsä¼ ç»™Childï¼Œä¿®æ”¹ä»£ç ä¸ºä¸‹é¢ï¼š è¿™æ—¶å€™å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‘ç°å­ç»„ä»¶çš„renderå‡½æ•°åˆä¼šè§¦å‘äº†ï¼š è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¼˜åŒ–Childç»„ä»¶ï¼Œå¹¶å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼š class Child extends React.PureComponent { shouldComponentUpdate() { return false; } render() { console.log('Child render function is runing.'); return Child; } } å­ç»„ä»¶æ²¡ç”¨åˆ°çš„propsæ”¹å˜ä¹Ÿä¸ä¼šæ›´æ–°äº†ï¼Œå½“ç„¶shouldComponentUpdateè¿˜æ˜¯è¦æŒ‰å®é™…éœ€è¦å»å†™ï¼Œè¿™é‡Œç›´æ¥è¿”å›falseï¼Œåé¢renderå‡½æ•°éƒ½ä¸ä¼šå†è¢«è§¦å‘äº†ã€‚ React.memo æˆ‘ä»¬æŠŠä¸Šé¢ä»£ç æ”¹æˆå‡½æ•°ç»„ä»¶ï¼š function Child() { console.log('Child render function is runing.'); return Child; } function Parent() { const [num, setNum] = useState(0); function handleClick() { setNum(num + 1); } console.log('Parent render function is runing.'); return ( <> click to change{num} ); } è¿™æ—¶å€™ç‚¹å‡»æŒ‰é’®ï¼Œçˆ¶å­ç»„ä»¶éƒ½è§¦å‘äº†æ¸²æŸ“ï¼š è¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹å­ç»„ä»¶ï¼š function ChildFn() { console.log('Child render function is runing.'); return Child; } const Child = React.memo(ChildFn); å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œå­ç»„ä»¶ä¸å†è§¦å‘æ¸²æŸ“äº†ï¼š è‹¥ä¼ äº†propsç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶åŒæ ·ä¼šè§¦å‘æ¸²æŸ“ã€‚ ç»“è¯­ PureComponentå’ŒReact.memoéƒ½æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–è€Œå‡ºç°çš„ï¼Œå†™ä»£ç æ—¶å¿…é¡»å¤šè€ƒè™‘æ€§èƒ½ä¼˜åŒ– "},"æŠ€æœ¯ç¬”è®°/react hook åŸç†.html":{"url":"æŠ€æœ¯ç¬”è®°/react hook åŸç†.html","title":"React Hook åŸç†","keywords":"","body":"react hook åŸç† æ‘˜è¦ å½“ä½¿ç”¨ Hook ç‰¹æ€§ç¼–å†™ç»„ä»¶çš„æ—¶å€™æ—¶å€™ï¼Œæ€»èƒ½æ„Ÿè§‰åˆ°å®ƒçš„ç®€æ´å’Œæ–¹ä¾¿ã€‚å½“ç„¶ï¼Œã€Œå¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ã€ï¼Œå®ƒç‰ºç‰²äº†å¯è¯»æ€§å¹¶ä¸”å­˜åœ¨å†…å­˜æ³„æ¼é£é™©ï¼ˆæœ€åæœ‰æåˆ°ï¼‰ã€‚ä½†è¿™å¹¶ä¸å¦¨ç¢æ¢ç´¢å®ƒçš„é­”åŠ›ã€‚ åœ¨æ­£å¼å¼€å§‹å‰ï¼Œå¸Œæœ›æ‚¨è¯»è¿‡ Hook çš„æ–‡æ¡£æˆ–è€…åœ¨é¡¹ç›®ä½¿ç”¨è¿‡å®ƒã€‚ä½†å¦‚æœåªå¯¹å‡½æ•°ç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯èƒ½æœ‰æ‰€æ”¶è·ã€‚ ä¸ºäº†è®©è¡Œæ–‡æ›´æµç•…ï¼Œæˆ‘æ‰“ç®—å…ˆæŠ›å‡ºå‡ ä¸ªé—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¼šåœ¨æºç å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œé€æ­¥è§£å†³ï¼š ğŸ¤”ï¸ useState çš„å®ç°åŸç† ğŸ¤”ï¸ ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å¾ªç¯ã€åˆ¤æ–­å†…éƒ¨ä½¿ç”¨ Hook ğŸ¤”ï¸ useEffect çš„å®ç°åŸç† ğŸ¤”ï¸ useEffect çš„åº”ç”¨åœºæ™¯ ğŸ¤”ï¸ Class vs Hooks useState çš„å®ç°åŸç† å½“è°ƒç”¨ useState çš„æ—¶å€™ï¼Œä¼šè¿”å›å½¢å¦‚ (å˜é‡, å‡½æ•°) çš„ä¸€ä¸ªå…ƒç¥–ã€‚å¹¶ä¸” state çš„åˆå§‹å€¼å°±æ˜¯å¤–éƒ¨è°ƒç”¨ useState çš„æ—¶å€™ï¼Œä¼ å…¥çš„å‚æ•°ã€‚ ç†æ¸…æ¥šäº†ä¼ å‚å’Œè¿”å›å€¼ï¼Œå†æ¥çœ‹ä¸‹ useState è¿˜åšäº†äº›ä»€ä¹ˆã€‚æ­£å¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼Œå½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ‰§è¡ŒsetNumï¼ŒçŠ¶æ€ num è¢«æ›´æ–°ï¼Œå¹¶ä¸” UI è§†å›¾æ›´æ–°ã€‚æ˜¾ç„¶ï¼ŒuseState è¿”å›çš„ç”¨äºæ›´æ”¹çŠ¶æ€çš„å‡½æ•°ï¼Œè‡ªåŠ¨è°ƒç”¨äº†renderæ–¹æ³•æ¥è§¦å‘è§†å›¾æ›´æ–°ã€‚ function App() { const [num, setNum] = useState 0; return ( num: {num} setNum(num + 1)}>åŠ  1 ); } æœ‰äº†ä¸Šé¢çš„æ¢ç´¢ï¼Œå€ŸåŠ©é—­åŒ…ï¼Œå°è£…ä¸€ä¸ª setState å¦‚ä¸‹ï¼š function render() { ReactDOM.render(, document.getElementById(\"root\")); } let state: any; function useState(initialState: T): [T, (newState: T) => void] { state = state || initialState; function setState(newState: T) { state = newState; render(); } return [state, setState]; } render(); // é¦–æ¬¡æ¸²æŸ“ å…ˆä¸è¦è€ƒè™‘é¢˜ç›®æåŠçš„é—®é¢˜ã€‚æ€è·¯è¿˜æ˜¯å›åˆ°å¦‚ä½•è®© useState æ”¯æŒå¤šä¸ª stateã€‚ã€ŠReact hooks: not magic, just arraysã€‹ä¸­æåŠï¼ŒReact Hook çœ‹èµ·æ¥éå¸¸ Magic çš„å®ç°ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯é€šè¿‡ Array æ¥å®ç°çš„ã€‚ å‰é¢ useState çš„ç®€å•å®ç°é‡Œï¼Œåˆå§‹çš„çŠ¶æ€æ˜¯ä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€å˜é‡ä¸­çš„ã€‚ä»¥æ­¤ç±»æ¨ï¼Œå¤šä¸ªçŠ¶æ€ï¼Œåº”è¯¥æ˜¯ä¿å­˜åœ¨ä¸€ä¸ªä¸“é—¨çš„å…¨å±€å®¹å™¨ä¸­ã€‚è¿™ä¸ªå®¹å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªæœ´å®æ— åçš„ Array å¯¹è±¡ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å€™ï¼Œæ ¹æ® useState é¡ºåºï¼Œé€ä¸ªå£°æ˜ state å¹¶ä¸”å°†å…¶æ”¾å…¥å…¨å±€ Array ä¸­ã€‚æ¯æ¬¡å£°æ˜ stateï¼Œéƒ½è¦å°† cursor å¢åŠ  1ã€‚ æ›´æ–° stateï¼Œè§¦å‘å†æ¬¡æ¸²æŸ“çš„æ—¶å€™ã€‚cursor è¢«é‡ç½®ä¸º 0ã€‚æŒ‰ç…§ useState çš„å£°æ˜é¡ºåºï¼Œä¾æ¬¡æ‹¿å‡ºæœ€æ–°çš„ state çš„å€¼ï¼Œè§†å›¾æ›´æ–°ã€‚ è¯·çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼Œæ¯æ¬¡ä½¿ç”¨ useStateï¼Œéƒ½ä¼šå‘ STATE å®¹å™¨ä¸­æ·»åŠ æ–°çš„çŠ¶æ€ã€‚ å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š import React from \"react\"; import ReactDOM from \"react-dom\"; const states: any[] = []; let cursor: number = 0; function useState(initialState: T): [T, (newState: T) => void] { const currenCursor = cursor; states[currenCursor] = states[currenCursor] || initialState; // æ£€æŸ¥æ˜¯å¦æ¸²æŸ“è¿‡ function setState(newState: T) { states[currenCursor] = newState; render(); } ++cursor; // update: cursor return [states[currenCursor], setState]; } function App() { const [num, setNum] = useState 0; const [num2, setNum2] = useState 1; return ( num: {num} setNum(num + 1)}>åŠ  1 setNum(num - 1)}>å‡ 1 num2: {num2} setNum2(num2 * 2)}>æ‰©å¤§ä¸€å€ setNum2(num2 / 2)}>ç¼©å°ä¸€å€ ); } function render() { ReactDOM.render(, document.getElementById(\"root\")); cursor = 0; // é‡ç½®cursor } render(); // é¦–æ¬¡æ¸²æŸ“ æ­¤æ—¶ï¼Œå¦‚æœæƒ³åœ¨å¾ªç¯ã€åˆ¤æ–­ç­‰ä¸åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨çš„åœ°æ–¹ä½¿ç”¨ Hookï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š let tag = true; function App() { const [num, setNum] = useState 0; // åªæœ‰åˆæ¬¡æ¸²æŸ“ï¼Œæ‰æ‰§è¡Œ if (tag) { const [unusedNum] = useState 1; tag = false; } const [num2, setNum2] = useState 2; return ( num: {num} setNum(num + 1)}>åŠ  1 setNum(num - 1)}>å‡ 1 num2: {num2} setNum2(num2 * 2)}>æ‰©å¤§ä¸€å€ setNum2(num2 / 2)}>ç¼©å°ä¸€å€ ); } ç”±äºåœ¨æ¡ä»¶åˆ¤æ–­çš„é€»è¾‘ä¸­ï¼Œé‡ç½®äº†tag=falseï¼Œå› æ­¤æ­¤åçš„æ¸²æŸ“ä¸ä¼šå†è¿›å…¥æ¡ä»¶åˆ¤æ–­è¯­å¥ã€‚çœ‹èµ·æ¥å¥½åƒæ²¡æœ‰é—®é¢˜ï¼Ÿä½†æ˜¯ï¼Œç”±äº useState æ˜¯åŸºäº Array+Cursor æ¥å®ç°çš„ï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å€™ï¼Œstate å’Œ cursor çš„å¯¹åº”å…³ç³»å¦‚ä¸‹è¡¨ï¼š å˜é‡å cursor num 0 unusedNum 1 num2 2 å½“ç‚¹å‡»äº‹ä»¶è§¦å‘å†æ¬¡æ¸²æŸ“ï¼Œå¹¶ä¸ä¼šè¿›å…¥æ¡ä»¶åˆ¤æ–­ä¸­çš„ useStateã€‚æ‰€ä»¥ï¼Œcursor=2 çš„æ—¶å€™å¯¹åº”çš„å˜é‡æ˜¯ num2ã€‚è€Œå…¶å® num2 å¯¹åº”çš„ cursor åº”è¯¥æ˜¯ 3ã€‚å°±ä¼šå¯¼è‡´setNum2å¹¶ä¸èµ·ä½œç”¨ã€‚ åˆ°æ­¤ï¼Œè§£å†³äº†æ–‡ç« å¼€å¤´æå‡ºçš„ã€ŒğŸ¤”ï¸ ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å¾ªç¯ã€åˆ¤æ–­å†…éƒ¨ä½¿ç”¨ Hookã€ã€‚åœ¨ä½¿ç”¨ Hook çš„æ—¶å€™ï¼Œè¯·åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨ä½¿ç”¨ï¼ useEffect çš„å®ç°åŸç† åœ¨æ¢ç´¢ useEffect åŸç†çš„æ—¶å€™ï¼Œä¸€ç›´è¢«ä¸€ä¸ªé—®é¢˜å›°æ‰°ï¼šuseEffect ä½œç”¨å’Œç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶ï¼Œç”¨äºå‡½æ•°çš„å‰¯ä½œç”¨è¿™å¥è¯è°éƒ½ä¼šè®²ã€‚ä¸¾ä¸ªä¾‹å­å§ï¼š function App() { const [num, setNum] = useState(0); useEffect(() => { // æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚åç«¯æ•°æ® setTimeout(() => { setNum(num + 1); }, 1000); }, []); return {!num ? \"è¯·æ±‚åç«¯æ•°æ®...\" : `åç«¯æ•°æ®æ˜¯ ${num}`}; } å¤åˆ¶ä»£ç  è¿™æ®µä»£ç ï¼Œè™½ç„¶è¿™æ ·ç»„ç»‡å¯è¯»æ€§æ›´é«˜ï¼Œæ¯•ç«Ÿå¯ä»¥å°†è¿™ä¸ªè¯·æ±‚ç†è§£ä¸ºå‡½æ•°çš„å‰¯ä½œç”¨ã€‚ä½†è¿™å¹¶ä¸æ˜¯å¿…è¦çš„ã€‚å®Œå…¨å¯ä»¥ä¸ä½¿ç”¨useEffectï¼Œç›´æ¥ä½¿ç”¨setTimeoutï¼Œå¹¶ä¸”å®ƒçš„å›è°ƒå‡½æ•°ä¸­æ›´æ–°å‡½æ•°ç»„ä»¶çš„ stateã€‚ è¿™æ®µä»£ç ï¼Œè™½ç„¶è¿™æ ·ç»„ç»‡å¯è¯»æ€§æ›´é«˜ï¼Œæ¯•ç«Ÿå¯ä»¥å°†è¿™ä¸ªè¯·æ±‚ç†è§£ä¸ºå‡½æ•°çš„å‰¯ä½œç”¨ã€‚ä½†è¿™å¹¶ä¸æ˜¯å¿…è¦çš„ã€‚å®Œå…¨å¯ä»¥ä¸ä½¿ç”¨useEffectï¼Œç›´æ¥ä½¿ç”¨setTimeoutï¼Œå¹¶ä¸”å®ƒçš„å›è°ƒå‡½æ•°ä¸­æ›´æ–°å‡½æ•°ç»„ä»¶çš„ stateã€‚ åœ¨é˜…è¯»A Complete Guide to useEffectå’Œæ„å»ºä½ è‡ªå·±çš„ Hooksä¹‹åï¼Œæˆ‘æ‰ç†è§£ useEffect çš„å­˜åœ¨çš„å¿…è¦æ€§å’Œæ„ä¹‰ã€‚ åœ¨ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœä¸‹æ¬¡æ¸²æŸ“æ—¶ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ²¡å˜ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè§¦å‘è¿™ä¸ªå‰¯ä½œç”¨ï¼ˆå¯ä»¥ç±»æ¯” Class ç±»çš„å…³äº nextprops å’Œ prevProps çš„ç”Ÿå‘½å‘¨æœŸï¼‰ã€‚å¥½å¤„æ˜¾ç„¶æ˜“è§ï¼Œç›¸æ¯”äºç›´æ¥è£¸å†™åœ¨å‡½æ•°ç»„ä»¶é¡¶å±‚ï¼ŒuseEffect èƒ½æ ¹æ®éœ€è¦ï¼Œé¿å…å¤šä½™çš„ renderã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¸åŒ…æ‹¬é”€æ¯å‰¯ä½œç”¨åŠŸèƒ½çš„ useEffect çš„ TypeScript å®ç°ï¼š // è¿˜æ˜¯åˆ©ç”¨ Array + Cursorçš„æ€è·¯ const allDeps: any[][] = []; let effectCursor: number = 0; function useEffect(callback: () => void, deps: any[]) { if (!allDeps[effectCursor]) { // åˆæ¬¡æ¸²æŸ“ï¼šèµ‹å€¼ + è°ƒç”¨å›è°ƒå‡½æ•° allDeps[effectCursor] = deps; ++effectCursor; callback(); return; } const currenEffectCursor = effectCursor; const rawDeps = allDeps[currenEffectCursor]; // æ£€æµ‹ä¾èµ–é¡¹æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–éœ€è¦é‡æ–°render const isChanged = rawDeps.some( (dep: any, index: number) => dep !== deps[index] ); if (isChanged) { callback(); allDeps[effectCursor] = deps; // æ„Ÿè°¢ juejin@carlzzz çš„æŒ‡æ­£ } ++effectCursor; } function render() { ReactDOM.render(, document.getElementById(\"root\")); effectCursor = 0; // æ³¨æ„å°† effectCursor é‡ç½®ä¸º0 } å¯¹äº useEffect çš„å®ç°ï¼Œé…åˆä¸‹é¢æ¡ˆä¾‹çš„ä½¿ç”¨ä¼šæ›´å®¹æ˜“ç†è§£ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ª useEffect ä¸­å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼Œå¹¶åœ¨æ¥å—æ•°æ®åï¼Œè°ƒç”¨ state çš„æ›´æ–°å‡½æ•°ï¼Œä¸ä¼šå‘ç”Ÿçˆ†æ ˆçš„æƒ…å†µã€‚ function App() { const [num, setNum] = useState 0; const [num2] = useState 1; // å¤šæ¬¡è§¦å‘ // æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œéƒ½ä¼šè§¦å‘ setNum å‡½æ•° // å‰¯ä½œç”¨æ£€æµ‹åˆ° num å˜åŒ–ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å›è°ƒå‡½æ•° useEffect(() => { console.log(\"num update: \", num); }, [num]); // ä»…ç¬¬ä¸€æ¬¡è§¦å‘ // åªä¼šåœ¨compoentDidMountæ—¶ï¼Œè§¦å‘ä¸€æ¬¡ // å‰¯ä½œç”¨å‡½æ•°ä¸ä¼šå¤šæ¬¡æ‰§è¡Œ useEffect(() => { console.log(\"num2 update: \", num2); }, [num2]); return ( num: {num} setNum(num + 1)}>åŠ  1 setNum(num - 1)}>å‡ 1 ); } âš ï¸ useEffect ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªç”¨äºé”€æ¯å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œç›¸å½“äº Class ç»„ä»¶çš„ unmount ç”Ÿå‘½å‘¨æœŸã€‚è¿™é‡Œä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œæ²¡æœ‰è¿›è¡Œå®ç°ã€‚ åœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œå°è¯•è§£ç­”äº† ã€ŒğŸ¤”ï¸ useEffect çš„å®ç°åŸç†ã€å’Œ ã€ŒğŸ¤”ï¸ useEffect çš„åº”ç”¨åœºæ™¯ã€è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ Class VS Hooks è™½ç„¶ Hooks çœ‹èµ·æ¥æ›´é…·ç‚«ï¼Œæ›´ç®€æ´ã€‚ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­æˆ‘æ›´å€¾å‘äºä½¿ç”¨ Class æ¥å£°æ˜ç»„ä»¶ã€‚ä¸¤ç§æ–¹æ³•çš„å¯¹æ¯”å¦‚ä¸‹ï¼š Class Hooks ä»£ç é€»è¾‘æ¸…æ™°ï¼ˆæ„é€ å‡½æ•°ã€componentDidMount ç­‰ï¼‰ éœ€è¦é…åˆå˜é‡åå’Œæ³¨é‡Š ä¸å®¹æ˜“å†…å­˜æ³„æ¼ å®¹æ˜“å‘ç”Ÿå†…å­˜æ³„æ¼ æ€»çš„æ¥è¯´ï¼ŒHooks å¯¹ä»£ç ç¼–å†™çš„è¦æ±‚è¾ƒé«˜ï¼Œåœ¨æ²¡æœ‰æœ‰æ•ˆæœºåˆ¶ä¿è¯ä»£ç å¯è¯»æ€§ã€è§„é¿é£é™©çš„æƒ…å†µä¸‹ï¼ŒClass ä¾ç„¶æ˜¯æˆ‘çš„é¦–é€‰ã€‚å…³äºå†…å­˜æ³„æ¼ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ˆç›®å‰è¿˜æ²¡æ‰¾åˆ°æ–¹æ³•è§„é¿è¿™ç§å‘å…¨å±€ä¼ é€’çŠ¶æ€æ›´æ–°å‡½æ•°çš„åšæ³•ï¼‰ï¼š import React, { useState } from \"react\"; import ReactDOM from \"react-dom\"; let func: any; setInterval(() => { typeof func === \"function\" && func(Date.now()); console.log(\"interval\"); }, 1000); function App() { const [num, setNum] = useState 0; if (typeof func !== \"function\") { func = setNum; } return {num}; } function render() { ReactDOM.render(, document.getElementById(\"root\")); } render(); "},"æŠ€æœ¯ç¬”è®°/reactåˆæˆäº‹ä»¶.html":{"url":"æŠ€æœ¯ç¬”è®°/reactåˆæˆäº‹ä»¶.html","title":"Reactåˆæˆäº‹ä»¶","keywords":"","body":"åˆæˆäº‹ä»¶ï¼šreactä¼šæŠŠjsxä¸Šç»‘å®šçš„äº‹ä»¶å…¨éƒ¨éƒ½ç»‘å®šåˆ°documentä¸Š æ‰€ä»¥å¦‚æœé€šè¿‡ä»£ç ç»‘å®šçš„documentäº‹ä»¶ï¼ˆdocument.addEventListenerï¼‰æ˜¯æ— æ³•é€šè¿‡åˆæˆäº‹ä»¶é˜»æ­¢å†’æ³¡çš„ã€‚ è§£å†³æ–¹æ³•ï¼še.stopPropagation() æ”¹ä¸ºevent.nativeEvent.stopImmediatePropagation() "},"æŠ€æœ¯ç¬”è®°/typescriptå­¦ä¹ .html":{"url":"æŠ€æœ¯ç¬”è®°/typescriptå­¦ä¹ .html","title":"Typescriptå­¦ä¹ ","keywords":"","body":"TypeScript å­¦ä¹ ç¬”è®° [TOC] å‰è¨€ å¦‚ä»Šå¦‚æ­¤å¹¿é˜”çš„åº”ç”¨é¢†åŸŸï¼Œå¯¹JavaScript è¯­è¨€çš„å®‰å…¨æ€§ã€å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§æœ‰æ›´é«˜çš„è¦æ±‚ã€‚å°½ç®¡ECMAScriptæ ‡å‡†åœ¨è¿‘å‡ å¹´æœ‰äº†é•¿è¶³çš„è¿›æ­¥ï¼Œä½†åœ¨ç±»å‹æ£€æŸ¥æ–¹é¢ä¾ç„¶æ— æ‰€å»ºæ ‘ã€‚ä¾‹å¦‚è¿™äº›åœºæ™¯ï¼š è°ƒç”¨åˆ«äººå†™çš„å‡½æ•°ï¼Œæ²¡æœ‰ä»»ä½•æ³¨é‡Šï¼Œä¸ºäº†ææ¸…æ¥šç±»å‹ï¼Œåªèƒ½ç¡¬ç€å¤´çš®çœ‹å‡½æ•°é€»è¾‘ ä¸ºäº†ä¿è¯ä»£ç çš„å¥å£®æ€§ï¼Œå¯¹ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°è¿›è¡Œå„ç§å‡è®¾ï¼ˆç±»å‹åˆ¤æ–­ï¼‰ ç»´æŠ¤åº•å±‚åº“æ—¶ï¼Œä¿®æ”¹å‚æ•°ç±»å‹ï¼Œä½†æ˜¯ä¸çŸ¥é“æœ‰å“ªäº›åœ°æ–¹ä½¿ç”¨ ä»¥ä¸Šæƒ…å†µï¼Œå½’æ ¹ç»“åº•æ˜¯å› ä¸ºJavaScriptæ˜¯ä¸€é—¨åŠ¨æ€å¼±ç±»å‹è¯­è¨€ï¼Œå¯¹å˜é‡çš„ç±»å‹éå¸¸å®½å®¹ï¼Œè€Œä¸”ä¸ä¼šåœ¨è¿™äº›å˜é‡å’Œå®ƒä»¬çš„è°ƒç”¨è€…ä¹‹é—´å»ºç«‹ç»“æ„åŒ–çš„å¥‘çº¦ã€‚å¦‚æœé•¿æœŸåœ¨æ²¡æœ‰ç±»å‹çº¦æŸçš„ç¯å¢ƒä¸‹å¼€å‘ï¼Œå°±ä¼šé€ æˆç±»å‹æ€ç»´çš„ç¼ºå¤±ï¼Œå…»æˆä¸è‰¯çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚ TypeScriptå°±æ˜¯è‡´åŠ›äºä¸ºJavaScriptæä¾›é™æ€ç±»å‹æ£€æŸ¥ã€‚ 1ã€ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ æ ¹æ®å®˜æ–¹çš„å®šä¹‰ï¼Œå®ƒæ˜¯æ‹¥æœ‰ç±»å‹ç³»ç»Ÿçš„JavaScriptçš„è¶…é›†ï¼Œå¯ä»¥ç¼–è¯‘æˆçº¯JavaScriptã€‚ TypeScriptçš„ç‰¹ç‚¹ï¼š TypeScriptä¼šåœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œè¿›è¡Œä¸¥æ ¼çš„é™æ€ç±»å‹æ£€æŸ¥ è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ç¼–ç çš„é˜¶æ®µå‘ç°å¯èƒ½å­˜åœ¨çš„éšæ‚£ï¼Œè€Œä¸å¿…æŠŠå®ƒä»¬å¸¦åˆ°çº¿ä¸Šå» è¯­è¨€æ‰©å±• TSä¼šåŒ…æ‹¬æ¥è‡ªES6å’Œæœªæ¥ææ¡ˆä¸­çš„ç‰¹æ€§ï¼Œæ¯”å¦‚å¼‚æ­¥æ“ä½œå’Œè£…é¥°å™¨ï¼Œä¹Ÿä¼šä»å…¶ä»–è¯­è¨€å€Ÿé‰´æŸäº›ç‰¹æ€§ï¼Œæ¯”å¦‚æ¥å£å’Œ å·¥å…·å±æ€§ TSå¯ä»¥ç¼–è¯‘æˆæ ‡å‡†çš„JavaScriptï¼Œå¯ä»¥åœ¨ä»»ä½•æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ ä½¿ç”¨TypeScript çš„å…¶ä»–å¥½å¤„ æ¥å£å®šä¹‰ä»£æ›¿æ–‡æ¡£ IDEèƒ½å¤Ÿæé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ é‡å¡‘â€œç±»å‹æ€ç»´â€ 2ã€å¼ºç±»å‹ä¸å¼±ç±»å‹ å¼ºç±»å‹è¯­è¨€ åœ¨å¼ºç±»å‹è¯­è¨€ä¸­ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ä»è°ƒç”¨å‡½æ•°ä¼ é€’åˆ°è¢«è°ƒç”¨å‡½æ•°æ—¶ï¼Œå…¶ç±»å‹å¿…é¡»ä¸è¢«è°ƒç”¨å‡½æ•°ä¸­å£°æ˜çš„ç±»å‹å…¼å®¹ã€‚ â€”â€” Liskov, Zilles 1974 é€šä¿—å®šä¹‰ å¼ºç±»å‹è¯­è¨€ä¸å…è®¸æ”¹å˜å˜é‡çš„æ•°æ®ç±»å‹ï¼Œé™¤éè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ å¼±ç±»å‹è¯­è¨€ åœ¨å¼±ç±»å‹è¯­è¨€ä¸­ï¼Œå˜é‡å¯ä»¥è¢«èµ‹äºˆä¸åŒçš„æ•°æ®ç±»å‹ 3ã€é™æ€ç±»å‹è¯­è¨€ä¸åŠ¨æ€ç±»å‹è¯­è¨€ é€šä¿—å®šä¹‰ é™æ€ç±»å‹è¯­è¨€ï¼šåœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šæ‰€æœ‰å˜é‡çš„ç±»å‹ åŠ¨æ€ç±»å‹è¯­è¨€ï¼šåœ¨æ‰§è¡Œé˜¶æ®µç¡®å®šæ‰€æœ‰å˜é‡çš„ç±»å‹ JavaScriptä¸C++å¯¹æ¯” é™æ€ç±»å‹ä¸åŠ¨æ€ç±»å‹å¯¹æ¯” 4ã€åŸºæœ¬ç±»å‹ ç±»å‹æ³¨è§£ ä½œç”¨ï¼šç›¸å½“äºå¼ºç±»å‹è¯­è¨€ä¸­çš„ç±»å‹å£°æ˜ è¯­æ³•ï¼š(å˜é‡/å‡½æ•°):type æšä¸¾ç±»å‹ ä¸€ä¸ªè§’è‰²åˆ¤æ–­çš„ä¾‹å­ æšä¸¾çš„å®šä¹‰ï¼šä¸€ç»„æœ‰åå­—çš„å¸¸é‡é›†åˆ "},"æŠ€æœ¯ç¬”è®°/vueæ•°æ®ç»‘å®šé—®é¢˜.html":{"url":"æŠ€æœ¯ç¬”è®°/vueæ•°æ®ç»‘å®šé—®é¢˜.html","title":"Vueæ•°æ®ç»‘å®šé—®é¢˜","keywords":"","body":"é—®é¢˜åŸå› ï¼š æ•°æ®ç»‘å®šä¸ºå¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„å±æ€§å¯æ–°å¢ã€‚ç”±äºVueåªä¼šåœ¨åˆå§‹åŒ–é¡µé¢æ—¶ä¼šä½¿ç”¨Object.defineProperty()åŠ«æŒå„ä¸ªå±æ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚ä½†æ˜¯å¯¹è±¡æ–°å¢çš„å±æ€§å¹¶æ²¡æœ‰é‡å†™setterã€getteræ–¹æ³•ï¼Œå¯¼è‡´åŒå‘ç»‘å®šæ— æ•ˆã€‚ è§£å†³æ–¹æ¡ˆï¼š ç»™æ‰€ç»‘å®šçš„å¯¹è±¡æ–°å¢å±æ€§æ—¶ï¼Œä¸è¦ç›´æ¥å®šä¹‰å±æ€§ï¼Œè¦ç”¨Vue.$setæ–¹æ³•æ–°å¢å±æ€§ã€‚ å‚è€ƒï¼š Vue.$setä»‹ç» å‰–æVueåŸç†&å®ç°åŒå‘ç»‘å®šMVVM - å‰ç«¯è¶³è¿¹ - SegmentFault "},"æŠ€æœ¯ç¬”è®°/webpack.html":{"url":"æŠ€æœ¯ç¬”è®°/webpack.html","title":"Webpack","keywords":"","body":"Webpack [TOC] 1. optimization.runtimeChunk runtimeChunkï¼Œç›´è§‚ç¿»è¯‘æ˜¯è¿è¡Œæ—¶çš„chunkæ–‡ä»¶ï¼Œä½œç”¨æ˜¯æŠŠchunksï¼ˆä¸€äº›å¼‚æ­¥ç»„ä»¶ç­‰éœ€å¼‚æ­¥åŠ è½½çš„jsï¼‰çš„æ˜ å°„å…³ç³»ä»app.jsï¼ˆæ€»å…¥å£ï¼‰å•ç‹¬æå–å‡ºæ¥ã€‚è¯•æƒ³ä¸€ä¸‹ä¸æŠŠè¿™éƒ¨åˆ†ä»£ç æå–å‡ºæ¥ï¼Œæ¯æ¬¡ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶ï¼Œapp.jsçš„hashå€¼éƒ½ä¼šæ”¹å˜ï¼Œç”¨æˆ·éƒ½éœ€è¦é‡æ–°ä¸‹è½½ï¼Œå…¶å®åªæœ‰chunksçš„æ˜ å°„å…³ç³»æ”¹å˜è€Œå·²ã€‚æ‰€ä»¥runtimeChunkå°±æ˜¯ç”¨æ¥ä¼˜åŒ–æµè§ˆå™¨ç¼“å­˜çš„ï¼Œè®©ç”¨æˆ·ä¸‹è½½æœ€å°‘çš„ä»£ç å°±èƒ½äº«å—åˆ°æ›´æ–°ã€‚ ä½•ä¸ºè¿è¡Œæ—¶ä»£ç ï¼Ÿ "},"æŠ€æœ¯ç¬”è®°/äº‹ä»¶æ¨¡å‹.html":{"url":"æŠ€æœ¯ç¬”è®°/äº‹ä»¶æ¨¡å‹.html","title":"äº‹ä»¶æ¨¡å‹","keywords":"","body":"äº‹ä»¶æ¨¡å‹ [TOC] äº‹ä»¶çš„æœ¬è´¨æ˜¯ç¨‹åºå„ä¸ªç»„æˆéƒ¨åˆ†ä¹‹é—´çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œä¹Ÿæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§å®ç°ã€‚DOM æ”¯æŒå¤§é‡çš„äº‹ä»¶ï¼Œæœ¬ç« ä»‹ç» DOM çš„äº‹ä»¶ç¼–ç¨‹ã€‚ 1. EventTarget æ¥å£ DOM çš„äº‹ä»¶æ“ä½œï¼ˆç›‘å¬å’Œè§¦å‘ï¼‰ï¼Œéƒ½å®šä¹‰åœ¨EventTargetæ¥å£ã€‚æ‰€æœ‰èŠ‚ç‚¹å¯¹è±¡éƒ½éƒ¨ç½²äº†è¿™ä¸ªæ¥å£ï¼Œå…¶ä»–ä¸€äº›éœ€è¦äº‹ä»¶é€šä¿¡çš„æµè§ˆå™¨å†…ç½®å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼ŒXMLHttpRequestã€AudioNodeã€AudioContextï¼‰ä¹Ÿéƒ¨ç½²äº†è¿™ä¸ªæ¥å£ã€‚ è¯¥æ¥å£ä¸»è¦æä¾›ä¸‰ä¸ªå®ä¾‹æ–¹æ³•ã€‚ addEventListenerï¼šç»‘å®šäº‹ä»¶çš„ç›‘å¬å‡½æ•° removeEventListenerï¼šç§»é™¤äº‹ä»¶çš„ç›‘å¬å‡½æ•° dispatchEventï¼šè§¦å‘äº‹ä»¶ 1.1 EventTarget.addEventListener() EventTarget.addEventListener()ç”¨äºåœ¨å½“å‰èŠ‚ç‚¹æˆ–å¯¹è±¡ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªç‰¹å®šäº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ä¸€æ—¦è¿™ä¸ªäº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œç›‘å¬å‡½æ•°ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚ è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ã€‚ typeï¼šäº‹ä»¶åç§°ï¼Œå¤§å°å†™æ•æ„Ÿã€‚ listenerï¼šç›‘å¬å‡½æ•°ã€‚äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šè°ƒç”¨è¯¥ç›‘å¬å‡½æ•°ã€‚ useCaptureï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°æ˜¯å¦åœ¨æ•è·é˜¶æ®µï¼ˆcaptureï¼‰è§¦å‘ï¼ˆå‚è§åæ–‡ã€Šäº‹ä»¶çš„ä¼ æ’­ã€‹éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤ä¸ºfalseï¼ˆç›‘å¬å‡½æ•°åªåœ¨å†’æ³¡é˜¶æ®µè¢«è§¦å‘ï¼‰ã€‚è¯¥å‚æ•°å¯é€‰ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ function hello() { console.log('Hello world'); } var button = document.getElementById('btn'); button.addEventListener('click', hello, false); ä¸Šé¢ä»£ç ä¸­ï¼ŒbuttonèŠ‚ç‚¹çš„addEventListeneræ–¹æ³•ç»‘å®šclickäº‹ä»¶çš„ç›‘å¬å‡½æ•°helloï¼Œè¯¥å‡½æ•°åªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚ å…³äºå‚æ•°ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ã€‚ é¦–å…ˆï¼Œç¬¬äºŒä¸ªå‚æ•°é™¤äº†ç›‘å¬å‡½æ•°ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå…·æœ‰handleEventæ–¹æ³•çš„å¯¹è±¡ã€‚ buttonElement.addEventListener('click', { handleEvent: function (event) { console.log('click'); } }); ä¸Šé¢ä»£ç ä¸­ï¼ŒaddEventListeneræ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªå…·æœ‰handleEventæ–¹æ³•çš„å¯¹è±¡ã€‚ å…¶æ¬¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°é™¤äº†å¸ƒå°”å€¼useCaptureï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ‰ä»¥ä¸‹å±æ€§ã€‚ captureï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦åœ¨æ•è·é˜¶æ®µè§¦å‘ç›‘å¬å‡½æ•°ã€‚ onceï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°æ˜¯å¦åªè§¦å‘ä¸€æ¬¡ï¼Œç„¶åå°±è‡ªåŠ¨ç§»é™¤ã€‚ passiveï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°ä¸ä¼šè°ƒç”¨äº‹ä»¶çš„preventDefaultæ–¹æ³•ã€‚å¦‚æœç›‘å¬å‡½æ•°è°ƒç”¨äº†ï¼Œæµè§ˆå™¨å°†å¿½ç•¥è¿™ä¸ªè¦æ±‚ï¼Œå¹¶åœ¨ç›‘æ§å°è¾“å‡ºä¸€è¡Œè­¦å‘Šã€‚ addEventListeneræ–¹æ³•å¯ä»¥ä¸ºé’ˆå¯¹å½“å‰å¯¹è±¡çš„åŒä¸€ä¸ªäº‹ä»¶ï¼Œæ·»åŠ å¤šä¸ªä¸åŒçš„ç›‘å¬å‡½æ•°ã€‚è¿™äº›å‡½æ•°æŒ‰ç…§æ·»åŠ é¡ºåºè§¦å‘ï¼Œå³å…ˆæ·»åŠ å…ˆè§¦å‘ã€‚å¦‚æœä¸ºåŒä¸€ä¸ªäº‹ä»¶å¤šæ¬¡æ·»åŠ åŒä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œè¯¥å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¤šä½™çš„æ·»åŠ å°†è‡ªåŠ¨è¢«å»é™¤ï¼ˆä¸å¿…ä½¿ç”¨removeEventListeneræ–¹æ³•æ‰‹åŠ¨å»é™¤ï¼‰ã€‚ function hello() { console.log('Hello world'); } document.addEventListener('click', hello, false); document.addEventListener('click', hello, false); æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»æ–‡æ¡£åªä¼šè¾“å‡ºä¸€è¡ŒHello worldã€‚ å¦‚æœå¸Œæœ›å‘ç›‘å¬å‡½æ•°ä¼ é€’å‚æ•°ï¼Œå¯ä»¥ç”¨åŒ¿åå‡½æ•°åŒ…è£…ä¸€ä¸‹ç›‘å¬å‡½æ•°ã€‚ function print(x) { console.log(x); } var el = document.getElementById('div1'); el.addEventListener('click', function () { print('Hello'); }, false); ä¸Šé¢ä»£ç é€šè¿‡åŒ¿åå‡½æ•°ï¼Œå‘ç›‘å¬å‡½æ•°printä¼ é€’äº†ä¸€ä¸ªå‚æ•°ã€‚ ç›‘å¬å‡½æ•°å†…éƒ¨çš„thisï¼ŒæŒ‡å‘å½“å‰äº‹ä»¶æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ã€‚ // HTML ä»£ç å¦‚ä¸‹ // Hello var para = document.getElementById('para'); para.addEventListener('click', function (e) { console.log(this.nodeName); // \"P\" }, false); ä¸Šé¢ä»£ç ä¸­ï¼Œç›‘å¬å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘äº‹ä»¶æ‰€åœ¨çš„å¯¹è±¡paraã€‚ 1.2 EventTarget.removeEventListener() EventTarget.removeEventListeneræ–¹æ³•ç”¨æ¥ç§»é™¤addEventListeneræ–¹æ³•æ·»åŠ çš„äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚ removeEventListeneræ–¹æ³•çš„å‚æ•°ï¼Œä¸addEventListeneræ–¹æ³•å®Œå…¨ä¸€è‡´ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°â€œäº‹ä»¶ç±»å‹â€ï¼Œå¤§å°å†™æ•æ„Ÿã€‚ æ³¨æ„ï¼ŒremoveEventListeneræ–¹æ³•ç§»é™¤çš„ç›‘å¬å‡½æ•°ï¼Œå¿…é¡»æ˜¯addEventListeneræ–¹æ³•æ·»åŠ çš„é‚£ä¸ªç›‘å¬å‡½æ•°ï¼Œè€Œä¸”å¿…é¡»åœ¨åŒä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¦åˆ™æ— æ•ˆã€‚ div.addEventListener('click', function (e) {}, false); div.removeEventListener('click', function (e) {}, false); ä¸Šé¢ä»£ç ä¸­ï¼ŒremoveEventListeneræ–¹æ³•æ— æ•ˆï¼Œå› ä¸ºç›‘å¬å‡½æ•°ä¸æ˜¯åŒä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ element.addEventListener('mousedown', handleMouseDown, true); element.removeEventListener(\"mousedown\", handleMouseDown, false); ä¸Šé¢ä»£ç ä¸­ï¼ŒremoveEventListeneræ–¹æ³•ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¸ä¸€æ ·ã€‚ 1.3 EventTarget.dispatchEvent() EventTarget.dispatchEventæ–¹æ³•åœ¨å½“å‰èŠ‚ç‚¹ä¸Šè§¦å‘æŒ‡å®šäº‹ä»¶ï¼Œä»è€Œè§¦å‘ç›‘å¬å‡½æ•°çš„æ‰§è¡Œã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåªè¦æœ‰ä¸€ä¸ªç›‘å¬å‡½æ•°è°ƒç”¨äº†Event.preventDefault()ï¼Œåˆ™è¿”å›å€¼ä¸ºfalseï¼Œå¦åˆ™ä¸ºtrueã€‚ target.dispatchEvent(event) dispatchEventæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªEventå¯¹è±¡çš„å®ä¾‹ï¼ˆè¯¦è§ã€ŠEvent å¯¹è±¡ã€‹ç« èŠ‚ï¼‰ã€‚ para.addEventListener('click', hello, false); var event = new Event('click'); para.dispatchEvent(event); ä¸Šé¢ä»£ç åœ¨å½“å‰èŠ‚ç‚¹è§¦å‘äº†clickäº‹ä»¶ã€‚ å¦‚æœdispatchEventæ–¹æ³•çš„å‚æ•°ä¸ºç©ºï¼Œæˆ–è€…ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äº‹ä»¶å¯¹è±¡ï¼Œå°†æŠ¥é”™ã€‚ ä¸‹é¢ä»£ç æ ¹æ®dispatchEventæ–¹æ³•çš„è¿”å›å€¼ï¼Œåˆ¤æ–­äº‹ä»¶æ˜¯å¦è¢«å–æ¶ˆäº†ã€‚ var canceled = !cb.dispatchEvent(event); if (canceled) { console.log('äº‹ä»¶å–æ¶ˆ'); } else { console.log('äº‹ä»¶æœªå–æ¶ˆ'); } 2. ç›‘å¬å‡½æ•° æµè§ˆå™¨çš„äº‹ä»¶æ¨¡å‹ï¼Œå°±æ˜¯é€šè¿‡ç›‘å¬å‡½æ•°ï¼ˆlistenerï¼‰å¯¹äº‹ä»¶åšå‡ºååº”ã€‚äº‹ä»¶å‘ç”Ÿåï¼Œæµè§ˆå™¨ç›‘å¬åˆ°äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„ç›‘å¬å‡½æ•°ã€‚è¿™æ˜¯äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å¼ï¼ˆevent-drivenï¼‰çš„ä¸»è¦ç¼–ç¨‹æ–¹å¼ã€‚ JavaScript æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå¯ä»¥ä¸ºäº‹ä»¶ç»‘å®šç›‘å¬å‡½æ•°ã€‚ 2.1 HTML çš„ on- å±æ€§ HTML è¯­è¨€å…è®¸åœ¨å…ƒç´ çš„å±æ€§ä¸­ï¼Œç›´æ¥å®šä¹‰æŸäº›äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚ ä¸Šé¢ä»£ç ä¸ºbodyèŠ‚ç‚¹çš„loadäº‹ä»¶ã€divèŠ‚ç‚¹çš„clickäº‹ä»¶ï¼ŒæŒ‡å®šäº†ç›‘å¬ä»£ç ã€‚ä¸€æ—¦äº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚ å…ƒç´ çš„äº‹ä»¶ç›‘å¬å±æ€§ï¼Œéƒ½æ˜¯onåŠ ä¸Šäº‹ä»¶åï¼Œæ¯”å¦‚onloadå°±æ˜¯on + loadï¼Œè¡¨ç¤ºloadäº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚ æ³¨æ„ï¼Œè¿™äº›å±æ€§çš„å€¼æ˜¯å°†ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä¸€æ—¦æŒ‡å®šçš„äº‹ä»¶å‘ç”Ÿï¼Œon-å±æ€§çš„å€¼æ˜¯åŸæ ·ä¼ å…¥ JavaScript å¼•æ“æ‰§è¡Œã€‚å› æ­¤å¦‚æœè¦æ‰§è¡Œå‡½æ•°ï¼Œä¸è¦å¿˜è®°åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚ ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬ä»£ç ï¼Œåªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚ ä¸€æ—¦æŒ‡å®šçš„äº‹ä»¶å‘ç”Ÿï¼Œon-å±æ€§çš„å€¼æ˜¯åŸæ ·ä¼ å…¥ JavaScript å¼•æ“æ‰§è¡Œã€‚å› æ­¤å¦‚æœè¦æ‰§è¡Œå‡½æ•°ï¼Œä¸è¦å¿˜è®°åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚ ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬ä»£ç ï¼Œåªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚ ç‚¹å‡» ä¸Šé¢ä»£ç ä¸­ï¼Œæ˜¯çš„å­å…ƒç´ ã€‚çš„clickäº‹ä»¶ï¼Œä¹Ÿä¼šè§¦å‘çš„clickäº‹ä»¶ã€‚ç”±äºon-å±æ€§çš„ç›‘å¬ä»£ç ï¼Œåªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼Œæ‰€ä»¥ç‚¹å‡»ç»“æœæ˜¯å…ˆè¾“å‡º1ï¼Œå†è¾“å‡º2ï¼Œå³äº‹ä»¶ä»å­å…ƒç´ å¼€å§‹å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚ ç›´æ¥è®¾ç½®on-å±æ€§ï¼Œä¸é€šè¿‡å…ƒç´ èŠ‚ç‚¹çš„setAttributeæ–¹æ³•è®¾ç½®on-å±æ€§ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ el.setAttribute('onclick', 'doSomething()'); // ç­‰åŒäº // 2.2 å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§ å…ƒç´ èŠ‚ç‚¹å¯¹è±¡çš„äº‹ä»¶å±æ€§ï¼ŒåŒæ ·å¯ä»¥æŒ‡å®šç›‘å¬å‡½æ•°ã€‚ window.onload = doSomething; div.onclick = function (event) { console.log('è§¦å‘äº‹ä»¶'); }; ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬å‡½æ•°ï¼Œä¹Ÿæ˜¯åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚ æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä¸ HTML çš„on-å±æ€§çš„å·®å¼‚æ˜¯ï¼Œå®ƒçš„å€¼æ˜¯å‡½æ•°åï¼ˆdoSomethingï¼‰ï¼Œè€Œä¸åƒåè€…ï¼Œå¿…é¡»ç»™å‡ºå®Œæ•´çš„ç›‘å¬ä»£ç ï¼ˆdoSomething()ï¼‰ã€‚ 2.3 EventTarget.addEventListener() æ‰€æœ‰ DOM èŠ‚ç‚¹å®ä¾‹éƒ½æœ‰addEventListeneræ–¹æ³•ï¼Œç”¨æ¥ä¸ºè¯¥èŠ‚ç‚¹å®šä¹‰äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ window.addEventListener('load', doSomething, false); addEventListeneræ–¹æ³•çš„è¯¦ç»†ä»‹ç»ï¼Œå‚è§EventTargetç« èŠ‚ã€‚ 2.4 å°ç»“ ä¸Šé¢ä¸‰ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§â€œHTML çš„ on- å±æ€§â€ï¼Œè¿åäº† HTML ä¸ JavaScript ä»£ç ç›¸åˆ†ç¦»çš„åŸåˆ™ï¼Œå°†ä¸¤è€…å†™åœ¨ä¸€èµ·ï¼Œä¸åˆ©äºä»£ç åˆ†å·¥ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨ã€‚ ç¬¬äºŒç§â€œå…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§â€çš„ç¼ºç‚¹åœ¨äºï¼ŒåŒä¸€ä¸ªäº‹ä»¶åªèƒ½å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®šä¹‰ä¸¤æ¬¡onclickå±æ€§ï¼Œåä¸€æ¬¡å®šä¹‰ä¼šè¦†ç›–å‰ä¸€æ¬¡ã€‚å› æ­¤ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨ã€‚ ç¬¬ä¸‰ç§EventTarget.addEventListeneræ˜¯æ¨èçš„æŒ‡å®šç›‘å¬å‡½æ•°çš„æ–¹æ³•ã€‚å®ƒæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š åŒä¸€ä¸ªäº‹ä»¶å¯ä»¥æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°ã€‚ èƒ½å¤ŸæŒ‡å®šåœ¨å“ªä¸ªé˜¶æ®µï¼ˆæ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µï¼‰è§¦å‘ç›‘å¬å‡½æ•°ã€‚ é™¤äº† DOM èŠ‚ç‚¹ï¼Œå…¶ä»–å¯¹è±¡ï¼ˆæ¯”å¦‚windowã€XMLHttpRequestç­‰ï¼‰ä¹Ÿæœ‰è¿™ä¸ªæ¥å£ï¼Œå®ƒç­‰äºæ˜¯æ•´ä¸ª JavaScript ç»Ÿä¸€çš„ç›‘å¬å‡½æ•°æ¥å£ã€‚ 3. this çš„æŒ‡å‘ ç›‘å¬å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘è§¦å‘äº‹ä»¶çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚ ç‚¹å‡» æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»åä¼šè¾“å‡ºbtnã€‚ å…¶ä»–ä¸¤ç§ç›‘å¬å‡½æ•°çš„å†™æ³•ï¼Œthisçš„æŒ‡å‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ // HTML ä»£ç å¦‚ä¸‹ // ç‚¹å‡» var btn = document.getElementById('btn'); // å†™æ³•ä¸€ btn.onclick = function () { console.log(this.id); }; // å†™æ³•äºŒ btn.addEventListener( 'click', function (e) { console.log(this.id); }, false ); ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åä¹Ÿæ˜¯è¾“å‡ºbtnã€‚ 4. äº‹ä»¶çš„ä¼ æ’­ ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä¼šåœ¨å­å…ƒç´ å’Œçˆ¶å…ƒç´ ä¹‹é—´ä¼ æ’­ï¼ˆpropagationï¼‰ã€‚è¿™ç§ä¼ æ’­åˆ†æˆä¸‰ä¸ªé˜¶æ®µã€‚ ç¬¬ä¸€é˜¶æ®µï¼šä»windowå¯¹è±¡ä¼ å¯¼åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ˆä¸Šå±‚ä¼ åˆ°åº•å±‚ï¼‰ï¼Œç§°ä¸ºâ€œæ•è·é˜¶æ®µâ€ï¼ˆcapture phaseï¼‰ã€‚ ç¬¬äºŒé˜¶æ®µï¼šåœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œç§°ä¸ºâ€œç›®æ ‡é˜¶æ®µâ€ï¼ˆtarget phaseï¼‰ã€‚ ç¬¬ä¸‰é˜¶æ®µï¼šä»ç›®æ ‡èŠ‚ç‚¹ä¼ å¯¼å›windowå¯¹è±¡ï¼ˆä»åº•å±‚ä¼ å›ä¸Šå±‚ï¼‰ï¼Œç§°ä¸ºâ€œå†’æ³¡é˜¶æ®µâ€ï¼ˆbubbling phaseï¼‰ã€‚ è¿™ç§ä¸‰é˜¶æ®µçš„ä¼ æ’­æ¨¡å‹ï¼Œä½¿å¾—åŒä¸€ä¸ªäº‹ä»¶ä¼šåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè§¦å‘ã€‚ ç‚¹å‡» ä¸Šé¢ä»£ç ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹ä¸­æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœå¯¹è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œéƒ½è®¾ç½®clickäº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œç›‘å¬é˜¶æ®µï¼Œå„è®¾ç½®ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå…±è®¡è®¾ç½®å››ä¸ªç›‘å¬å‡½æ•°ã€‚ç„¶åï¼Œå¯¹ç‚¹å‡»ï¼Œclickäº‹ä»¶ä¼šè§¦å‘å››æ¬¡ã€‚ ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œclickäº‹ä»¶è¢«è§¦å‘äº†å››æ¬¡ï¼šèŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µå„1æ¬¡ï¼ŒèŠ‚ç‚¹çš„ç›®æ ‡é˜¶æ®µè§¦å‘äº†2æ¬¡ã€‚ æ•è·é˜¶æ®µï¼šäº‹ä»¶ä»å‘ä¼ æ’­æ—¶ï¼Œè§¦å‘çš„clickäº‹ä»¶ï¼› ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶ä»åˆ°è¾¾æ—¶ï¼Œè§¦å‘çš„clickäº‹ä»¶ï¼› å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»ä¼ å›æ—¶ï¼Œå†æ¬¡è§¦å‘çš„clickäº‹ä»¶ã€‚ å…¶ä¸­ï¼ŒèŠ‚ç‚¹æœ‰ä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼ˆaddEventListeneræ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´ç»‘å®šä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå› æ­¤å®ƒä»¬éƒ½ä¼šå› ä¸ºclickäº‹ä»¶è§¦å‘ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä¼šåœ¨targeté˜¶æ®µæœ‰ä¸¤æ¬¡è¾“å‡ºã€‚ æ³¨æ„ï¼Œæµè§ˆå™¨æ€»æ˜¯å‡å®šclickäº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œå°±æ˜¯ç‚¹å‡»ä½ç½®åµŒå¥—æœ€æ·±çš„é‚£ä¸ªèŠ‚ç‚¹ï¼ˆæœ¬ä¾‹æ˜¯èŠ‚ç‚¹é‡Œé¢çš„èŠ‚ç‚¹ï¼‰ã€‚æ‰€ä»¥ï¼ŒèŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œéƒ½ä¼šæ˜¾ç¤ºä¸ºtargeté˜¶æ®µã€‚ äº‹ä»¶ä¼ æ’­çš„æœ€ä¸Šå±‚å¯¹è±¡æ˜¯windowï¼Œæ¥ç€ä¾æ¬¡æ˜¯documentï¼Œhtmlï¼ˆdocument.documentElementï¼‰å’Œbodyï¼ˆdocument.bodyï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šä¾‹çš„äº‹ä»¶ä¼ æ’­é¡ºåºï¼Œåœ¨æ•è·é˜¶æ®µä¾æ¬¡ä¸ºwindowã€documentã€htmlã€bodyã€divã€pï¼Œåœ¨å†’æ³¡é˜¶æ®µä¾æ¬¡ä¸ºpã€divã€bodyã€htmlã€documentã€windowã€‚ 5. äº‹ä»¶çš„ä»£ç† ç”±äºäº‹ä»¶ä¼šåœ¨å†’æ³¡é˜¶æ®µå‘ä¸Šä¼ æ’­åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥æŠŠå­èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨çˆ¶èŠ‚ç‚¹ä¸Šï¼Œç”±çˆ¶èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°ç»Ÿä¸€å¤„ç†å¤šä¸ªå­å…ƒç´ çš„äº‹ä»¶ã€‚è¿™ç§æ–¹æ³•å«åšäº‹ä»¶çš„ä»£ç†ï¼ˆdelegationï¼‰ã€‚ var ul = document.querySelector('ul'); ul.addEventListener('click', function (event) { if (event.target.tagName.toLowerCase() === 'li') { // some code } }); ä¸Šé¢ä»£ç ä¸­ï¼Œclickäº‹ä»¶çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨èŠ‚ç‚¹ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¤„ç†çš„æ˜¯å­èŠ‚ç‚¹çš„clickäº‹ä»¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œå°±èƒ½å¤„ç†å¤šä¸ªå­èŠ‚ç‚¹çš„äº‹ä»¶ï¼Œè€Œä¸ç”¨åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå®šä¹‰ç›‘å¬å‡½æ•°ã€‚è€Œä¸”ä»¥åå†æ·»åŠ å­èŠ‚ç‚¹ï¼Œç›‘å¬å‡½æ•°ä¾ç„¶æœ‰æ•ˆã€‚ å¦‚æœå¸Œæœ›äº‹ä»¶åˆ°æŸä¸ªèŠ‚ç‚¹ä¸ºæ­¢ï¼Œä¸å†ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡çš„stopPropagationæ–¹æ³•ã€‚ // äº‹ä»¶ä¼ æ’­åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸‹ä¼ æ’­äº† p.addEventListener('click', function (event) { event.stopPropagation(); }, true); // äº‹ä»¶å†’æ³¡åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸Šå†’æ³¡äº† p.addEventListener('click', function (event) { event.stopPropagation(); }, false); ä¸Šé¢ä»£ç ä¸­ï¼ŒstopPropagationæ–¹æ³•åˆ†åˆ«åœ¨æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œé˜»æ­¢äº†äº‹ä»¶çš„ä¼ æ’­ã€‚ ä½†æ˜¯ï¼ŒstopPropagationæ–¹æ³•åªä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œä¸ä¼šé˜»æ­¢è¯¥äº‹ä»¶è§¦å‘èŠ‚ç‚¹çš„å…¶ä»–clickäº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯å½»åº•å–æ¶ˆclickäº‹ä»¶ã€‚ p.addEventListener('click', function (event) { event.stopPropagation(); console.log(1); }); p.addEventListener('click', function(event) { // ä¼šè§¦å‘ console.log(2); }); ä¸Šé¢ä»£ç ä¸­ï¼Œpå…ƒç´ ç»‘å®šäº†ä¸¤ä¸ªclickäº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚stopPropagationæ–¹æ³•åªèƒ½é˜»æ­¢è¿™ä¸ªäº‹ä»¶å‘å…¶ä»–å…ƒç´ ä¼ æ’­ã€‚å› æ­¤ï¼Œç¬¬äºŒä¸ªç›‘å¬å‡½æ•°ä¼šè§¦å‘ã€‚è¾“å‡ºç»“æœä¼šå…ˆæ˜¯1ï¼Œç„¶åæ˜¯2ã€‚ å¦‚æœæƒ³è¦å½»åº•é˜»æ­¢è¿™ä¸ªäº‹ä»¶çš„ä¼ æ’­ï¼Œä¸å†è§¦å‘åé¢æ‰€æœ‰clickçš„ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨stopImmediatePropagationæ–¹æ³•ã€‚ p.addEventListener('click', function (event) { event.stopImmediatePropagation(); console.log(1); }); p.addEventListener('click', function(event) { // ä¸ä¼šè¢«è§¦å‘ console.log(2); }); ä¸Šé¢ä»£ç ä¸­ï¼ŒstopImmediatePropagationæ–¹æ³•å¯ä»¥å½»åº•é˜»æ­¢è¿™ä¸ªäº‹ä»¶ä¼ æ’­ï¼Œä½¿å¾—åé¢ç»‘å®šçš„æ‰€æœ‰clickç›‘å¬å‡½æ•°éƒ½ä¸å†è§¦å‘ã€‚æ‰€ä»¥ï¼Œåªä¼šè¾“å‡º1ï¼Œä¸ä¼šè¾“å‡º2ã€‚ 6. Event å¯¹è±¡æ¦‚è¿° äº‹ä»¶å‘ç”Ÿä»¥åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ä¼ ç»™ç›‘å¬å‡½æ•°ã€‚æµè§ˆå™¨åŸç”Ÿæä¾›ä¸€ä¸ªEventå¯¹è±¡ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œæˆ–è€…è¯´ç»§æ‰¿äº†Event.prototypeå¯¹è±¡ã€‚ Eventå¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚ event = new Event(type, options); Eventæ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°typeæ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„åç§°ï¼›ç¬¬äºŒä¸ªå‚æ•°optionsæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºäº‹ä»¶å¯¹è±¡çš„é…ç½®ã€‚è¯¥å¯¹è±¡ä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªå±æ€§ã€‚ bubblesï¼šå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºäº‹ä»¶å¯¹è±¡æ˜¯å¦å†’æ³¡ã€‚ cancelableï¼šå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥è¢«å–æ¶ˆï¼Œå³èƒ½å¦ç”¨Event.preventDefault()å–æ¶ˆè¿™ä¸ªäº‹ä»¶ã€‚ä¸€æ—¦äº‹ä»¶è¢«å–æ¶ˆï¼Œå°±å¥½åƒä»æ¥æ²¡æœ‰å‘ç”Ÿè¿‡ï¼Œä¸ä¼šè§¦å‘æµè§ˆå™¨å¯¹è¯¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚ ä¸Šé¢ä»£ç æ–°å»ºä¸€ä¸ªlookäº‹ä»¶å®ä¾‹ï¼Œç„¶åä½¿ç”¨dispatchEventæ–¹æ³•è§¦å‘è¯¥äº‹ä»¶ã€‚ æ³¨æ„ï¼Œå¦‚æœä¸æ˜¯æ˜¾å¼æŒ‡å®šbubbleså±æ€§ä¸ºtrueï¼Œç”Ÿæˆçš„äº‹ä»¶å°±åªèƒ½åœ¨â€œæ•è·é˜¶æ®µâ€è§¦å‘ç›‘å¬å‡½æ•°ã€‚ // HTML ä»£ç ä¸º // Hello var div = document.querySelector('div'); var p = document.querySelector('p'); function callback(event) { var tag = event.currentTarget.tagName; console.log('Tag: ' + tag); // æ²¡æœ‰ä»»ä½•è¾“å‡º } div.addEventListener('click', callback, false); var click = new Event('click'); p.dispatchEvent(click); ä¸Šé¢ä»£ç ä¸­ï¼Œpå…ƒç´ å‘å‡ºä¸€ä¸ªclickäº‹ä»¶ï¼Œè¯¥äº‹ä»¶é»˜è®¤ä¸ä¼šå†’æ³¡ã€‚div.addEventListeneræ–¹æ³•æŒ‡å®šåœ¨å†’æ³¡é˜¶æ®µç›‘å¬ï¼Œå› æ­¤ç›‘å¬å‡½æ•°ä¸ä¼šè§¦å‘ã€‚å¦‚æœå†™æˆdiv.addEventListener('click', callback, true)ï¼Œé‚£ä¹ˆåœ¨â€œæ•è·é˜¶æ®µâ€å¯ä»¥ç›‘å¬åˆ°è¿™ä¸ªäº‹ä»¶ã€‚ å¦ä¸€æ–¹é¢ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶åœ¨divå…ƒç´ ä¸Šè§¦å‘ã€‚ div.dispatchEvent(click); é‚£ä¹ˆï¼Œä¸ç®¡divå…ƒç´ æ˜¯åœ¨å†’æ³¡é˜¶æ®µç›‘å¬ï¼Œè¿˜æ˜¯åœ¨æ•è·é˜¶æ®µç›‘å¬ï¼Œéƒ½ä¼šè§¦å‘ç›‘å¬å‡½æ•°ã€‚å› ä¸ºè¿™æ—¶divå…ƒç´ æ˜¯äº‹ä»¶çš„ç›®æ ‡ï¼Œä¸å­˜åœ¨æ˜¯å¦å†’æ³¡çš„é—®é¢˜ï¼Œdivå…ƒç´ æ€»æ˜¯ä¼šæ¥æ”¶åˆ°äº‹ä»¶ï¼Œå› æ­¤å¯¼è‡´ç›‘å¬å‡½æ•°ç”Ÿæ•ˆã€‚ 7. Event å¯¹è±¡çš„å®ä¾‹å±æ€§ 7.1 Event.bubblesï¼ŒEvent.eventPhase Event.bubbleså±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰äº‹ä»¶æ˜¯å¦ä¼šå†’æ³¡ã€‚è¯¥å±æ€§ä¸ºåªè¯»å±æ€§ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£ Event å®ä¾‹æ˜¯å¦å¯ä»¥å†’æ³¡ã€‚å‰é¢è¯´è¿‡ï¼Œé™¤éæ˜¾å¼å£°æ˜ï¼ŒEventæ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œé»˜è®¤æ˜¯ä¸å†’æ³¡çš„ã€‚ Event.eventPhaseå±æ€§è¿”å›ä¸€ä¸ªæ•´æ•°å¸¸é‡ï¼Œè¡¨ç¤ºäº‹ä»¶ç›®å‰æ‰€å¤„çš„é˜¶æ®µã€‚è¯¥å±æ€§åªè¯»ã€‚ var phase = event.eventPhase; Event.eventPhaseçš„è¿”å›å€¼æœ‰å››ç§å¯èƒ½ã€‚ 0ï¼Œäº‹ä»¶ç›®å‰æ²¡æœ‰å‘ç”Ÿã€‚ 1ï¼Œäº‹ä»¶ç›®å‰å¤„äºæ•è·é˜¶æ®µï¼Œå³å¤„äºä»ç¥–å…ˆèŠ‚ç‚¹å‘ç›®æ ‡èŠ‚ç‚¹çš„ä¼ æ’­è¿‡ç¨‹ä¸­ã€‚ 2ï¼Œäº‹ä»¶åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹ï¼Œå³Event.targetå±æ€§æŒ‡å‘çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚ 3ï¼Œäº‹ä»¶å¤„äºå†’æ³¡é˜¶æ®µï¼Œå³å¤„äºä»ç›®æ ‡èŠ‚ç‚¹å‘ç¥–å…ˆèŠ‚ç‚¹çš„åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ã€‚ 7.2 Event.cancelableï¼ŒEvent.cancelBubbleï¼Œevent.defaultPrevented Event.cancelableå±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥å–æ¶ˆã€‚è¯¥å±æ€§ä¸ºåªè¯»å±æ€§ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£ Event å®ä¾‹çš„ç‰¹æ€§ã€‚ å¤§å¤šæ•°æµè§ˆå™¨çš„åŸç”Ÿäº‹ä»¶æ˜¯å¯ä»¥å–æ¶ˆçš„ã€‚æ¯”å¦‚ï¼Œå–æ¶ˆclickäº‹ä»¶ï¼Œç‚¹å‡»é“¾æ¥å°†æ— æ•ˆã€‚ä½†æ˜¯é™¤éæ˜¾å¼å£°æ˜ï¼ŒEventæ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œé»˜è®¤æ˜¯ä¸å¯ä»¥å–æ¶ˆçš„ã€‚ var evt = new Event('foo'); evt.cancelable // false å½“Event.cancelableå±æ€§ä¸ºtrueæ—¶ï¼Œè°ƒç”¨Event.preventDefault()å°±å¯ä»¥å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œé˜»æ­¢æµè§ˆå™¨å¯¹è¯¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚ å¦‚æœäº‹ä»¶ä¸èƒ½å–æ¶ˆï¼Œè°ƒç”¨Event.preventDefault()ä¼šæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæœ€å¥½ç”¨Event.cancelableå±æ€§åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å¯ä»¥å–æ¶ˆã€‚ function preventEvent(event) { if (event.cancelable) { event.preventDefault(); } else { console.warn('This event couldn\\'t be canceled.'); console.dir(event); } } Event.cancelBubbleå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœè®¾ä¸ºtrueï¼Œç›¸å½“äºæ‰§è¡ŒEvent.stopPropagation()ï¼Œå¯ä»¥é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ã€‚ Event.defaultPreventedå±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦è°ƒç”¨è¿‡Event.preventDefaultæ–¹æ³•ã€‚è¯¥å±æ€§åªè¯»ã€‚ if (event.defaultPrevented) { console.log('è¯¥äº‹ä»¶å·²ç»å–æ¶ˆäº†'); } 7.3 Event.currentTargetï¼ŒEvent.target Event.currentTargetå±æ€§è¿”å›äº‹ä»¶å½“å‰æ‰€åœ¨çš„èŠ‚ç‚¹ï¼Œå³æ­£åœ¨æ‰§è¡Œçš„ç›‘å¬å‡½æ•°æ‰€ç»‘å®šçš„é‚£ä¸ªèŠ‚ç‚¹ã€‚ Event.targetå±æ€§è¿”å›åŸå§‹è§¦å‘äº‹ä»¶çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå³äº‹ä»¶æœ€åˆå‘ç”Ÿçš„èŠ‚ç‚¹ã€‚äº‹ä»¶ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œä¸åŒèŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å†…éƒ¨çš„Event.targetä¸Event.currentTargetå±æ€§çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…æ€»æ˜¯ä¸å˜çš„ï¼Œåè€…åˆ™æ˜¯æŒ‡å‘ç›‘å¬å‡½æ•°æ‰€åœ¨çš„é‚£ä¸ªèŠ‚ç‚¹å¯¹è±¡ã€‚ // HTMLä»£ç ä¸º // Hello World function hide(e) { console.log(this === e.currentTarget); // æ€»æ˜¯ true console.log(this === e.target); // æœ‰å¯èƒ½ä¸æ˜¯ true e.target.style.visibility = 'hidden'; } para.addEventListener('click', hide, false); ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåœ¨paraèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸Šé¢ç‚¹å‡»ï¼Œåˆ™e.targetæŒ‡å‘å­èŠ‚ç‚¹ï¼Œå¯¼è‡´å­èŠ‚ç‚¹ï¼ˆå³ World éƒ¨åˆ†ï¼‰ä¼šä¸å¯è§ã€‚å¦‚æœç‚¹å‡» Hello éƒ¨åˆ†ï¼Œåˆ™æ•´ä¸ªparaéƒ½å°†ä¸å¯è§ã€‚ 7.4 Event.type Event.typeå±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹ã€‚äº‹ä»¶çš„ç±»å‹æ˜¯åœ¨ç”Ÿæˆäº‹ä»¶çš„æ—¶å€™ã€‚è¯¥å±æ€§åªè¯»ã€‚ var evt = new Event('foo'); evt.type // \"foo\" 7.5 Event.timeStamp Event.timeStampå±æ€§è¿”å›ä¸€ä¸ªæ¯«ç§’æ—¶é—´æˆ³ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ã€‚å®ƒæ˜¯ç›¸å¯¹äºç½‘é¡µåŠ è½½æˆåŠŸå¼€å§‹è®¡ç®—çš„ã€‚ var evt = new Event('foo'); evt.timeStamp // 3683.6999999995896 å®ƒçš„è¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•´æ•°ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°æ•°ï¼ˆé«˜ç²¾åº¦æ—¶é—´æˆ³ï¼‰ï¼Œå–å†³äºæµè§ˆå™¨çš„è®¾ç½®ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦çš„ä¾‹å­ï¼Œæ˜¾ç¤ºæ¯ç§’ç§»åŠ¨çš„åƒç´ æ•°é‡ã€‚ var previousX; var previousY; var previousT; window.addEventListener('mousemove', function(event) { if ( previousX !== undefined && previousY !== undefined && previousT !== undefined ) { var deltaX = event.screenX - previousX; var deltaY = event.screenY - previousY; var deltaD = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2)); var deltaT = event.timeStamp - previousT; console.log(deltaD / deltaT * 1000); } previousX = event.screenX; previousY = event.screenY; previousT = event.timeStamp; }); 7.6 Event.isTrusted Event.isTrustedå±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦ç”±çœŸå®çš„ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿã€‚æ¯”å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥ä¼šäº§ç”Ÿä¸€ä¸ªclickäº‹ä»¶ï¼Œè¯¥äº‹ä»¶æ˜¯ç”¨æˆ·äº§ç”Ÿçš„ï¼›Eventæ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œåˆ™æ˜¯è„šæœ¬äº§ç”Ÿçš„ã€‚ var evt = new Event('foo'); evt.isTrusted // false ä¸Šé¢ä»£ç ä¸­ï¼Œevtå¯¹è±¡æ˜¯è„šæœ¬äº§ç”Ÿçš„ï¼Œæ‰€ä»¥isTrustedå±æ€§è¿”å›falseã€‚ 7.7 Event.detail Event.detailå±æ€§åªæœ‰æµè§ˆå™¨çš„ UI ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰äº‹ä»¶æ‰å…·æœ‰ã€‚è¯¥å±æ€§è¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶çš„æŸç§ä¿¡æ¯ã€‚å…·ä½“å«ä¹‰ä¸äº‹ä»¶ç±»å‹ç›¸å…³ã€‚æ¯”å¦‚ï¼Œå¯¹äºclickå’Œdbclickäº‹ä»¶ï¼ŒEvent.detailæ˜¯é¼ æ ‡æŒ‰ä¸‹çš„æ¬¡æ•°ï¼ˆ1è¡¨ç¤ºå•å‡»ï¼Œ2è¡¨ç¤ºåŒå‡»ï¼Œ3è¡¨ç¤ºä¸‰å‡»ï¼‰ï¼›å¯¹äºé¼ æ ‡æ»šè½®äº‹ä»¶ï¼ŒEvent.detailæ˜¯æ»šè½®æ­£å‘æ»šåŠ¨çš„è·ç¦»ï¼Œè´Ÿå€¼å°±æ˜¯è´Ÿå‘æ»šåŠ¨çš„è·ç¦»ï¼Œè¿”å›å€¼æ€»æ˜¯3çš„å€æ•°ã€‚ // HTML ä»£ç å¦‚ä¸‹ // Hello function giveDetails(e) { console.log(e.detail); } document.querySelector('p').onclick = giveDetails; 8. Event å¯¹è±¡çš„å®ä¾‹æ–¹æ³• 8.1 Event.preventDefault() Event.preventDefaultæ–¹æ³•å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚æ¯”å¦‚ç‚¹å‡»é“¾æ¥åï¼Œæµè§ˆå™¨é»˜è®¤ä¼šè·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»¥åï¼Œå°±ä¸ä¼šè·³è½¬äº†ï¼›å†æ¯”å¦‚ï¼ŒæŒ‰ä¸€ä¸‹ç©ºæ ¼é”®ï¼Œé¡µé¢å‘ä¸‹æ»šåŠ¨ä¸€æ®µè·ç¦»ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»¥åä¹Ÿä¸ä¼šæ»šåŠ¨äº†ã€‚è¯¥æ–¹æ³•ç”Ÿæ•ˆçš„å‰ææ˜¯ï¼Œäº‹ä»¶å¯¹è±¡çš„cancelableå±æ€§ä¸ºtrueï¼Œå¦‚æœä¸ºfalseï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚ æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªæ˜¯å–æ¶ˆäº‹ä»¶å¯¹å½“å‰å…ƒç´ çš„é»˜è®¤å½±å“ï¼Œä¸ä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ã€‚å¦‚æœè¦é˜»æ­¢ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨stopPropagation()æˆ–stopImmediatePropagation()æ–¹æ³•ã€‚ // HTML ä»£ç ä¸º // var cb = document.getElementById('my-checkbox'); cb.addEventListener( 'click', function (e){ e.preventDefault(); }, false ); ä¸Šé¢ä»£ç ä¸­ï¼Œæµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºæ˜¯å•å‡»ä¼šé€‰ä¸­å•é€‰æ¡†ï¼Œå–æ¶ˆè¿™ä¸ªè¡Œä¸ºï¼Œå°±å¯¼è‡´æ— æ³•é€‰ä¸­å•é€‰æ¡†ã€‚ åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¸ºæ–‡æœ¬è¾“å…¥æ¡†è®¾ç½®æ ¡éªŒæ¡ä»¶ã€‚å¦‚æœç”¨æˆ·çš„è¾“å…¥ä¸ç¬¦åˆæ¡ä»¶ï¼Œå°±æ— æ³•å°†å­—ç¬¦è¾“å…¥æ–‡æœ¬æ¡†ã€‚ // HTML ä»£ç ä¸º // var input = document.getElementById('my-input'); input.addEventListener('keypress', checkName, false); function checkName(e) { if (e.charCode 122) { e.preventDefault(); } } ä¸Šé¢ä»£ç ä¸ºæ–‡æœ¬æ¡†çš„keypressäº‹ä»¶è®¾å®šç›‘å¬å‡½æ•°åï¼Œå°†åªèƒ½è¾“å…¥å°å†™å­—æ¯ï¼Œå¦åˆ™è¾“å…¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå†™å…¥æ–‡æœ¬æ¡†ï¼‰å°†è¢«å–æ¶ˆï¼Œå¯¼è‡´ä¸èƒ½å‘æ–‡æœ¬æ¡†è¾“å…¥å†…å®¹ã€‚ 8.2 Event.stopPropagation() stopPropagationæ–¹æ³•é˜»æ­¢äº‹ä»¶åœ¨ DOM ä¸­ç»§ç»­ä¼ æ’­ï¼Œé˜²æ­¢å†è§¦å‘å®šä¹‰åœ¨åˆ«çš„èŠ‚ç‚¹ä¸Šçš„ç›‘å¬å‡½æ•°ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬åœ¨å½“å‰èŠ‚ç‚¹ä¸Šå…¶ä»–çš„äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚ function stopEvent(e) { e.stopPropagation(); } el.addEventListener('click', stopEvent, false); ä¸Šé¢ä»£ç ä¸­ï¼Œclickäº‹ä»¶å°†ä¸ä¼šè¿›ä¸€æ­¥å†’æ³¡åˆ°elèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ 8.3 Event.stopImmediatePropagation() Event.stopImmediatePropagationæ–¹æ³•é˜»æ­¢åŒä¸€ä¸ªäº‹ä»¶çš„å…¶ä»–ç›‘å¬å‡½æ•°è¢«è°ƒç”¨ï¼Œä¸ç®¡ç›‘å¬å‡½æ•°å®šä¹‰åœ¨å½“å‰èŠ‚ç‚¹è¿˜æ˜¯å…¶ä»–èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œæ¯”Event.stopPropagation()æ›´å½»åº•ã€‚ å¦‚æœåŒä¸€ä¸ªèŠ‚ç‚¹å¯¹äºåŒä¸€ä¸ªäº‹ä»¶æŒ‡å®šäº†å¤šä¸ªç›‘å¬å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šæ ¹æ®æ·»åŠ çš„é¡ºåºä¾æ¬¡è°ƒç”¨ã€‚åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªç›‘å¬å‡½æ•°è°ƒç”¨äº†Event.stopImmediatePropagationæ–¹æ³•ï¼Œå…¶ä»–çš„ç›‘å¬å‡½æ•°å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚ function l1(e){ e.stopImmediatePropagation(); } function l2(e){ console.log('hello world'); } el.addEventListener('click', l1, false); el.addEventListener('click', l2, false); ä¸Šé¢ä»£ç åœ¨elèŠ‚ç‚¹ä¸Šï¼Œä¸ºclickäº‹ä»¶æ·»åŠ äº†ä¸¤ä¸ªç›‘å¬å‡½æ•°l1å’Œl2ã€‚ç”±äºl1è°ƒç”¨äº†event.stopImmediatePropagationæ–¹æ³•ï¼Œæ‰€ä»¥l2ä¸ä¼šè¢«è°ƒç”¨ã€‚ 8.4 Event.composedPath() Event.composedPath()è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯äº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹å’Œä¾æ¬¡å†’æ³¡ç»è¿‡çš„æ‰€æœ‰ä¸Šå±‚èŠ‚ç‚¹ã€‚ // HTML ä»£ç å¦‚ä¸‹ // // Hello // var div = document.querySelector('div'); var p = document.querySelector('p'); div.addEventListener('click', function (e) { console.log(e.composedPath()); }, false); // [p, div, body, html, document, Window] ä¸Šé¢ä»£ç ä¸­ï¼Œclickäº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹æ˜¯pï¼Œå‘ä¸Šä¾æ¬¡æ˜¯divã€bodyã€htmlã€documentã€Windowã€‚ 9. CustomEvent æ¥å£ CustomEvent æ¥å£ç”¨äºç”Ÿæˆè‡ªå®šä¹‰çš„äº‹ä»¶å®ä¾‹ã€‚é‚£äº›æµè§ˆå™¨é¢„å®šä¹‰çš„äº‹ä»¶ï¼Œè™½ç„¶å¯ä»¥æ‰‹åŠ¨ç”Ÿæˆï¼Œä½†æ˜¯å¾€å¾€ä¸èƒ½åœ¨äº‹ä»¶ä¸Šç»‘å®šæ•°æ®ã€‚å¦‚æœéœ€è¦åœ¨è§¦å‘äº‹ä»¶çš„åŒæ—¶ï¼Œä¼ å…¥æŒ‡å®šçš„æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨ CustomEvent æ¥å£ç”Ÿæˆçš„è‡ªå®šä¹‰äº‹ä»¶å¯¹è±¡ã€‚ æµè§ˆå™¨åŸç”Ÿæä¾›CustomEvent()æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ CustomEvent äº‹ä»¶å®ä¾‹ã€‚ new CustomEvent(type, options) CustomEvent()æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„åå­—ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„é…ç½®å¯¹è±¡ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚CustomEventçš„é…ç½®å¯¹è±¡é™¤äº†æ¥å— Event äº‹ä»¶çš„é…ç½®å±æ€§ï¼Œåªæœ‰ä¸€ä¸ªè‡ªå·±çš„å±æ€§ã€‚ detailï¼šè¡¨ç¤ºäº‹ä»¶çš„é™„å¸¦æ•°æ®ï¼Œé»˜è®¤ä¸ºnullã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var event = new CustomEvent('build', { 'detail': 'hello' }); function eventHandler(e) { console.log(e.detail); } document.body.addEventListener('build', function (e) { console.log(e.detail); }); document.body.dispatchEvent(event); ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰äº†buildäº‹ä»¶ã€‚è¯¥äº‹ä»¶è§¦å‘åï¼Œä¼šè¢«ç›‘å¬åˆ°ï¼Œä»è€Œè¾“å‡ºè¯¥äº‹ä»¶å®ä¾‹çš„detailå±æ€§ï¼ˆå³å­—ç¬¦ä¸²helloï¼‰ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ var myEvent = new CustomEvent('myevent', { detail: { foo: 'bar' }, bubbles: true, cancelable: false }); el.addEventListener('myevent', function (event) { console.log('Hello ' + event.detail.foo); }); el.dispatchEvent(myEvent); ä¸Šé¢ä»£ç ä¹Ÿè¯´æ˜ï¼ŒCustomEvent çš„äº‹ä»¶å®ä¾‹ï¼Œé™¤äº†å…·æœ‰ Event æ¥å£çš„å®ä¾‹å±æ€§ï¼Œè¿˜å…·æœ‰detailå±æ€§ã€‚ 10. å‚è€ƒé“¾æ¥ Wilson Page, An Introduction To DOM Events Mozilla Developer Network, Using Firefox 1.5 caching Craig Buckler, How to Capture CSS3 Animation Events in JavaScript Ray Nicholus, You Donâ€™t Need jQuery!: Events "},"æŠ€æœ¯ç¬”è®°/å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹ç™½å±æ—¶é—´.html":{"url":"æŠ€æœ¯ç¬”è®°/å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹ç™½å±æ—¶é—´.html","title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹ç™½å±æ—¶é—´","keywords":"","body":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹ç™½å±æ—¶é—´ [TOC] å‰è¨€ è¯¥ç¯‡æ–‡ç« ä¼šä¸ºæ‚¨åˆ†äº«åœ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­éå¸¸é‡è¦çš„ä¸€ç¯-ç™½å±æ—¶é—´ï¼Œå°†ä»ç™½å±æ—¶é—´çš„æ¦‚å¿µã€é‡è¦æ€§ä»¥åŠç™½å±çš„è¿‡ç¨‹ä¸€ä¸€è¿›è¡Œé˜è¿°ï¼ŒåŒæ—¶æä¾›æ€§èƒ½ä¼˜åŒ–çš„ç­–ç•¥ä¸å®è·µã€‚ ä¸€ã€æ¦‚å¿µ ç™½å±æ—¶é—´ï¼šå³ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æˆ–æ‰“å¼€æµè§ˆå™¨è¾“å…¥URLåœ°å€åï¼Œä»å±å¹•ç©ºç™½åˆ°æ˜¾ç¤ºç¬¬ä¸€ä¸ªç”»é¢çš„æ—¶é—´ã€‚ ç™½å±æ—¶é—´çš„é•¿çŸ­å°†ç›´æ¥å½±å“ç”¨æˆ·å¯¹è¯¥ç½‘ç«™çš„ç¬¬ä¸€å°è±¡ã€‚ äºŒã€ç™½å±æ—¶é—´çš„é‡è¦æ€§ å½“ç”¨æˆ·ç‚¹å¼€ä¸€ä¸ªé“¾æ¥æˆ–è€…æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLå¼€å§‹è¿›è¡Œè®¿é—®æ—¶ï¼Œå°±å¼€å§‹ç­‰å¾…é¡µé¢çš„å±•ç¤ºã€‚é¡µé¢æ¸²æŸ“çš„æ—¶é—´è¶ŠçŸ­ï¼Œç”¨æˆ·ç­‰å¾…çš„æ—¶é—´å°±è¶ŠçŸ­ï¼Œç”¨æˆ·æ„ŸçŸ¥åˆ°é¡µé¢çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚è¿™æ ·å¯ä»¥æå¤§çš„æå‡ç”¨æˆ·çš„ä½“éªŒï¼Œå‡å°‘ç”¨æˆ·çš„è·³å‡ºï¼Œæå‡é¡µé¢çš„ç•™å­˜ç‡ã€‚ æ‰“å¼€ä¸€ä¸ªé¡µé¢å°±åƒä½ çš„å¥³ç¥¨å¬å”¤ä½ ä¸€æ ·ï¼Œä½ å‡ºç°çš„è¶Šè¿…é€Ÿï¼Œå¥³ç¥¨è‚¯å®šä¼šæ„ˆåŠ æ¬£å–œï¼åä¹‹ï¼Œä½ åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼Œé‚£ä¹ˆä½ çš„å¥³ç¥¨å¾ˆå¯èƒ½åˆè¦æŠ›å¼ƒä½ äº†(ä¸ºä»€ä¹ˆè¦å¯¹ä½ è¯´åˆå‘¢? ...) ä¸‰ã€ç™½å±æ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹å‘¢ï¼Ÿ è®©æˆ‘ä»¬ä¸€èµ·æ¥æ­ç§˜ï¼šä»æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œåˆ°é¡µé¢çš„ç”»é¢å±•ç¤ºç»å†äº†æ€æ ·çš„è¿‡ç¨‹ï¼ 1. DNS Lookup DNS Lookup å³æµè§ˆå™¨ä»DNSæœåŠ¡å™¨ä¸­è¿›è¡ŒåŸŸåæŸ¥è¯¢ã€‚ æµè§ˆå™¨ä¼šå…ˆå¯¹é¡µé¢è¿›è¡ŒåŸŸåè§£æï¼Œè·å–åˆ°æœåŠ¡å™¨çš„IPåœ°å€åï¼Œè¿›è€Œå’ŒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚ Tips: é€šå¸¸åœ¨æ•´ä¸ªåŠ è½½é¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šå¤šæ¬¡è¿›è¡ŒDNS Lookupï¼ŒåŒ…æ‹¬é¡µé¢æœ¬èº«çš„åŸŸåæŸ¥è¯¢ä»¥åŠåœ¨è§£æHTMLé¡µé¢æ—¶åŠ è½½çš„JSã€CSSã€Imageã€Videoç­‰èµ„æºäº§ç”Ÿçš„åŸŸåæŸ¥è¯¢ã€‚ 2. å»ºç«‹TCPè¯·æ±‚è¿æ¥ æµè§ˆå™¨å’ŒæœåŠ¡ç«¯TCPè¯·æ±‚å»ºç«‹çš„è¿‡ç¨‹ï¼Œæ˜¯åŸºäºTCP/IPï¼Œè¯¥åè®®ç”±ç½‘ç»œå±‚çš„IPå’Œä¼ è¾“å±‚çš„TCPç»„æˆã€‚IPæ˜¯æ¯ä¸€å°äº’è”ç½‘è®¾å¤‡åœ¨äº’è”ç½‘ä¸­çš„å”¯ä¸€åœ°å€ã€‚ TCPé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå¹¶æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚ 3. æœåŠ¡ç«¯è¯·æ±‚å¤„ç†å“åº” åœ¨TCPè¿æ¥å»ºç«‹åï¼ŒWebæœåŠ¡å™¨æ¥å—è¯·æ±‚ï¼Œå¼€å§‹è¿›è¡Œå¤„ç†ï¼ŒåŒæ—¶æµè§ˆå™¨ç«¯å¼€å§‹ç­‰å¾…æœåŠ¡å™¨çš„å¤„ç†å“åº”ã€‚ WebæœåŠ¡å™¨æ ¹æ®è¯·æ±‚ç±»å‹çš„ä¸åŒï¼Œè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚é™æ€èµ„æºå¦‚å›¾ç‰‡ã€CSSæ–‡ä»¶ã€é™æ€HTMLç›´æ¥è¿›è¡Œå“åº”ï¼›å¦‚å…¶ä»–æ³¨å†Œçš„è¯·æ±‚è½¬å‘ç»™ç›¸åº”çš„åº”ç”¨æœåŠ¡å™¨ï¼Œè¿›è¡Œå¦‚æ•°æ®å¤„ç†ã€ç¼“å­˜ä¸­å–æ•°æ®ï¼Œå°†æ•°æ®æŒ‰ç…§çº¦å®šå¥½çš„æ ¼å¼å“åº”ç»™æµè§ˆå™¨ã€‚ åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¸ºåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ï¼Œåº”ç”¨æœåŠ¡å™¨çš„å¤„ç†æœ‰å¯èƒ½ç»è¿‡å¾ˆå¤šä¸ªç³»ç»Ÿçš„ä¸­é—´ä»¶ï¼Œæœ€ç»ˆè·å–åˆ°éœ€è¦çš„æ•°æ® 4. å®¢æˆ·ç«¯ä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºé¡µé¢ åœ¨æœåŠ¡å™¨è¿”å›æ•°æ®åï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨æ¥æ”¶æ•°æ®ï¼Œè¿›è¡ŒHTMLä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºã€‚ a. å¦‚æœæ˜¯GzipåŒ…ï¼Œåˆ™å…ˆè§£å‹ä¸ºHTML b. è§£æHTMLçš„å¤´éƒ¨ä»£ç ï¼Œä¸‹è½½å¤´éƒ¨ä»£ç ä¸­çš„æ ·å¼èµ„æºæ–‡ä»¶æˆ–è„šæœ¬èµ„æºæ–‡ä»¶ c. è§£æHTMLä»£ç å’Œæ ·å¼æ–‡ä»¶ä»£ç ï¼Œæ„å»ºHTMLçš„DOMæ ‘ä»¥åŠä¸CSSç›¸å…³çš„CSSOMæ ‘ d. é€šè¿‡éå†DOMæ ‘å’ŒCSSOMæ ‘ï¼Œæµè§ˆå™¨ä¾æ¬¡è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ã€åæ ‡ã€é¢œè‰²ç­‰æ ·å¼ï¼Œæ„é€ æ¸²æŸ“æ ‘ e. æ ¹æ®æ¸²æŸ“æ ‘å®Œæˆç»˜åˆ¶è¿‡ç¨‹ æµè§ˆå™¨ä¸‹è½½HTMLåï¼Œé¦–å…ˆè§£æå¤´éƒ¨ä»£ç ï¼Œè¿›è¡Œæ ·å¼è¡¨ä¸‹è½½ï¼Œç„¶åç»§ç»­å‘ä¸‹è§£æHTMLä»£ç ï¼Œæ„å»ºDOMæ ‘ï¼ŒåŒæ—¶è¿›è¡Œæ ·å¼ä¸‹è½½ã€‚å½“DOMæ ‘æ„å»ºå®Œæˆåï¼Œç«‹å³å¼€å§‹æ„é€ CSSOMæ ‘ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ ·å¼è¡¨ä¸‹è½½é€Ÿåº¦å¤Ÿå¿«ï¼ŒDOMæ ‘å’ŒCSSOMæ ‘è¿›å…¥ä¸€ä¸ªå¹¶è¡Œçš„è¿‡ç¨‹ï¼Œå½“ä¸¤æ£µæ ‘æ„å»ºå®Œæ¯•ï¼Œæ„å»ºæ¸²æŸ“æ ‘ï¼Œç„¶åè¿›è¡Œç»˜åˆ¶ã€‚ Tips:æµè§ˆå™¨å®‰å…¨è§£æç­–ç•¥å¯¹è§£æHTMLé€ æˆçš„å½±å“ï¼š å½“è§£æHTMLæ—¶é‡åˆ°å†…è”JSä»£ç ï¼Œä¼šé˜»å¡DOMæ ‘çš„æ„å»º ç‰¹åˆ«æ‚²æƒ¨çš„æƒ…å†µï¼š å½“CSSæ ·å¼æ–‡ä»¶æ²¡æœ‰ä¸‹è½½å®Œæˆæ—¶ï¼Œæµè§ˆå™¨è§£æHTMLé‡åˆ°äº†å†…è”JSä»£ç ï¼Œæ­¤æ—¶ï¼ï¼ï¼æ ¹æ®æµè§ˆå™¨çš„å®‰å…¨è§£æç­–ç•¥ï¼Œæµè§ˆå™¨æš‚åœJSè„šæœ¬æ‰§è¡Œï¼Œæš‚åœHTMLè§£æã€‚ç›´åˆ°CSSæ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œå®ŒæˆCSSOMæ ‘æ„å»ºï¼Œé‡æ–°æ¢å¤åŸæ¥çš„è§£æã€‚ ä¸€å®šè¦åˆç†æ”¾ç½®JSä»£ç ï¼ï¼ï¼ å››ã€ç™½å±-æ€§èƒ½ä¼˜åŒ– è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†ä»æµè§ˆå™¨åœ¨æ‰“å¼€ä¸€ä¸ªé“¾æ¥å¼€å§‹ï¼Œåˆ°å±å¹•å±•ç¤ºçš„è¿‡ç¨‹-ç™½å±æ—¶é—´çš„å†ç¨‹ï¼Œé‚£è¿™å¯¹æ¯ä¸ªç¯èŠ‚ä¸­å‘ç”Ÿçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰é’ˆå¯¹æ€§çš„è¿›è¡Œç›¸å…³çš„ä¼˜åŒ–ã€‚ 1. DNSè§£æä¼˜åŒ– é’ˆå¯¹DNS Lookupç¯èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ€§çš„è¿›è¡ŒDNSè§£æä¼˜åŒ–ã€‚ DNSç¼“å­˜ä¼˜åŒ– DNSé¢„åŠ è½½ç­–ç•¥ ç¨³å®šå¯é çš„DNSæœåŠ¡å™¨ 2. TCPç½‘ç»œé“¾è·¯ä¼˜åŒ– é’ˆå¯¹ç½‘ç»œé“¾è·¯çš„ä¼˜åŒ–ï¼Œå¥½åƒé™¤äº†èŠ±é’±æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹å¼ï¼ 3. æœåŠ¡ç«¯å¤„ç†ä¼˜åŒ– æœåŠ¡ç«¯çš„å¤„ç†ä¼˜åŒ–ï¼Œæ˜¯ä¸€ä¸ªéå¸¸åºå¤§çš„è¯é¢˜ï¼Œä¼šæ¶‰åŠåˆ°å¦‚Redisç¼“å­˜ã€æ•°æ®åº“å­˜å‚¨ä¼˜åŒ–æˆ–æ˜¯ç³»ç»Ÿå†…çš„å„ç§ä¸­é—´ä»¶ä»¥åŠGzipå‹ç¼©ç­‰... 4. æµè§ˆå™¨ä¸‹è½½ã€è§£æã€æ¸²æŸ“é¡µé¢ä¼˜åŒ– æ ¹æ®æµè§ˆå™¨å¯¹é¡µé¢çš„ä¸‹è½½ã€è§£æã€æ¸²æŸ“è¿‡ç¨‹ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹çš„ä¼˜åŒ–å¤„ç†ï¼š å°½å¯èƒ½çš„ç²¾ç®€HTMLçš„ä»£ç å’Œç»“æ„ å°½å¯èƒ½çš„ä¼˜åŒ–CSSæ–‡ä»¶å’Œç»“æ„ ä¸€å®šè¦åˆç†çš„æ”¾ç½®JSä»£ç ï¼Œå°½é‡ä¸è¦ä½¿ç”¨å†…è”çš„JSä»£ç  "},"æŠ€æœ¯ç¬”è®°/å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ.html":{"url":"æŠ€æœ¯ç¬”è®°/å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ.html","title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ","keywords":"","body":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ [TOC] ä¸€ã€ç¼“å­˜ æ¬¢è¿æ¥åˆ°ã€Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€çš„ç¬¬ä¸€ç«™ â€”â€” ç¼“å­˜ã€‚ å½“æµè§ˆå™¨æƒ³è¦è·å–è¿œç¨‹çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬çš„æ€§èƒ½ä¹‹æ—…å°±å¼€å§‹äº†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç«‹å³åŠ¨èº«ï¼ˆå‘é€è¯·æ±‚ï¼‰ã€‚åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œå¾ˆå¤šæ€§èƒ½é—®é¢˜éƒ½ä¼šé€šè¿‡å¢åŠ ç¼“å­˜æ¥è§£å†³ï¼Œå‰ç«¯ä¹Ÿä¸ä¾‹å¤–ã€‚å’Œè®¸å¤šåç«¯æœåŠ¡ä¸€æ ·ï¼Œå‰ç«¯ç¼“å­˜ä¹Ÿæ˜¯å¤šçº§çš„ã€‚ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·æ¥å…·ä½“çœ‹ä¸€çœ‹ã€‚ 1. æœ¬åœ°æ•°æ®å­˜å‚¨ é€šè¿‡ç»“åˆæœ¬åœ°å­˜å‚¨ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡ä»£ç ä¾§å®ç°ç¼“å­˜ã€‚ å¯¹äºä¸€äº›è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸šåŠ¡ä»£ç ä¾§è¿›è¡Œç¼“å­˜å¤„ç†ã€‚ç¼“å­˜æ–¹å¼åŒ…æ‹¬ localStorageã€sessionStorageã€indexedDBã€‚æŠŠè¿™å—åŠ å…¥ç¼“å­˜çš„è®¨è®ºä¹Ÿè®¸ä¼šæœ‰äº‰è®®ï¼Œä½†åˆ©ç”¨å¥½å®ƒç¡®å®èƒ½åœ¨ç¨‹åºä¾§è¾¾åˆ°ä¸€äº›ç±»ä¼¼ç¼“å­˜çš„èƒ½åŠ›ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„é¡µé¢ä¸Šæœ‰ä¸€ä¸ªæ—¥æ›´æ–°çš„æ¦œå•ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå½“æ—¥ç¼“å­˜ï¼š // å½“ç”¨æˆ·åŠ è½½ç«™ç‚¹ä¸­çš„æ¦œå•ç»„ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è·å–æ¦œå•æ•°æ® async function readListData() { const info = JSON.parse(localStorage.getItem('listInfo')); if (isExpired(info.time, +(new Date))) { const list = await fetchList(); localStorage.setItem('listInfo', JSON.stringify({ time: +(new Date), list: list })); return list; } return info.list; } localStorage å¤§å®¶éƒ½æ¯”è¾ƒäº†è§£äº†ï¼ŒindexedDB å¯èƒ½ä¼šäº†è§£çš„æ›´å°‘ä¸€äº›ã€‚æƒ³å¿«é€Ÿäº†è§£ indexedDB ä½¿ç”¨æ–¹å¼å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« [1]ã€‚ ä»å‰ç«¯è§†è§’çœ‹ï¼Œè¿™æ˜¯ä¸€ç§æœ¬åœ°å­˜å‚¨ï¼›ä½†å¦‚æœä»æ•´ä¸ªç³»ç»Ÿçš„ç»´åº¦æ¥çœ‹ï¼Œå¾ˆå¤šæ—¶å€™å…¶å®ä¹Ÿæ˜¯ç¼“å­˜é“¾æ¡ä¸­çš„ä¸€ç¯ã€‚å¯¹äºä¸€äº›ç‰¹æ®Šçš„ã€è½»é‡çº§çš„ä¸šåŠ¡æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æœ¬åœ°å­˜å‚¨ä½œä¸ºç¼“å­˜ã€‚ 2. å†…å­˜ç¼“å­˜ï¼ˆMemoryï¼‰ å½“ä½ è®¿é—®ä¸€ä¸ªé¡µé¢åŠå…¶å­èµ„æºæ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°ä¸€ä¸ªèµ„æºè¢«ä½¿ç”¨å¤šæ¬¡ï¼Œä¾‹å¦‚å›¾æ ‡ã€‚ç”±äºè¯¥èµ„æºå·²ç»å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå†å»è¯·æ±‚åè€Œå¤šæ­¤ä¸€ä¸¾ï¼Œæµè§ˆå™¨å†…å­˜åˆ™æ˜¯æœ€è¿‘ã€æœ€å¿«çš„å“åº”åœºæ‰€ã€‚ ç¼“å­˜å¹¶æ— æ˜ç¡®çš„æ ‡å‡†è§„å®šï¼Œå®ƒä¸ HTTP è¯­ä¹‰ä¸‹çš„ç¼“å­˜å…³è”æ€§ä¸å¤§ï¼Œç®—æ˜¯æµè§ˆå™¨å¸®æˆ‘ä»¬å®ç°çš„ä¼˜åŒ–ï¼Œå¾ˆå¤šæ—¶å€™å…¶å®æˆ‘ä»¬æ„è¯†ä¸åˆ°ã€‚ å¯¹å†…å­˜ç¼“å­˜æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« [2]çš„ Memory Cache éƒ¨åˆ†è¿›ä¸€æ­¥äº†è§£ã€‚ 3. Cache API å½“æˆ‘ä»¬æ²¡æœ‰å‘½ä¸­å†…å­˜ç¼“å­˜æ—¶ï¼Œæ˜¯å¦å°±å¼€å§‹å‘é€è¯·æ±‚äº†å‘¢ï¼Ÿå…¶å®ä¸ä¸€å®šã€‚ åœ¨è¿™æ—¶æˆ‘ä»¬è¿˜å¯èƒ½ä¼šç¢°åˆ° Cache API é‡Œçš„ç¼“å­˜ï¼Œæåˆ°å®ƒå°±ä¸å¾—ä¸æä¸€ä¸‹ Service Worker äº†ã€‚å®ƒä»¬é€šå¸¸éƒ½æ˜¯é…åˆä½¿ç”¨çš„ã€‚ é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œè¿™å±‚çš„ç¼“å­˜æ²¡æœ‰è§„å®šè¯´è¯¥ç¼“å­˜ä»€ä¹ˆã€ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç¼“å­˜ï¼Œå®ƒåªæ˜¯æä¾›ç»™äº†å®¢æˆ·ç«¯æ„å»ºè¯·æ±‚ç¼“å­˜æœºåˆ¶çš„èƒ½åŠ›ã€‚å¦‚æœä½ å¯¹ PWA æˆ–è€… Service Worker å¾ˆäº†è§£ï¼Œåº”è¯¥éå¸¸æ¸…æ¥šæ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚å¦‚æœä¸äº†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çœ‹ä¸€ä¸‹ï¼š é¦–å…ˆï¼ŒService Worker æ˜¯ä¸€ä¸ªåå°è¿è¡Œçš„ç‹¬ç«‹çº¿ç¨‹ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­å¯ç”¨ // index.js if ('serviceWorker' in navigator) { navigator.serviceWorker.register('./sw.js').then(function () { // æ³¨å†ŒæˆåŠŸ }); } ä¹‹åéœ€è¦å¤„ç†ä¸€äº› Service Worker çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œè€Œå…¶ä¸­ä¸è¿™é‡Œæåˆ°çš„ç¼“å­˜åŠŸèƒ½ç›´æ¥ç›¸å…³çš„åˆ™æ˜¯è¯·æ±‚æ‹¦æˆªï¼š // sw.js self.addEventListener('fetch', function (e) { // å¦‚æœæœ‰cacheåˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™é€šè¿‡fetchè¯·æ±‚ e.respondWith( caches.match(e.request).then(function (cache) { return cache || fetch(e.request); }).catch(function (err) { console.log(err); return fetch(e.request); }) ); }); ä»¥ä¸Šä»£ç ä¼šæ‹¦æˆªæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ç¼“å­˜çš„è¯·æ±‚å†…å®¹ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ç¼“å­˜ï¼Œå¦åˆ™ä¼šç»§ç»­å‘é€è¯·æ±‚ã€‚ä¸å†…å­˜ç¼“å­˜ä¸åŒï¼ŒCache API æä¾›çš„ç¼“å­˜å¯ä»¥è®¤ä¸ºæ˜¯â€œæ°¸ä¹…æ€§â€çš„ï¼Œå…³é—­æµè§ˆå™¨æˆ–ç¦»å¼€é¡µé¢ä¹‹åï¼Œä¸‹æ¬¡å†è®¿é—®ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚ Service Worker ä¸ Cache API å…¶å®æ˜¯ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„ç»„åˆï¼Œèƒ½å¤Ÿå®ç°å †ä¸šåŠ¡çš„é€æ˜ï¼Œåœ¨å…¼å®¹æ€§ä¸Šä¹Ÿå¯ä»¥åšæˆæ¸è¿›æ”¯æŒã€‚è¿˜æ˜¯éå¸¸æ¨èåœ¨ä¸šåŠ¡ä¸­å°è¯•çš„ã€‚å½“ç„¶ä¸Šé¢ä»£ç ç®€ç•¥äº†å¾ˆå¤šï¼Œæƒ³è¦è¿›ä¸€æ­¥äº†è§£ Service Worker å’Œ Cache API çš„ä½¿ç”¨å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« [3]ã€‚åŒæ—¶æ¨èä½¿ç”¨ Google çš„ Workboxã€‚ 4. HTTP ç¼“å­˜ å¦‚æœ Service Worker ä¸­ä¹Ÿæ²¡æœ‰ç¼“å­˜çš„è¯·æ±‚ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ä¼šçœŸæ­£åˆ° HTTP request çš„é˜¶æ®µäº†ã€‚è¿™ä¸ªæ—¶å€™å‡ºç°çš„å°±æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„ HTTP ç¼“å­˜è§„èŒƒã€‚ HTTP æœ‰ä¸€ç³»åˆ—çš„è§„èŒƒæ¥è§„å®šå“ªäº›æƒ…å†µä¸‹éœ€è¦ç¼“å­˜è¯·æ±‚ä¿¡æ¯ã€ç¼“å­˜å¤šä¹…ï¼Œè€Œå“ªäº›æƒ…å†µä¸‹ä¸èƒ½è¿›è¡Œä¿¡æ¯çš„ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›¸å…³çš„ HTTP è¯·æ±‚å¤´æ¥å®ç°ç¼“å­˜ã€‚ HTTP ç¼“å­˜å¤§è‡´å¯ä»¥åˆ†ä¸ºå¼ºç¼“å­˜ä¸åå•†ç¼“å­˜ã€‚ 4.1. å¼ºç¼“å­˜ åœ¨å¼ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥ä»æœ¬åœ°ç¼“å­˜ä¸­è¯»å–å†…å®¹ï¼Œè¿™ä¸ªâ€œæœ¬åœ°â€ä¸€èˆ¬å°±æ˜¯æ¥æºäºç¡¬ç›˜ã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ Chrome DevTools ä¸Šç»å¸¸çœ‹åˆ°çš„ã€Œdisk cacheã€ã€‚ ä¸å…¶ç›¸å…³çš„å“åº”å¤´åˆ™æ˜¯ Expires å’Œ Cache-Controlã€‚åœ¨ Expires ä¸Šå¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œæµè§ˆå™¨é€šè¿‡å°†å…¶ä¸å½“å‰æœ¬åœ°æ—¶é—´å¯¹æ¯”ï¼Œåˆ¤æ–­èµ„æºæ˜¯å¦è¿‡æœŸï¼Œæœªè¿‡æœŸåˆ™ç›´æ¥ä»æœ¬åœ°å–å³å¯ã€‚è€Œ Cache-Control åˆ™å¯ä»¥é€šè¿‡ç»™å®ƒè®¾ç½®ä¸€ä¸ª max-ageï¼Œæ¥æ§åˆ¶è¿‡æœŸæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œmax-age=300 å°±æ˜¯è¡¨ç¤ºåœ¨å“åº”æˆåŠŸå 300 ç§’å†…ï¼Œèµ„æºè¯·æ±‚ä¼šèµ°å¼ºç¼“å­˜ã€‚ 4.2. åå•†ç¼“å­˜ ä½ å¯èƒ½ä¹Ÿæ„Ÿè§‰åˆ°äº†ï¼Œå¼ºç¼“å­˜ä¸æ˜¯é‚£ä¹ˆçµæ´»ã€‚å¦‚æœæˆ‘åœ¨ 300 ç§’å†…æ›´æ–°äº†èµ„æºï¼Œéœ€è¦æ€ä¹ˆé€šçŸ¥å®¢æˆ·ç«¯å‘¢ï¼Ÿå¸¸ç”¨çš„æ–¹å¼å°±æ˜¯é€šè¿‡åå•†ç¼“å­˜ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œè¿œç¨‹è¯·æ±‚æ…¢çš„ä¸€å¤§åŸå› å°±æ˜¯æŠ¥æ–‡ä½“ç§¯è¾ƒå¤§ã€‚åå•†ç¼“å­˜å°±æ˜¯å¸Œæœ›èƒ½é€šè¿‡å…ˆâ€œé—®ä¸€é—®â€æœåŠ¡å™¨èµ„æºåˆ°åº•æœ‰æ²¡æœ‰è¿‡æœŸï¼Œæ¥é¿å…æ— è°“çš„èµ„æºä¸‹è½½ã€‚è¿™ä¼´éšçš„å¾€å¾€ä¼šæ˜¯ HTTP è¯·æ±‚ä¸­çš„ 304 å“åº”ç ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹å®ç°åå•†ç¼“å­˜çš„ä¸¤ç§æ–¹å¼ï¼š ä¸€ç§åé˜²ç¼“å­˜çš„æ–¹å¼æ˜¯ï¼šæœåŠ¡å™¨ç¬¬ä¸€æ¬¡å“åº”æ—¶è¿”å› Last-Modifiedï¼Œè€Œæµè§ˆå™¨åœ¨åç»­è¯·æ±‚æ—¶å¸¦ä¸Šå…¶å€¼ä½œä¸º If-Modified-Sinceï¼Œç›¸å½“äºé—®æœåŠ¡ç«¯ï¼šXX æ—¶é—´ç‚¹ä¹‹åï¼Œè¿™ä¸ªèµ„æºæ›´æ–°äº†ä¹ˆï¼ŸæœåŠ¡å™¨æ ¹æ®å®é™…æƒ…å†µå›ç­”å³å¯ï¼šæ›´æ–°äº†ï¼ˆçŠ¶æ€ç  200ï¼‰æˆ–æ²¡æ›´æ–°ï¼ˆçŠ¶æ€ç  304ï¼‰ã€‚ ä¸Šé¢æ˜¯é€šè¿‡æ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°ï¼Œå¦‚æœæ›´æ–°æ—¶é—´é—´éš”è¿‡çŸ­ï¼Œä¾‹å¦‚ 1s ä¸€ä¸‹ï¼Œé‚£ä¹ˆä½¿ç”¨æ›´æ–°æ—¶é—´çš„æ–¹å¼ç²¾åº¦å°±ä¸å¤Ÿäº†ã€‚æ‰€ä»¥è¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡æ ‡è¯† â€”â€” ETagã€‚æœåŠ¡å™¨ç¬¬ä¸€æ¬¡å“åº”æ—¶è¿”å› ETagï¼Œè€Œæµè§ˆå™¨åœ¨åç»­è¯·æ±‚æ—¶å¸¦ä¸Šå…¶å€¼ä½œä¸º If-None-Matchã€‚ä¸€èˆ¬ä¼šç”¨æ–‡ä»¶çš„ MD5 ä½œä¸º ETagã€‚ ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¸€å®šè¦å–„äºåº”ç”¨ HTTP ç¼“å­˜ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šå…³äº HTTP ç¼“å­˜çš„å†…å®¹ï¼Œå¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« [4]ã€‚ ä¸Šé¢è¿™äº›çš„å„çº§ç¼“å­˜çš„åŒ¹é…æœºåˆ¶é‡Œï¼Œéƒ½æ˜¯åŒ…å«èµ„æºçš„ uri çš„åŒ¹é…ï¼Œå³ uri æ›´æ”¹åä¸ä¼šå‘½ä¸­ç¼“å­˜ã€‚ä¹Ÿæ­£æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬ç›®å‰åœ¨å‰ç«¯å®è·µä¸­éƒ½ä¼šæŠŠæ–‡ä»¶ HASH åŠ å…¥åˆ°æ–‡ä»¶åä¸­ï¼Œé¿å…åŒåæ–‡ä»¶å‘½ä¸­ç¼“å­˜çš„æ—§èµ„æºã€‚ 5. Push Cache å‡å¦‚å¾ˆä¸å¹¸ï¼Œä»¥ä¸Šè¿™äº›ç¼“å­˜ä½ éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œé‚£ä¹ˆä½ å°†ä¼šç¢°åˆ°æœ€åä¸€ä¸ªç¼“å­˜æ£€æŸ¥ â€”â€” Push Cacheã€‚ Push Cache å…¶å®æ˜¯ HTTP/2 çš„ Push åŠŸèƒ½æ‰€å¸¦æ¥çš„ã€‚ç®€è¨€ä¹‹ï¼Œè¿‡å»ä¸€ä¸ª HTTP çš„è¯·æ±‚è¿æ¥åªèƒ½ä¼ è¾“ä¸€ä¸ªèµ„æºï¼Œè€Œç°åœ¨ä½ åœ¨è¯·æ±‚ä¸€ä¸ªèµ„æºçš„åŒæ—¶ï¼ŒæœåŠ¡ç«¯å¯ä»¥ä¸ºä½ â€œæ¨é€â€ä¸€äº›å…¶ä»–èµ„æº â€”â€” ä½ å¯èƒ½åœ¨åœ¨ä¸ä¹…çš„å°†æ¥å°±ä¼šç”¨åˆ°ä¸€äº›èµ„æºã€‚ä¾‹å¦‚ï¼Œä½ åœ¨è¯·æ±‚ www.sample.com æ—¶ï¼ŒæœåŠ¡ç«¯ä¸ä»…å‘é€äº†é¡µé¢æ–‡æ¡£ï¼Œè¿˜ä¸€èµ·æ¨é€äº† å…³é”® CSS æ ·å¼è¡¨ã€‚è¿™ä¹Ÿå°±é¿å…äº†æµè§ˆå™¨æ”¶åˆ°å“åº”ã€è§£æåˆ°ç›¸åº”ä½ç½®æ—¶æ‰ä¼šè¯·æ±‚æ‰€å¸¦æ¥çš„å»¶åã€‚ ä¸è¿‡ HTTP/2 Push Cache æ˜¯ä¸€ä¸ªæ¯”è¾ƒåº•å±‚çš„ç½‘ç»œç‰¹æ€§ï¼Œä¸å…¶ä»–çš„ç¼“å­˜æœ‰å¾ˆå¤šä¸åŒï¼Œä¾‹å¦‚ï¼š å½“åŒ¹é…ä¸Šæ—¶ï¼Œå¹¶ä¸ä¼šåœ¨é¢å¤–æ£€æŸ¥èµ„æºæ˜¯å¦è¿‡æœŸï¼› å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œç”šè‡³çŸ­è¿‡å†…å­˜ç¼“å­˜ï¼ˆä¾‹å¦‚æœ‰æ–‡ç« æåˆ°ï¼ŒChrome ä¸­ä¸º 5min å·¦å³ï¼‰ï¼› åªä¼šè¢«ä½¿ç”¨ä¸€æ¬¡ï¼› HTTP/2 è¿æ¥æ–­å¼€å°†å¯¼è‡´ç¼“å­˜ç›´æ¥å¤±æ•ˆï¼› â€¦â€¦ å¦‚æœå¯¹ HTTP/2 Push æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« [5]ã€‚ å¥½äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æ²¡æœ‰å‘å‡ºä¸€ä¸ªçœŸæ­£çš„è¯·æ±‚ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œåœ¨ç¼“å­˜æ£€æŸ¥é˜¶æ®µæˆ‘ä»¬å°±ä¼šæœ‰å¾ˆå¤šæœºä¼šå°†åç»­çš„æ€§èƒ½é—®é¢˜æ‰¼æ€åœ¨æ‘‡ç¯®ä¹‹ä¸­ â€”â€” å¦‚æœè¿œç¨‹è¯·æ±‚éƒ½ä¸å¿…å‘å‡ºï¼Œåˆä½•é¡»ä¼˜åŒ–åŠ è½½æ€§èƒ½å‘¢ï¼Ÿ æ‰€ä»¥ï¼Œå®¡è§†ä¸€ä¸‹æˆ‘ä»¬çš„åº”ç”¨ã€ä¸šåŠ¡ï¼Œçœ‹çœ‹å“ªäº›æ€§èƒ½é—®é¢˜æ˜¯å¯ä»¥åœ¨æºå¤´ä¸Šè§£å†³çš„ã€‚ ä¸è¿‡å¾ˆå¤šæ—¶å€™ï¼Œèƒ½é€šè¿‡ç¼“å­˜è§£å†³çš„é—®é¢˜åªæœ‰ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬ä¼šç»§ç»­è¿™è¶Ÿæ—…è¡Œï¼Œç›®å‰æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¥½çš„å¼€å§‹ï¼Œä¸æ˜¯ä¹ˆï¼Ÿ äºŒã€å‘é€è¯·æ±‚ åœ¨å‰ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä»‹ç»äº†æµè§ˆå™¨ç¼“å­˜ã€‚å½“ä¸€ä¸ªè¯·æ±‚èµ°è¿‡äº†å„çº§å‰ç«¯ç¼“å­˜åï¼Œå°±ä¼šéœ€è¦å®é™…å‘é€ä¸€ä¸ªè¯·æ±‚äº†ã€‚ åœ¨ HTTP ç¼“å­˜ä¸­ï¼Œæˆ‘ä»¬å…¶å®ä¹Ÿæœ‰å‘é€è¯·æ±‚ï¼›æˆ–è€…æ˜¯åœ¨ HTTP/2 Push ä¸‹ï¼Œä½¿ç”¨äº†ä¹‹å‰è¿æ¥ä¸­æ¨é€çš„èµ„æºã€‚ä¸è¿‡ä¸ºäº†ä¿è¯æ€è·¯çš„è¿è´¯ï¼Œæˆ‘è¿˜æ˜¯æŠŠã€Œå‘é€è¯·æ±‚ã€è¿™ä¸ªç« èŠ‚æ•´ä½“æ”¾åœ¨ã€Œç¼“å­˜ã€ä¹‹åäº†ã€‚ ä»‹ç»ç½‘ç»œè¯·æ±‚å…¶å®å¯ä»¥åŒ…å«å¤æ‚çš„ç½‘ç»œçŸ¥è¯†ã€‚ä¸è¿‡ï¼Œä»Šå¤©å’±ä»¬çš„æ—…ç¨‹ä¸»è¦èšç„¦äºâ€œå‰ç«¯æ€§èƒ½ä¼˜åŒ–â€ã€‚å› æ­¤ï¼Œä¸»è¦ä¼šä»‹ç»ä¸€äº›åœ¨è¿™ä¸ªç¯èŠ‚ä¸­ï¼Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–å¯èƒ½ä¼šåšçš„äº‹å„¿ã€‚ 1. é¿å…å¤šä½™é‡å®šå‘ é‡å®šå‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½è¿›è¡Œäº†æœåŠ¡è¿ç§»ï¼Œä¿®æ”¹äº†åŸæœ‰çš„ uriã€‚è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨é‡å®šå‘ï¼ŒæŠŠè®¿é—®åŸç½‘å€çš„ç”¨æˆ·é‡å®šå‘åˆ°æ–°çš„ uriã€‚è¿˜æœ‰æ˜¯åœ¨ä¸€äº›ç™»å½•åœºæ™¯ä¸‹ï¼Œä¼šä½¿ç”¨åˆ°é‡å®šå‘æŠ€æœ¯ã€‚ é‡å®šå‘åˆ†ä¸º 301 çš„æ°¸ä¹…é‡å®šå‘å’Œ 302 çš„ä¸´æ—¶é‡å®šå‘ã€‚å»ºè®®è´´åˆè¯­ä¹‰ï¼Œä¾‹å¦‚æœåŠ¡è¿ç§»çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ 301 é‡å®šå‘ã€‚å¯¹ SEO ä¹Ÿä¼šæ›´å‹å¥½ã€‚ åŒæ—¶ä¹Ÿä¸è¦æ»¥ç”¨é‡å®šå‘ã€‚æ›¾ä»Šä¹Ÿè§è¿‡æœ‰ä¸šåŠ¡åœ¨è®¿é—®åé‡å®šå‘ 3 æ¬¡çš„æƒ…å†µï¼Œå…¶å®é‡Œé¢æœ‰äº›æ˜¯ä¸å¿…è¦çš„ã€‚æ¯æ¬¡é‡å®šå‘éƒ½æ˜¯æœ‰è¯·æ±‚è€—æ—¶çš„ï¼Œå»ºè®®é¿å…è¿‡å¤šçš„é‡å®šå‘ã€‚ 2. DNS é¢„è§£æ åŸºæœ¬æˆ‘ä»¬è®¿é—®è¿œç¨‹æœåŠ¡çš„æ—¶å€™ï¼Œä¸ä¼šç›´æ¥ä½¿ç”¨æœåŠ¡çš„å‡ºå£ IPï¼Œè€Œæ˜¯ä½¿ç”¨åŸŸåã€‚æ‰€ä»¥è¯·æ±‚çš„ä¸€ä¸ªé‡è¦ç¯èŠ‚å°±æ˜¯åŸŸåè§£æã€‚ DNS æœåŠ¡æœ¬èº«æ˜¯ä¸€ä¸ªæ ‘çŠ¶å±‚çº§ç»“æ„ï¼Œå…¶è§£ææ˜¯ä¸€ä¸ªé€’å½’ä¸è¿­ä»£çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ github.com çš„å¤§è‡´è§£ææµç¨‹å¦‚ä¸‹ï¼š å…ˆæ£€æŸ¥æœ¬åœ° hosts æ–‡ä»¶ä¸­æ˜¯å¦æœ‰æ˜ å°„ï¼Œæœ‰åˆ™ä½¿ç”¨ï¼› æŸ¥æ‰¾æœ¬åœ° DNS ç¼“å­˜ï¼Œæœ‰åˆ™è¿”å›ï¼› æ ¹æ®é…ç½®åœ¨ TCP/IP å‚æ•°ä¸­è®¾ç½® DNS æŸ¥è¯¢æœåŠ¡å™¨ï¼Œå¹¶å‘å…¶è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™é‡Œå…ˆç§°ä¸ºæœ¬åœ° DNSï¼› å¦‚æœè¯¥æœåŠ¡å™¨æ— æ³•è§£æåŸŸåï¼ˆæ²¡æœ‰ç¼“å­˜ï¼‰ï¼Œä¸”ä¸éœ€è¦è½¬å‘ï¼Œåˆ™ä¼šå‘æ ¹æœåŠ¡å™¨è¯·æ±‚ï¼› æ ¹æœåŠ¡å™¨æ ¹æ®åŸŸåç±»å‹åˆ¤æ–­å¯¹åº”çš„é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼ˆ.comï¼‰ï¼Œè¿”å›ç»™æœ¬åœ° DNSï¼Œç„¶åé‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥åŸŸåï¼› å½“ç„¶ï¼Œå¦‚æœè®¾ç½®äº†è½¬å‘ï¼Œæœ¬åœ° DNS ä¼šå°†è¯·æ±‚é€çº§è½¬å‘ï¼Œç›´åˆ°è½¬å‘æœåŠ¡å™¨è¿”å›æˆ–è€…ä¹Ÿä¸èƒ½è§£æã€‚ æ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« [1]ã€‚ è¿™é‡Œæˆ‘ä»¬éœ€è¦äº†è§£çš„æ˜¯ï¼š é¦–å…ˆï¼ŒDNS è§£ææµç¨‹å¯èƒ½ä¼šå¾ˆé•¿ï¼Œè€—æ—¶å¾ˆé«˜ï¼Œæ‰€ä»¥æ•´ä¸ª DNS æœåŠ¡ï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯éƒ½ä¼šæœ‰ç¼“å­˜æœºåˆ¶ï¼Œè¿™ä¸ªä½œä¸ºå‰ç«¯ä¸å¥½æ¶‰å…¥ï¼› å…¶æ¬¡ï¼Œåœ¨ DNS è§£æä¸Šï¼Œå‰ç«¯è¿˜æ˜¯å¯ä»¥é€šè¿‡æµè§ˆå™¨æä¾›çš„å…¶ä»–æ‰‹æ®µæ¥â€œåŠ é€Ÿâ€çš„ã€‚ DNS Prefetch[2] å°±æ˜¯æµè§ˆå™¨æä¾›ç»™æˆ‘ä»¬çš„ä¸€ä¸ª APIã€‚å®ƒæ˜¯ Resource Hint çš„ä¸€éƒ¨åˆ†ã€‚å®ƒå¯ä»¥å‘Šè¯‰æµè§ˆå™¨ï¼šè¿‡ä¼šæˆ‘å°±å¯èƒ½è¦å» yourwebsite.com ä¸Šä¸‹è½½ä¸€ä¸ªèµ„æºå•¦ï¼Œå¸®æˆ‘å…ˆè§£æä¸€ä¸‹åŸŸåå§ã€‚è¿™æ ·ä¹‹åç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®ï¼Œè§¦å‘äº† yourwebsite.com åŸŸåä¸‹çš„è¿œç¨‹è¯·æ±‚æ—¶ï¼Œå°±ç•¥å»äº† DNS è§£æçš„æ­¥éª¤ã€‚ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼š 1å½“ç„¶ï¼Œæµè§ˆå™¨å¹¶ä¸ä¿è¯ä¸€å®šä¼šå»è§£æåŸŸåï¼Œå¯èƒ½ä¼šæ ¹æ®å½“å‰çš„ç½‘ç»œã€è´Ÿè½½ç­‰çŠ¶å†µåšå†³å®šã€‚æ ‡å‡†é‡Œä¹Ÿæ˜ç¡®å†™äº†ğŸ‘‡ user agent SHOULD resolve as early as possible 3. é¢„å…ˆå»ºç«‹è¿æ¥ æˆ‘ä»¬çŸ¥é“ï¼Œå»ºç«‹è¿æ¥ä¸ä»…éœ€è¦ DNS æŸ¥è¯¢ï¼Œè¿˜éœ€è¦è¿›è¡Œ TCP åè®®æ¡æ‰‹ï¼Œæœ‰äº›è¿˜ä¼šæœ‰ TLS/SSL åè®®ï¼Œè¿™äº›éƒ½ä¼šå¯¼è‡´è¿æ¥çš„è€—æ—¶ã€‚ä½¿ç”¨ Preconnect[3] å¯ä»¥å¸®åŠ©ä½ å‘Šè¯‰æµè§ˆå™¨ï¼šâ€œæˆ‘æœ‰ä¸€äº›èµ„æºä¼šç”¨åˆ°æŸä¸ªæºï¼ˆoriginï¼‰ï¼Œä½ å¯ä»¥å¸®æˆ‘é¢„å…ˆå»ºç«‹è¿æ¥ã€‚â€ æ ¹æ®è§„èŒƒï¼Œå½“ä½ ä½¿ç”¨ Preconnect æ—¶ï¼Œæµè§ˆå™¨å¤§è‡´åšäº†å¦‚ä¸‹å¤„ç†ï¼š é¦–å…ˆï¼Œè§£æ Preconnect çš„ urlï¼› å…¶æ¬¡ï¼Œæ ¹æ®å½“å‰ link å…ƒç´ ä¸­çš„å±æ€§è¿›è¡Œ cors çš„è®¾ç½®ï¼› ç„¶åï¼Œé»˜è®¤å…ˆå°† credential è®¾ä¸º trueï¼Œå¦‚æœ cors ä¸º Anonymous å¹¶ä¸”å­˜åœ¨è·¨åŸŸï¼Œåˆ™å°† credential ç½®ä¸º falseï¼› æœ€åï¼Œè¿›è¡Œè¿æ¥ã€‚ ä½¿ç”¨ Preconnect åªéœ€è¦å°† rel å±æ€§è®¾ä¸º preconnect å³å¯ï¼š å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½® CORSï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ ‡å‡†å¹¶æ²¡æœ‰ç¡¬æ€§è§„å®šæµè§ˆå™¨ä¸€å®šè¦ï¼ˆè€Œæ˜¯ SHOULDï¼‰å®Œæˆæ•´ä¸ªè¿æ¥è¿‡ç¨‹ï¼Œä¸ DNS Prefetch ç±»ä¼¼ï¼Œæµè§ˆå™¨å¯ä»¥è§†æƒ…å†µå®Œæˆéƒ¨åˆ†å·¥ä½œã€‚ 4. ä½¿ç”¨ CDN å½“æˆ‘ä»¬å®é™…æŠŠç½‘ç»œåŒ…å‘å‘æˆ‘ä»¬çš„ç›®æ ‡åœ°å€æ—¶ï¼Œè‚¯å®šå¸Œæœ›è¶Šå¿«åˆ°è¾¾ç›®çš„åœ°è¶Šå¥½ï¼ˆå¯¹åº”çš„ï¼Œä¹Ÿä¼šå¸Œæœ›è¶Šå¿«è·å¾—å“åº”ï¼‰ã€‚è€Œç½‘ç»œä¼ è¾“æ˜¯æœ‰æé™çš„ï¼ŒåŒæ ·ä¸€ä¸ªåŒ—äº¬çš„ç”¨æˆ·ï¼Œè®¿é—®åŒ—äº¬çš„æœåŠ¡å™¨æ˜¾ç„¶è¦æ¯”å¹¿å·å¿«å¾ˆå¤šã€‚åŒæ—¶ï¼ŒæœåŠ¡çš„è´Ÿè½½ä¹Ÿä¼šå½±å“å“åº”çš„é€Ÿåº¦ã€‚ å¯¹äºé™æ€èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é€šè¿‡ CDN æ¥é™ä½æ—¶å»¶ã€‚ å¯¹äºä½¿ç”¨ CDN çš„èµ„æºï¼ŒDNS è§£æä¼šå°† CDN èµ„æºçš„åŸŸåè§£æåˆ° CDN æœåŠ¡çš„è´Ÿè½½å‡è¡¡å™¨ä¸Šï¼Œè´Ÿè½½å‡è¡¡å™¨å¯ä»¥é€šè¿‡è¯·æ±‚çš„ä¿¡æ¯è·å–ç”¨æˆ·å¯¹åº”çš„åœ°ç†åŒºåŸŸï¼Œä»è€Œé€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåœ¨èƒŒåçš„è¯¸å¤šæœåŠ¡å™¨ä¸­ï¼Œç»¼åˆé€‰æ‹©ä¸€å°åœ°ç†ä½ç½®è¿‘ã€è´Ÿè½½ä½çš„æœºå™¨æ¥æä¾›æœåŠ¡ã€‚ä¾‹å¦‚ä¸ºåŒ—äº¬è”é€šç”¨æˆ·è§£æåŒ—äº¬çš„æœåŠ¡å™¨ IPã€‚è¿™æ ·ï¼Œç”¨æˆ·åœ¨ä¹‹åè®¿é—® CDN èµ„æºæ—¶éƒ½æ˜¯è®¿é—®åŒ—äº¬æœåŠ¡å™¨ï¼Œè·ç¦»è¿‘ï¼Œé€Ÿåº¦å¿«ã€‚ æƒ³äº†è§£æ›´å¤š CDN çš„å·¥ä½œæ–¹å¼å¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« [4]ã€‚ ä¸‹å›¾æ˜¯è¯·æ±‚å£°æ˜å‘¨æœŸä¸­å„ä¸ªé˜¶æ®µçš„ç¤ºæ„å›¾ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£å‘é€è¯·æ±‚ï¼ˆä»¥åŠæ¥æ”¶å“åº”ï¼‰çš„æµç¨‹ã€‚ åœ¨ç¼“å­˜æ²¡æ³•æ»¡è¶³æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå°±è¦å¼€å§‹çœŸæ­£å‘é€è¯·æ±‚äº†ã€‚ä»å‰ç«¯æ€§èƒ½ä¼˜åŒ–è§†è§’ï¼Œæˆ‘ä»¬ä¼šå…³æ³¨é‡å®šå‘ã€DNS è§£æç­‰é—®é¢˜ï¼Œä»è€ŒåŠ é€Ÿè¯·æ±‚ã€‚ä½†è¿™å—è¿˜é¢„ç•™äº†ä¸€å°éƒ¨åˆ† â€”â€” æœåŠ¡ç«¯çš„å¤„ç†ä¸å“åº”ã€‚ è¿‡å»ï¼Œæˆ‘ä»¬ä¼šå°†å‰ç«¯å±€é™åœ¨æµè§ˆå™¨ä¸­ï¼Œä½†æ˜¯éšç€ NodeJS çš„å…´èµ·ï¼Œå¾ˆå¤šä¸šåŠ¡éƒ½å¼•å…¥äº†åŸºäº NodeJS çš„ BFF æ¥ä¸ºå‰ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰æä¾›æœåŠ¡ã€‚æ‰€ä»¥å’±ä»¬è¿™æ¬¡çš„æ—…ç¨‹ä¹Ÿä¼šç®€å•èŠä¸€ä¸‹ï¼Œåœ¨è¿™ä¸€é˜¶æ®µå¯ä»¥åšçš„ä¸€äº›ä¼˜åŒ–ã€‚ ä¸‰ã€æœåŠ¡ç«¯å“åº” æŠŠè¿™ä¸€éƒ¨åˆ†æ”¾è¿›å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¹¶ä¸æ˜¯å¾ˆä¸¥è°¨ï¼š å…¶ä¸€ï¼ŒæœåŠ¡ç«¯æœ‰ç€æœåŠ¡ç«¯çš„é€šç”¨æŠ€æœ¯æ‰‹æ®µï¼Œè¿™å—æ·±å…¥å»ç ”ç©¶ï¼Œä¼šæ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„é¢†åŸŸï¼› å…¶äºŒï¼Œæˆ‘ä»¬æ—¢ç„¶åœ¨è®¨è®ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œè¿™éƒ¨åˆ†ä¸»è¦è¿˜æ˜¯æŒ‡ NodeJSï¼Œä½†ä¸æ˜¯æ‰€æœ‰ä¸šåŠ¡éƒ½ä½¿ç”¨ NodeJSã€‚ æ‰€ä»¥è¿™é‡Œåªä¼šæä¸€äº›å®è·µä¸­ç¢°åˆ°çš„å°ç‚¹ï¼Œè¾…ä»¥ä¸€äº›æ‹“å±•é˜…è¯»ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æŠ›ç –å¼•ç‰ï¼Œå¼€æ‹“æ€ç»´ã€‚ 1. ä½¿ç”¨æµè¿›è¡Œå“åº” ç›®å‰ï¼Œç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒæ ¹æ®æµçš„è¿”å›å½¢å¼æ¥é€æ­¥è¿›è¡Œé¡µé¢å†…å®¹çš„è§£æã€å¤„ç†ã€‚è¿™å°±æ„å‘³ç€ï¼Œå³ä½¿è¯·æ±‚çš„å“åº”æ²¡æœ‰å®Œå…¨ç»“æŸï¼Œæµè§ˆå™¨ä¹Ÿå¯ä»¥ä»æ‰‹é‡Œå·²æœ‰çš„å“åº”ç»“æœä¸­è¿›è¡Œé¡µé¢çš„è§£æä¸æ¸²æŸ“ã€‚ ä¾‹å¦‚ css-only-chat-node å°±åˆ©ç”¨äº†è¿™ä¸ªç‰¹ç‚¹æ¥å®ç°æ— åˆ·æ–°ã€æ—  JavaScript çš„é¡µé¢æ›´æ–°ã€‚ 2. ä¸šåŠ¡èšåˆ BFF éå¸¸åˆé€‚åšçš„ä¸€ä»¶äº‹å°±æ˜¯åç«¯æœåŠ¡çš„èšåˆã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªä¸¤ä¸ªæ¥å£æœåŠ¡ï¼šç¬¬ä¸€ä¸ªæœåŠ¡æ˜¯å…ˆè·å–äº§å“ä¿¡æ¯ï¼Œå†æ ¹æ®äº§å“ä¿¡æ¯ä¸­çš„ä¸Šæ¶æ—¶é—´é€šè¿‡ç¬¬äºŒä¸ªæœåŠ¡è·å–è¯¥æ—¶é—´åçš„äº§å“åˆ—è¡¨ã€‚è¿™ä¸ªä¸šåŠ¡é€»è¾‘å¦‚æœæ”¾åœ¨å‰ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å¤„ç†å°†ä¼šä¸²è¡Œå‘é€ä¸¤ä¸ªè¯·æ±‚ã€‚å‡è®¾æ¯ä¸ªè¯·æ±‚ 200msï¼Œé‚£ä¹ˆå°±éœ€è¦ç­‰å¾… 400msã€‚å¦‚æœå¼•å…¥ NodeJSï¼Œè¿™ä¸€å±‚å¯ä»¥æ”¾åœ¨ NodeJS ä¸­å®ç°ã€‚NodeJS éƒ¨ç½²çš„ä½ç½®ä¸€èˆ¬ç¦»å…¶ä»–åç«¯æœåŠ¡â€œæ›´è¿‘â€ï¼Œä¾‹å¦‚åŒä¸€ä¸ªå±€åŸŸç½‘ã€‚è¿™ç±»æœåŠ¡é—´çš„è¯·æ±‚è€—æ—¶æ˜¾ç„¶æ›´ä½ï¼Œå¯èƒ½åªéœ€è¦ 200(æµè§ˆå™¨) + 30(NodeJS) * 2 = 260msã€‚ æ­¤å¤–ï¼Œå¦‚æœä¸€ä¸ªä¸šåŠ¡éœ€è¦åœ¨å‰ç«¯å¹¶å‘ä¸‰ã€å››ä¸ªè¯·æ±‚æ¥è·å–å®Œæ•´æ•°æ®ï¼Œé‚£ä¹ˆæ”¾åœ¨ NodeJS çš„ BFF å±‚ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ 3. é¿å…ä»£ç é—®é¢˜ ä»£ç é—®é¢˜å…¶å®å°±éå¸¸ç»†èŠ‚äº†ã€‚ç®€å•åˆ—ä¸¾ä¸€äº›å¸¸è§çš„é—®é¢˜ï¼š async await çš„ä¸å½“ä½¿ç”¨å¯¼è‡´å¹¶è¡Œè¯·æ±‚è¢«ä¸²è¡ŒåŒ–äº†ï¼› é¢‘ç¹åœ° JSON.parse å’Œ JSON.stringify å¤§å¯¹è±¡ï¼› æ­£åˆ™è¡¨è¾¾å¼çš„ç¾éš¾æ€§å›æº¯ï¼› é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼› CPU å¯†é›†å‹ä»»åŠ¡å¯¼è‡´äº‹ä»¶å¾ªç¯ delay ä¸¥é‡ï¼› æœªæ•è·çš„å¼‚å¸¸å¯¼è‡´è¿›ç¨‹é¢‘ç¹é€€å‡ºï¼Œå®ˆæŠ¤è¿›ç¨‹ï¼ˆpm2/supervisorï¼‰åˆå°†è¿›ç¨‹é‡å¯ï¼Œè¿™ç§é¢‘ç¹çš„å¯åœä¹Ÿä¼šæ¯”è¾ƒæ¶ˆè€—èµ„æºï¼› â€¦â€¦ ã€Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€åœ¨è¿™ä¸€é˜¶æ®µåªèƒ½èœ»èœ“ç‚¹æ°´äº†ã€‚NodeJS ä½œä¸º BFF è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œæ‰€ä»¥åœ¨æ—…é€”ä¸­ä¹Ÿæäº†ä¸€ä¸‹ã€‚ä¸‹é¢æˆ‘ä»¬å°±è¦é‡æ–°å›åˆ°å‰ç«¯é¢†åŸŸäº†ï¼Œå‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ å››ã€é¡µé¢è§£æä¸å¤„ç† åœ¨ä¸Šä¸€ç«™ä¸­ï¼Œæˆ‘ä»¬ç®€å•ä»‹ç»äº†æœåŠ¡ç«¯å¤„ç†ä¸å“åº”ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»ç»å†äº†å¾ˆå¤šç¯èŠ‚ï¼Œä¹Ÿå·²ç»æœ‰äº†è®¸å¤šã€Œæ€§èƒ½ä¼˜åŒ–çš„æ­¦å™¨ã€ã€‚åƒæ˜¯ åˆ©ç”¨å„çº§ç¼“å­˜è¿›è¡Œä¼˜åŒ– æå‰è¿›è¡Œ DNS æŸ¥è¯¢æˆ–å»ºç«‹è¿æ¥ç­‰æ–¹å¼åŠ é€Ÿè¯·æ±‚ åœ¨æœåŠ¡ç«¯é¿å…ä¸å¿…è¦çš„è€—æ—¶ â€¦â€¦ ä¸è¿‡ï¼Œä¸è¦æ‰ä»¥è½»å¿ƒï¼Œåç»­ä»ç„¶æœ‰å¤§é‡çš„å·¥ä½œç­‰å¾…æˆ‘ä»¬æ¥ä¼˜åŒ–ã€‚ä¸‹é¢å°±åˆ°äº†å®¢æˆ·ç«¯æ¥æ”¶å“åº”çš„é˜¶æ®µäº†ã€‚ ä¸»è¦å·¥ä½œ è¿™ä¸€é˜¶æ®µæµè§ˆå™¨éœ€è¦å¤„ç†çš„ä¸œè¥¿å¾ˆå¤šï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä»¬ä¸»è¦å°†å…¶åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼š é¡µé¢ DOM çš„è§£æï¼› é¡µé¢é™æ€èµ„æºçš„åŠ è½½ï¼ŒåŒ…æ‹¬äº†é¡µé¢å¼•ç”¨çš„ JavaScript/CSS/å›¾ç‰‡/å­—ä½“ç­‰ï¼› é™æ€èµ„æºçš„è§£æä¸å¤„ç†ï¼Œåƒæ˜¯ JavaScript çš„æ‰§è¡Œã€CSSOM çš„æ„å»ºä¸æ ·å¼åˆæˆç­‰ï¼› å¤§è‡´è¿‡ç¨‹å°±æ˜¯è§£æé¡µé¢ DOM ç»“æ„ï¼Œé‡åˆ°å¤–éƒ¨èµ„æºå°±åŠ è½½ï¼ŒåŠ è½½å¥½äº†å°±ä½¿ç”¨ã€‚ä½†æ˜¯ç”±äºè¿™éƒ¨åˆ†çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åœ¨è¿™ä¸€èŠ‚é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨é¡µé¢çš„è§£æï¼ˆå…¶ä»–éƒ¨åˆ†åœ¨å†™ä¸€èŠ‚ä¸­ä»‹ç»ï¼‰ã€‚ 1. æ³¨æ„èµ„æºåœ¨é¡µé¢æ–‡æ¡£ä¸­çš„ä½ç½® æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ”¶åˆ°å†…å®¹å°±å°½å¿«è§£æå¤„ç†ï¼Œé¡µé¢æœ‰ä¾èµ–çš„èµ„æºå°±å°½å¿«å‘é€è¯·æ±‚ï¼Œæ”¶åˆ°å“åº”åˆ™å°½å¿«å¤„ç†ã€‚ç„¶è€Œï¼Œè¿™ä¸ªç¾å¥½çš„ç›®æ ‡ä¹Ÿæœ‰å¯èƒ½ä¼šè¢«æˆ‘ä»¬ä¸å°å¿ƒç ´åã€‚ JavaScript è„šæœ¬å’Œ CSS æ ·å¼è¡¨åœ¨å…³äº DOM å…ƒç´ çš„å±æ€§ï¼Œå°¤å…¶æ˜¯æ ·å¼å±æ€§ä¸Šéƒ½æœ‰æ“ä½œçš„æƒåˆ©ã€‚è¿™å°±åƒæ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹é—®é¢˜ã€‚æœåŠ¡ç«¯å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ç»å¸¸é€šè¿‡é”æ¥ä¿è¯çº¿ç¨‹é—´çš„äº’æ–¥ã€‚å›åˆ°å’±ä»¬çš„å‰ç«¯ï¼Œç°åœ¨ä¹Ÿæ˜¯ä¸¤æ–¹åœ¨ç«äº‰åŒä¸€ä¸ªèµ„æºï¼Œæ˜¾ç„¶ä¹Ÿæ˜¯ä¼šæœ‰äº’æ–¥çš„é—®é¢˜ã€‚è¿™å°±å¸¦æ¥äº† DOM è§£æã€JavaScript åŠ è½½ä¸æ‰§è¡Œã€CSS åŠ è½½ä¸ä½¿ç”¨ä¹‹é—´çš„ä¸€äº›äº’æ–¥å…³ç³»ã€‚ ä»…ä»…çœ‹ DOM ä¸ CSS çš„å…³ç³»ï¼Œåˆ™å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š HTML è§£æä¸º DOM Treeï¼ŒCSS è§£æä¸º CSSOMï¼Œä¸¤è€…å†åˆæˆ Render Treeï¼Œå¹¶è¡Œæ‰§è¡Œï¼Œéå¸¸å®Œç¾ã€‚ç„¶è€Œï¼Œå½“ JavaScript å…¥åœºä¹‹åï¼Œå±€é¢å°±å˜äº†ï¼š æ ¹æ®æ ‡å‡†è§„èŒƒï¼Œåœ¨ JavaScript ä¸­å¯ä»¥è®¿é—® DOMã€‚å› æ­¤å½“é‡åˆ° JavaScript åä¼šé˜»å¡ DOM çš„è§£æã€‚äºæ­¤åŒæ—¶ï¼Œä¸ºé¿å… CSS ä¸ JavaScript ä¹‹é—´çš„ç«æ€ï¼ŒCSSOM çš„æ„å»ºä¼šé˜»å¡ JavaScript çš„è„šæœ¬æ‰§è¡Œã€‚æ€»ç»“èµ·æ¥å°±æ˜¯ â€”â€” JavaScript ä¼šé˜»å¡ DOM æ„å»ºï¼Œè€Œ CSSOM çš„æ„å»ºåˆå›é˜»å¡ JavaScript çš„æ‰§è¡Œã€‚ æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ä¼˜åŒ–çš„æœ€ä½³å®è·µä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬éƒ½æ¨èæŠŠ CSS æ ·å¼è¡¨æ”¾åœ¨ ä¹‹ä¸­ï¼ˆå³é¡µé¢çš„å¤´éƒ¨ï¼‰ï¼ŒæŠŠ JavaScript è„šæœ¬æ”¾åœ¨ çš„æœ€åï¼ˆå³é¡µé¢çš„å°¾éƒ¨ï¼‰ã€‚ å…³äºè¿™éƒ¨åˆ†çš„ä¸€äº›è§£é‡Šå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« [1]ã€‚ 2. ä½¿ç”¨ defer å’Œ async ä¸Šé¢æåˆ°äº†ï¼Œå½“ DOM è§£æé‡åˆ° JavaScript è„šæœ¬æ—¶ï¼Œä¼šåœæ­¢è§£æï¼Œå¼€å§‹ä¸‹è½½è„šæœ¬å¹¶æ‰§è¡Œï¼Œå†æ¢å¤è§£æï¼Œç›¸å½“äºæ˜¯é˜»å¡äº† DOM æ„å»ºã€‚ é‚£é™¤äº†å°†è„šæœ¬æ”¾åœ¨ body çš„æœ€åï¼Œè¿˜æœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•ä¹ˆï¼Ÿæ˜¯æœ‰çš„ã€‚ å¯ä»¥ä½¿ç”¨ defer æˆ– async å±æ€§ã€‚ä¸¤è€…éƒ½ä¼šé˜²æ­¢ JavaScript è„šæœ¬çš„ä¸‹è½½é˜»å¡ DOM æ„å»ºã€‚ä½†æ˜¯ä¸¤è€…ä¹Ÿæœ‰åŒºåˆ«ï¼Œæœ€ç›´è§‚çš„è¡¨ç°å¦‚ä¸‹ï¼š defer ä¼šåœ¨ HTML è§£æå®Œæˆåï¼ŒæŒ‰ç…§è„šæœ¬å‡ºç°çš„æ¬¡åºå†é¡ºåºæ‰§è¡Œï¼›è€Œ async åˆ™æ˜¯ä¸‹è½½å®Œæˆå°±ç«‹å³å¼€å§‹æ‰§è¡Œï¼ŒåŒæ—¶é˜»å¡é¡µé¢è§£æï¼Œä¸ä¿è¯è„šæœ¬é—´çš„æ‰§è¡Œé¡ºåºã€‚ æ ¹æ®å®ƒä»¬çš„ç‰¹ç‚¹ï¼Œæ¨èåœ¨ä¸€äº›ä¸ä¸»ä¸šåŠ¡æ— å…³çš„ JavaScript è„šæœ¬ä¸Šä½¿ç”¨ asyncã€‚ä¾‹å¦‚ç»Ÿè®¡è„šæœ¬ã€ç›‘æ§è„šæœ¬ã€å¹¿å‘Šè„šæœ¬ç­‰ã€‚è¿™äº›è„šæœ¬ä¸€èˆ¬éƒ½æ˜¯ä¸€ä»½ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œä¸éœ€è¦è®¿é—® DOMï¼Œä¹Ÿä¸éœ€è¦æœ‰ä¸¥æ ¼çš„æ‰§è¡Œæ—¶æœºé™åˆ¶ã€‚åœ¨è¿™äº›è„šæœ¬ä¸Šä½¿ç”¨ async å¯ä»¥æœ‰æ•ˆé¿å…è¿™äº›éæ ¸å¿ƒåŠŸèƒ½çš„åŠ è½½å½±å“é¡µé¢è§£æé€Ÿåº¦ã€‚ 3. é¡µé¢æ–‡æ¡£å‹ç¼© HTML çš„æ–‡æ¡£å¤§å°ä¹Ÿä¼šæå¤§å½±å“å“åº”ä½“ä¸‹è½½çš„æ—¶é—´ã€‚ä¸€èˆ¬ä¼šè¿›è¡Œ HTML å†…å®¹å‹ç¼©ï¼ˆuglifyï¼‰çš„åŒæ—¶ï¼Œä½¿ç”¨æ–‡æœ¬å‹ç¼©ç®—æ³•ï¼ˆä¾‹å¦‚ gzipï¼‰è¿›è¡Œæ–‡æœ¬çš„å‹ç¼©ã€‚å…³äºèµ„æºå‹ç¼©è¿™ä¸€å—ï¼Œåœ¨ä¸‹ä¸€èŠ‚çš„å†…å®¹ä¸­è¿˜ä¼šå†è¯¦ç»†è¿›è¡Œä»‹ç»ã€‚ è¯´ä¸€å¥é¢˜å¤–è¯ï¼Œä½ çŸ¥é“ä¸é¡µé¢è§£æå¯†åˆ‡ç›¸å…³çš„ DOMContentLoaded äº‹ä»¶ä½•æ—¶ä¹ˆï¼Ÿinteractive/complete ç­‰ readyState å…·ä½“ä»£è¡¨ä»€ä¹ˆä¹ˆï¼Ÿå¦‚æœä¸å¤ªäº†è§£å¯ä»¥ä»HTML spec[2]é‡Œçœ‹ã€‚ ç”¨åŸè¯æ¥è¯´å°±æ˜¯ï¼š Returns \"loading\" while the Document is loading, \"interactive\" once it is finished parsing but still loading subresources, and \"complete\" once it has loaded. The readystatechange event fires on the Document object when this value changes. The DOMContentLoaded event fires after the transition to \"interactive\" but before the transition to \"complete\", at the point where all subresources apart from async script elements have loaded. å¥½äº†ï¼Œåœ¨è¿™ä¸€ç«™æˆ‘ä»¬åˆäº†è§£äº†é¡µé¢çš„è§£æè¿‡ç¨‹åŠå…¶æ€§èƒ½ä¼˜åŒ–ã€‚ æ­£å¦‚å¼€å¤´æ‰€è¯´ï¼Œå…¶å®è§£æé¡µé¢ã€åŠ è½½èµ„æºã€ä½¿ç”¨èµ„æºæ˜¯ä¸‰ä¸ªç´§å¯†ç›¸å…³çš„è¿‡ç¨‹ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦ç€çœ¼äºé¡µé¢çš„è§£æï¼Œè€Œåœ¨ã€Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€çš„ä¸‹ä¸€ç«™ï¼Œæˆ‘ä»¬åˆ™ä¼šä¸€èµ·æ¥æ¶‰è¶³åˆ°è¿™éƒ¨åˆ†çš„å…¶ä»–è¯¸å¤šä¼˜åŒ–ç‚¹ä¸­ã€‚ äº”ã€é¡µé¢é™æ€èµ„æº åœ¨æ—…ç¨‹çš„ä¸Šä¸€ç«™ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†åŸºæœ¬çš„é¡µé¢è§£ææœºåˆ¶ï¼Œé€šè¿‡å¯¹èµ„æºåŠ è½½é¡ºåºå’Œè„šæœ¬åŠ è½½çš„æ§åˆ¶ï¼Œé¿å…äº†æ— è°“çš„é˜»å¡ï¼Œä¼˜åŒ–äº†è§£ææ€§èƒ½ã€‚ ä¹Ÿæ­£å¦‚ä¸Šä¸€ç«™ä¸­æ‰€è¯´ï¼Œè¿™æ—¶æµè§ˆå™¨é™¤äº†è§£æé¡µé¢ DOM å¤–ï¼Œè¿˜ä¼šå¯¹é¡µé¢åŒ…å«çš„é™æ€èµ„æºå‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚å›æ¥åä¼šæ‰§è¡Œæˆ–ä½¿ç”¨èµ„æºã€‚è¿™ä¸€ç«™å’±ä»¬å°±æ¥å…·ä½“çœ‹çœ‹è¿™ä¸ªé˜¶æ®µã€‚ é¦–å…ˆè¿˜æ˜¯ä»å®è§‚ä¸Šæ¥äº†è§£ä¸€ä¸‹ï¼š 1. æ€»ä½“åŸåˆ™ è¿™ä¸€éƒ¨åˆ†ä¼šæ¶‰åŠåˆ°å„ç±»å¸¸è§çš„é™æ€èµ„æºï¼šJavaScript è„šæœ¬ã€CSS æ ·å¼è¡¨ã€å›¾ç‰‡ã€å­—ä½“ç­‰ã€‚ä¸åŒèµ„æºçš„ä¼˜åŒ–æªæ–½æ—¢æœ‰è”ç³»åˆæœ‰å·®åˆ«ï¼Œåç»­ä¼šä»¥å„ç±»èµ„æºä¸ºç»´åº¦ï¼Œé’ˆå¯¹æ€§ä»‹ç»å…¶ä¼˜åŒ–çš„å…³æ³¨ç‚¹å’Œæ‰‹æ®µã€‚ ä½†å’±ä»¬è¿˜æ˜¯è¦å…ˆä»æ•´ä½“ç»´åº¦ä¸Šè¿›è¡Œä¸€äº›åˆ†æã€‚å…¶å®åœ¨æ€»ä½“åŸåˆ™ä¸Šï¼Œå„ç±»èµ„æºçš„ä¼˜åŒ–æ€è·¯éƒ½æ˜¯å¤§ä½“ç±»ä¼¼çš„ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ å‡å°‘åŒ…ä½“å¤§å° é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€— åˆ©ç”¨ç¼“å­˜ ä¸ºäº†å¤§å®¶èƒ½æ›´å¥½ç†è§£å„ç±»ä¼˜åŒ–å®æ–½ç­–ç•¥ä»ä½•è€Œæ¥ï¼Œå…ˆåˆæ­¥æ‰©å±•ä¸€ä¸‹ä»¥ä¸Šçš„æ€è·¯ã€‚ 1.1. å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ æ ¸å¿ƒæ˜¯å¸Œæœ›èƒ½å¤Ÿå‡å°‘è¯·æ±‚çš„æ•°é‡ï¼Œå› ä¸ºæµè§ˆå™¨å¯¹åŒæºè¯·æ±‚æœ‰å¹¶å‘ä¸Šé™çš„é™åˆ¶ï¼ˆä¾‹å¦‚ Chrome æ˜¯6ï¼‰ï¼Œæ‰€ä»¥åœ¨ HTTP/1.1 ä¸‹ï¼Œè¯·æ±‚è¿‡å¤šå¯èƒ½ä¼šå¯¼è‡´è¯·æ±‚è¢«æ’é˜Ÿäº†ã€‚ä¸€ä¸ªå…¸å‹åœºæ™¯å°±æ˜¯ä¸€äº›å›¾åº“ç±»å‹çš„ç½‘ç«™ï¼Œé¡µé¢åŠ è½½åå¯èƒ½éœ€è¦è¯·æ±‚åæ•°å¼ å›¾ç‰‡ã€‚ åŒæ—¶ï¼ŒTCP/IP çš„æ‹¥å¡æ§åˆ¶ä¹Ÿä½¿å…¶ä¼ è¾“æœ‰æ…¢å¯åŠ¨ï¼ˆslow startï¼‰çš„ç‰¹ç‚¹ï¼Œè¿æ¥åˆšå»ºç«‹æ—¶åŒ…ä½“ä¼ è¾“é€Ÿç‡è¾ƒä½ï¼Œåç»­ä¼šæ¸æ¸æé€Ÿã€‚å› æ­¤ï¼Œå‘é€è¿‡å¤šçš„â€œå°â€è¯·æ±‚å¯èƒ½ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ã€‚ å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ä¸»è¦åˆ†ä¸ºå‡ ä¸ªç»´åº¦ï¼š å¯¹äºä¸éœ€è¦ä½¿ç”¨çš„å†…å®¹ï¼Œå…¶å®ä¸éœ€è¦è¯·æ±‚ï¼Œå¦åˆ™ç›¸å½“äºåšäº†æ— ç”¨åŠŸï¼› å¯¹äºå¯ä»¥å»¶è¿ŸåŠ è½½çš„å†…å®¹ï¼Œä¸å¿…è¦ç°åœ¨å°±ç«‹åˆ»åŠ è½½ï¼Œæœ€å¥½å°±åœ¨éœ€è¦ä½¿ç”¨ä¹‹å‰å†åŠ è½½ï¼› å¯¹äºå¯ä»¥åˆå¹¶çš„èµ„æºï¼Œè¿›è¡Œèµ„æºåˆå¹¶ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ã€‚ 1.2. å‡å°‘åŒ…ä½“å¤§å° åŒ…ä½“å¤§å°å¯¹æ€§èƒ½ä¹Ÿæ˜¯æœ‰ç›´æ¥å½±å“çš„ã€‚æ˜¾ç„¶åŒæ ·é€Ÿç‡ä¸‹ï¼ŒåŒ…ä½“è¶Šå°ï¼Œä¼ è¾“è€—æ—¶è¶Šä½ï¼Œæ•´ä½“é¡µé¢åŠ è½½ä¸æ¸²æŸ“çš„æ€§èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚ å‡å°‘åŒ…ä½“å¤§å°å¸¸ç”¨çš„æ–¹å¼åŒ…æ‹¬äº†ï¼š ä½¿ç”¨é€‚åˆå½“å‰èµ„æºçš„å‹ç¼©æŠ€æœ¯ï¼› é¿å…å†å“åº”åŒ…ä½“é‡Œâ€œå¡å…¥â€ä¸€äº›ä¸éœ€è¦çš„å†…å®¹ 1.3. é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€— ä»¥ä¸Šä¸»è¦çš„å…³æ³¨ç‚¹éƒ½åœ¨é¡µé¢èµ„æºåŠ è½½çš„æ•ˆç‡ï¼Œå…¶å®æœ‰äº›æ—¶å€™ï¼Œæµè§ˆå™¨å»æ‰§è¡Œæˆ–ä½¿ç”¨èµ„æºçš„ä¹Ÿæ˜¯æœ‰æ¶ˆè€—çš„ã€‚ä¾‹å¦‚åœ¨ JavaScript æ‰§è¡Œäº†ä¸€æ®µ CPU å¯†é›†çš„è®¡ç®—ï¼Œæˆ–è€…è¿›è¡Œé¢‘ç¹çš„ DOM æ“ä½œï¼Œè¿™äº›éƒ½ä¼šè®© JavaScript çš„æ‰§è¡Œå˜æˆå½±å“æ€§èƒ½çš„ä¸€å¤§é—®é¢˜ã€‚è™½ç„¶ä»Šå¤©çš„åƒ V8 è¿™æ ·çš„å¼•æ“å·²ç»å¾ˆå¿«äº†ï¼Œä½†æ˜¯ä¸€äº›ä¸å½“çš„æ“ä½œä»ç„¶ä¼šå¸¦æ¥æ€§èƒ½çš„æŸè€—ã€‚ æ­¤å¤–ï¼Œåƒæ˜¯ CSS é€‰æ‹©å™¨åŒ¹é…ã€å›¾ç‰‡çš„è§£æä¸å¤„ç†ç­‰ï¼Œéƒ½æ˜¯è¦æ¶ˆè€— CPU å’Œå†…å­˜çš„ã€‚ä¹Ÿè®¸è¿™äº›ä¸å¤ªå¸¸æˆä¸ºæ€§èƒ½æ€æ‰‹ï¼Œä½†æ˜¯æŸäº›ç‰¹æ€§åœºåˆä¸‹ï¼Œäº†è§£å®ƒä»¬ä¹Ÿè®¸ä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ 1.4. åˆ©ç”¨ç¼“å­˜ è¿˜è®°å¾—å’±ä»¬è¿™è¶Ÿæ—…ç¨‹ä»å“ªå‡ºå‘çš„ä¹ˆï¼Ÿæ²¡é”™ï¼Œç¼“å­˜ã€‚ åœ¨æ—…ç¨‹çš„ç¬¬ä¸€ç«™ï¼Œæˆ‘ä»¬ä»‹ç»äº†æµè§ˆå™¨è®¿é—®ä¸€ä¸ª url æ—¶çš„å¤šçº§ç¼“å­˜ç­–ç•¥ã€‚åƒä¸‡ä¸è¦å¿˜äº†ï¼Œè¿™äº›é™æ€å­èµ„æºä¹Ÿæ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå®ƒä»¬ä»ç„¶å¯ä»¥åˆ©ç”¨ä¹‹å‰ä»‹ç»çš„å®Œæ•´ç¼“å­˜æµç¨‹ã€‚ç¼“å­˜åœ¨å¾ˆå¤šæ—¶å€™ä¼šæ˜¯ä¸€ä¸ªå¸®ä½ è§£å†³æ€§èƒ½é—®é¢˜çš„éå¸¸æœ‰æ•ˆçš„æ‰‹æ®µã€‚ ç”±äºç¬¬ä¸€ç«™å·²ç»å¯¹ç¼“å­˜è¿›è¡Œäº†è¯¦ç»†ä»‹ç»ï¼Œæ‰€ä»¥ç¼“å­˜è¿™éƒ¨åˆ†ï¼Œåœ¨è¿™ä¸€ç«™é‡Œåªä¼šåœ¨é’ˆå¯¹èµ„æºç±»å‹å†è¡¥å……ä¸€äº›å†…å®¹ã€‚ 2. é’ˆå¯¹å„ç±»èµ„æºçš„æ€§èƒ½ä¼˜åŒ– ğŸš€ ä»¥ä¸Šçš„åŸåˆ™å¯ä»¥æŒ‡å¯¼æˆ‘ä»¬é’ˆå¯¹æ€§åœ°ä¼˜åŒ–å„ç±»èµ„æºã€‚ä¸‹é¢æˆ‘å°±ä»¥èµ„æºç±»å‹ä¸ºç»´åº¦ï¼Œè¯¦ç»†ä»‹ç»å…¶ä¸­æ¶‰åŠåˆ°çš„ä¼˜åŒ–ç‚¹ä¸ä¼˜åŒ–æªæ–½ã€‚ å¦‚æœä½ ä¸€å£æ°”è¯»åˆ°è¿™é‡Œï¼Œå¯èƒ½æœ‰äº›ç´¯äº†ã€‚ä¸å¦‚å…ˆä¼¸ä¸ªæ‡’è…°æ”¾æ¾ä¸‹ï¼Œæ•´ç†å›å¿†ä¸€ä¸‹ä¹‹å‰çš„å†…å®¹ã€‚ å¦‚æœå‡†å¤‡å¥½äº†ï¼Œå’±ä»¬å°±ç»§ç»­å‡ºå‘å§ğŸ‘‡ JavaScript ä¼˜åŒ– CSS ä¼˜åŒ– å›¾ç‰‡ä¼˜åŒ– å­—ä½“ä¼˜åŒ– è§†é¢‘ä¼˜åŒ– æœ¬èŠ‚å‘Šä¸€æ®µè½ å¥½äº†ï¼Œå¦‚æœä½ å·²ç»é˜…è¯»å®Œäº†ä¸Šé¢å„ç±»èµ„æºçš„å…·ä½“ä¼˜åŒ–æªæ–½ï¼Œé‚£ä¹ˆæ­å–œï¼Œä½ å·²ç»åœ¨ã€Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€ä¸Šè¡Œè¿‡å¤§åŠã€‚ä¸‹é¢æˆ‘ä»¬ä¼šæ”¶æ‹¾è¡Œè£…ç»§ç»­å›åˆ°ä¸»è·¯ä¸Šã€‚ ä¸‹ä¸€ç«™æˆ‘ä»¬ä¼šæ¥åˆ°â€œè¿è¡Œæ—¶â€ï¼ˆruntimeï¼‰ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ€§èƒ½ä¼˜åŒ–çš„æ³¨æ„ç‚¹ä¸æŠ€æœ¯æ‰‹æ®µã€‚ å…­ã€è¿è¡Œæ—¶ è™½ç„¶æˆ‘ä»¬å·²ç»è¶Ÿè¿‡äº†èµ„æºåŠ è½½è¿™ä¸ªä¼˜åŒ–çš„å¤§å¤´ï¼Œä½†ä»ç„¶ä¸èƒ½æ‰ä»¥è½»å¿ƒï¼Œåœ¨åº”ç”¨è¿è¡Œæ—¶ä½ ä»ç„¶å¯èƒ½è¸©åˆ°ä¸€äº›æ€§èƒ½çš„â€œå‘â€ã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸€çœ‹ã€‚ 1. æ³¨æ„å¼ºåˆ¶åŒæ­¥å¸ƒå±€ 1.1. ä»€ä¹ˆæ˜¯å¼ºåˆ¶åŒæ­¥å¸ƒå±€ ä½œä¸ºå‰ç«¯ï¼Œå¤§å®¶åº”è¯¥å¯¹â€œå¼ºåˆ¶åŒæ­¥å¸ƒå±€â€å¹¶ä¸é™Œç”Ÿã€‚å¦‚æœä½ ä¸å¤ªäº†è§£ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ã€‚é¦–å…ˆä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œæ˜¾ç¤ºå™¨æœ‰ä¸€ä¸ªè‡ªå·±çš„åˆ·æ–°é¢‘ç‡ï¼Œä¾‹å¦‚æ¯ç§’ 60 æ¬¡ï¼ˆ60 FPSï¼‰ã€‚è¿™å°±æ„å‘³ç€ï¼Œæ¯è¿‡ 16.6msï¼Œæµè§ˆå™¨å°±ä¼šå°†æˆªæ­¢ä¸Šæ¬¡åˆ·æ–°åçš„å…ƒç´ å˜åŠ¨åº”ç”¨åˆ°å±å¹•ä¸Šã€‚è¿™é‡Œå°±ä¸å¾—ä¸æåˆ°æ¸²æŸ“ç®¡çº¿äº†ã€‚ åœ¨æ¸²æŸ“ç®¡çº¿ä¸­ï¼Œæœ‰ä¸€æ­¥å«åš Layoutï¼Œä¹Ÿå°±æ˜¯å¸ƒå±€ã€‚å®ƒä¼šè®¡ç®—å…ƒç´ çš„å¤§å°ã€ä½ç½®ä¿¡æ¯ï¼Œè€Œä¸”ä¸€å¤„çš„æ”¹åŠ¨å‡ ä¹ä¼šå½±å“åˆ°æ•´ä¸ªæ–‡æ¡£é¡µé¢ã€‚æ‰€ä»¥ Layout çš„æ¶ˆè€—æ˜¯éå¸¸å·¨å¤§çš„ã€‚è€Œæˆ‘ä»¬æ‰€è¯´çš„ reflowï¼ˆfirefoxï¼‰ä¸ layoutï¼ˆChrome/Opera/Safari/IEï¼‰ï¼Œéƒ½æ˜¯æŒ‡çš„è¿™ä¸€è¿‡ç¨‹ã€‚å¦ä¸€æ–¹é¢ï¼Œæ¸²æŸ“çº¿ç¨‹å’Œ JavaScript æ‰§è¡Œçº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥è¿™ 16.6ms è¿˜ä¼šè¢« JavaScript çš„æ‰§è¡Œæ‰€ç“œåˆ†ï¼Œå¯è§æ—¶é—´å¹¶ä¸é‚£ä¹ˆâ€œå¯Œè£•â€ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š var $ele = document.getElementById('main'); var height = $ele.offsetHeight; // â€¦â€¦ ä¸Šè¿°ä»£ç è·å–äº†å…ƒç´ çš„ offsetHeight å€¼ï¼Œæµè§ˆå™¨æ­¤æ—¶ä¼šä½¿ç”¨ä¸Šä¸€æ¬¡æ¸²æŸ“åçš„ç¼“å­˜å€¼è¿›è¡Œè¿”å›ï¼Œæ‰€ä»¥æµè§ˆå™¨æ¶ˆè€—å¹¶ä¸å¤§ã€‚ è€Œæœ‰ä¸€äº› JavaScript æ“ä½œä¼šå¯¼è‡´æµè§ˆå™¨éœ€è¦æå‰æ‰§è¡Œå¸ƒå±€æ“ä½œï¼Œè¿™ç§æ“ä½œå°±è¢«ç§°ä¸ºâ€œå¼ºåˆ¶åŒæ­¥å¸ƒå±€â€ã€‚æˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç æ”¹æˆå¦‚ä¸‹æ‰€ç¤ºï¼š var $ele = document.getElementById('main'); $ele.classList.remove('large'); var height = $ele.offsetHeight; // â€¦â€¦ ç”±äºæˆ‘ä»¬åœ¨ä¿®æ”¹å…ƒç´ çš„ className ååˆç«‹åˆ»è·å–äº†å®ƒçš„é«˜åº¦ï¼Œä¸ºäº†ä¿è¯é«˜åº¦å€¼æ­£ç¡®ï¼Œæµè§ˆå™¨ä¼šç«‹å³è¿›è¡Œå¸ƒå±€ï¼Œç„¶è€Œæˆ‘ä»¬çš„æœ¬æ„å¯èƒ½å¹¶éå¦‚æ­¤ â€”â€” ä¹Ÿè®¸ large å¹¶ä¸ä¼šå½±å“é«˜åº¦ï¼Œä¹Ÿè®¸æˆ‘ä»¬åªæ˜¯æƒ³è·å–ä¸Šä¸€å¸§çš„ç»“æœâ€¦â€¦ é’ˆå¯¹è¿™ç§ç›®çš„ï¼Œä¸‹é¢çš„å†™æ³•ä¼šæ›´åˆé€‚ï¼ŒåŒæ—¶å¯ä»¥é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€ã€‚ var height = $ele.offsetHeight; var $ele = document.getElementById('main'); $ele.classList.remove('large'); // â€¦â€¦ ä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½ä¸€ä¸å°å¿ƒå°±è§¦å‘äº†å¼ºåˆ¶åŒæ­¥å¸ƒå±€ã€‚é™¤äº†ä¸Šä¾‹ä¸­çš„ offsetHeightï¼Œè¿˜æœ‰è®¸å¤šä¼šè§¦å‘å¼ºåˆ¶åŒæ­¥å¸ƒå±€[1]çš„å±æ€§ã€‚è€Œ CSS Triggers[2] è¿™ä¸ªç½‘ç«™åœ¨ Layout ä¹‹å¤–ï¼Œåˆ—å‡ºäº†å„ä¸ªæµè§ˆå™¨ä¸­ä¼šè§¦å‘ Paint å’Œ Composite çš„ CSS å±æ€§ã€‚ 1.2. å°è¯•ä½¿ç”¨ RAF é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€ åœ¨å¼ºåˆ¶åŒæ­¥å¸ƒå±€çš„é—®é¢˜ä¸Šï¼Œè¿˜æœ‰ä¸€äº›æ›´ä¸¥é‡çš„åˆ—å­ï¼Œä¾‹å¦‚åœ¨å¾ªç¯ä¸­ä¸æ–­è§¦å‘å¼ºåˆ¶åŒæ­¥å¸ƒå±€ã€‚ å¦‚æœä½ å¸Œæœ›é¿å…åœ¨æµè§ˆå™¨è¿›è¡Œé¡µé¢é‡ç»˜åæ‰§è¡Œä¸€äº›æ“ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨ requestAnimationFrame APIã€‚ç”±äºä¸Šä¸€å¸§çš„æ—§å¸ƒå±€å€¼æ˜¯å¯ä»¥ç›´æ¥è·å–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å¸ƒå±€æŸ¥è¯¢çš„æ“ä½œæ”¾åœ¨ requestAnimationFrame ä¸­ã€‚ window.requestAnimationFrame(() => { var $ele = document.getElementById('main'); var height = $ele.offsetHeight; // â€¦â€¦ }); ä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœåƒä¸‹é¢è¿™æ ·çŠ¯äº†å’Œä¹‹å‰ä¸€æ ·çš„é”™è¯¯ï¼Œåœ¨æŸ¥è¯¢å¸ƒå±€ä¹‹å‰è®¾ç½®äº†æ–°çš„å…ƒç´ æ ·å¼/å¸ƒå±€å±æ€§ï¼Œé‚£ä½¿ç”¨äº† requestAnimationFrame ä¹Ÿæ— æ³•é¿å…æ€§èƒ½é—®é¢˜ã€‚ window.requestAnimationFrame(function () { var $ele = document.getElementById('main'); $ele.classList.remove('large'); var height = $ele.offsetHeight; // â€¦â€¦ }); 1.3. æ‰¹é‡åŒ–ä½ çš„æ“ä½œ æ‰¹é‡åŒ–æ˜¯è®¡ç®—æœºç¨‹åºä¼˜åŒ–ä¸­çš„é‡è¦æ‰‹æ®µä¹‹ä¸€ã€‚ä¾‹å¦‚ä¸€äº›æ•°æ®åº“åœ¨å†™æ“ä½œä¸Šæœ€ç»ˆä¹Ÿæ˜¯ä¼šå°†å…¶æ‰¹é‡åŒ–åå†ç»Ÿä¸€è¿›è¡Œç£ç›˜ I/Oã€‚æ‰€ä»¥å¯¹äºå…ƒç´ å¸ƒå±€çš„æŸ¥è¯¢æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨è¿™ç§æ‰‹æ®µã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™äº›æ“ä½œæ‰¹é‡åŒ–å­˜å‚¨ä¸‹æ¥ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡ requestAnimationFrame è§¦å‘æ—¶ä¸€èµ·æ‰§è¡Œã€‚FastDom å°±æ˜¯ä¸€ä¸ªå¸®ä½ å°è£…äº†è¿™ç±»æ“ä½œçš„å¼€æºåº“ By batching DOM access we avoid unnecessary document reflows and dramatically speed up layout performance. Each measure/mutate job is added to a corresponding measure/mutate queue. The queues are emptied (reads, then writes) at the turn of the next frame using window.requestAnimationFrame. ä¸Šé¢æ˜¯å®ƒçš„åŸºæœ¬å·¥ä½œåŸç†ï¼Œå’Œæˆ‘ä»¬æåˆ°çš„æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š fastdom.measure(() => { const width = element.clientWidth; }); fastdom.mutate(() => { element.style.width = width + 'px'; }); 2. é•¿åˆ—è¡¨ä¼˜åŒ– æœ‰äº›æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šéœ€è¦åœ¨é¡µé¢ä¸Šå±•ç¤ºä¸€ä¸ªåŒ…å«ä¸Šç™¾ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼ˆä¾‹å¦‚ä¸€ä¸ª Feed æµï¼‰ã€‚æ¯ä¸ªåˆ—è¡¨å…ƒç´ è¿˜æœ‰ç€å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼Œè¿™æ˜¾ç„¶æé«˜äº†é¡µé¢æ¸²æŸ“çš„æˆæœ¬ã€‚ç”šè‡³å½“ä½ ä½¿ç”¨ä¸€äº›åƒ React è¿™æ ·çš„åº“æ—¶ï¼Œé•¿åˆ—è¡¨çš„é—®é¢˜ä¼šè¢«è¿›ä¸€æ­¥æ”¾å¤§ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¥ä¼˜åŒ–é•¿åˆ—è¡¨å‘¢ï¼Ÿ 2.1. å®ç° Virtual List Virtual List æ˜¯ä¸€ç§ç”¨æ¥ä¼˜åŒ–é•¿åˆ—è¡¨çš„æŠ€æœ¯ã€‚å®ƒå¯ä»¥ä¿è¯åœ¨åˆ—è¡¨å…ƒç´ ä¸æ–­å¢åŠ ï¼Œæˆ–è€…åˆ—è¡¨å…ƒç´ å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œä¾ç„¶æ‹¥æœ‰å¾ˆå¥½çš„æ»šåŠ¨ã€æµè§ˆæ€§èƒ½ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³åœ¨äºï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸé™„è¿‘çš„åˆ—è¡¨å…ƒç´ ã€‚ä¸‹å›¾å·¦è¾¹å°±æ˜¯ Virtual List çš„æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°åªæœ‰è§†å£å†…å’Œä¸´è¿‘è§†å£çš„ä¸Šä¸‹åŒºåŸŸå†…çš„å…ƒç´ ä¼šè¢«æ¸²æŸ“ã€‚ ä¸è¿‡è¿™æ ·å¸¦æ¥çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç”±äºåªæ¸²æŸ“å›ºå®š N ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥åœ¨é¡µé¢æ»šåŠ¨åï¼Œå®ƒä»¬ä»ç„¶ç•™åœ¨åŸä½ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨ position: absolute é…åˆ transform: translate3d() æ¥è§£å†³ï¼Œæ‰‹åŠ¨è®¾ç½®å±•ç¤ºå…ƒç´ çš„åç§»é‡ã€‚ å…¶å¤§è‡´çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼š ç›‘å¬é¡µé¢æ»šåŠ¨ï¼ˆæˆ–è€…å…¶ä»–å¯¼è‡´è§†å£å˜åŒ–çš„äº‹ä»¶ï¼‰ï¼› æ»šåŠ¨æ—¶æ ¹æ®æ»šåŠ¨çš„è·ç¦»è®¡ç®—éœ€è¦å±•ç¤ºçš„åˆ—è¡¨é¡¹ï¼› å°†åˆ—è¡¨é¡¹ä¸­å±•ç¤ºçš„æ•°æ®ä¸ç»„ä»¶æ›¿æ¢æˆå½“å‰éœ€è¦å±•ç¤ºçš„å†…å®¹ï¼› ä¿®æ”¹åç§»é‡åˆ°å¯¹åº”çš„ä½ç½®ã€‚ è¿™æ ·è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œç›¸å½“äºæ˜¯ä¸æ–­æ”¹å˜è¿™ N ä¸ªå…ƒç´ çš„ä½ç½®å±æ€§å’Œå†…éƒ¨çš„ä¸€äº›èŠ‚ç‚¹ï¼Œä¸ä¼šæœ‰é¢‘ç¹çš„ DOM åˆ›å»ºä¸é”€æ¯ï¼Œé…åˆä¸‹é¢æåˆ°çš„ composite å¯ä»¥è·å¾—ä¸é”™çš„æ€§èƒ½ã€‚ å¦‚æœä½ æƒ³è¦ä½¿ç”¨è¿™é¡¹æŠ€æœ¯ï¼Œé™¤äº†è‡ªå·±å®ç°å¤–ï¼Œä¸€äº›å¸¸è§çš„æ¡†æ¶ä¹Ÿæœ‰ä¸é”™çš„å¼€æºå®ç°ã€‚ä¾‹å¦‚ï¼š åŸºäº React çš„ react-virtualizedï¼Œå®ƒçš„å¼€å‘è€…ä¹Ÿåœ¨ dev.to ä¸Šåˆ†äº«äº†ä¸€äº›å…³äº virtual list çš„å†…å®¹[3]ï¼› åŸºäº Vue çš„ vue-virtual-scroll-listï¼› åŸºäº Angular çš„ ngx-virtual-scrollerï¼› â€¦â€¦ 2.2. åŸç”Ÿçš„ Virtual Scroller Virtual List åœ¨ feed æµã€å›¾ç‰‡åº“ç­‰å¾ˆå¤šåœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œå¼€æºç»„ä»¶çš„ä¸‹è½½é‡ä¹Ÿè¯´æ˜äº†ä¸šåŠ¡å¯¹è¿™ä¸ªåŠŸèƒ½çš„éœ€æ±‚é‡ã€‚é‚£ä¹ˆè‡ªç„¶ä¼šæƒ³åˆ°ï¼Œå¦‚æœç”±æµè§ˆå™¨å±‚é¢æ¥æä¾›ç±»ä¼¼çš„èƒ½åŠ›ï¼Œæ˜¾ç„¶é€‚ç”¨æ€§ä¼šæ›´å¼ºï¼Œæ€§èƒ½å¯èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚Virtual Scroller å°±æ˜¯ä¸Šè¿°é€»è¾‘çš„æµè§ˆå™¨åŸç”Ÿå®ç°ã€‚Chrome Dev Summit 2018[4] ä¸Šæ¼”ç¤ºäº†å®ƒçš„æ•ˆæœã€‚ä½¿ç”¨ä¸Šä¹Ÿå¾ˆç®€å•ï¼š import \"std:virtual-scroller\"; item 1 item 2 item 3 item 4 â€¦â€¦ item 1000 æ³¨æ„ï¼Œ æ˜¯å†…ç½®ï¼ˆbuilt-inï¼‰æ¨¡å—æä¾›çš„ï¼Œæ‰€ä»¥éœ€è¦ä» std ä¸­å¯¼å…¥ã€‚ç›®å‰ï¼ˆ2019.08ï¼‰è¿˜ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚å¦‚æœæƒ³å¾—åˆ°ç±»ä¼¼çš„æ•ˆæœè¿˜æ˜¯å»ºè®®ä½¿ç”¨åŸºäº JavaScript å®ç°çš„åº“ã€‚å½“ç„¶ï¼Œéå¸¸æœŸå¾…æœªæ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥ç”¨ä¸Šè¿™ä¸ªåŠŸèƒ½ã€‚ æƒ³äº†è§£æ›´å¤šå…³äº Virtual Scroller çš„ä¿¡æ¯å¯ä»¥çœ‹è¿™é‡Œ[5]ã€‚ 3. é¿å… JavaScript è¿è¡Œæ—¶é—´è¿‡é•¿ ä¸Šé¢æˆ‘ä»¬æåˆ°äº†ï¼Œå±å¹•çš„åˆ·æ–°é¢‘ç‡å†³å®šäº†æ¯å¸§ä¹‹é—´ç•™ç»™ JavaScript æ‰§è¡Œçš„æ—¶é—´â€œå¹¶ä¸å¤šâ€ã€‚ä¹Ÿæ­£æ˜¯ç”±äºæ¸²æŸ“çº¿ç¨‹å’Œ JavaScript çº¿ç¨‹ä¹‹é—´äº’æ–¥ï¼Œæ‰€ä»¥ JavaScript æ‰§è¡Œå ç”¨æ—¶é—´è¿‡é•¿ä¼šå¯¼è‡´æ— æ³•åŠæ—¶æ¸²æŸ“ï¼Œå³å‡ºç°æ‰€è°“çš„â€œæ‰å¸§â€ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•é¿å… JavaScript é•¿æ—¶é—´æ‰§è¡Œè€Œå¯¼è‡´çš„æ‰å¸§ã€‚ 3.1. ä»»åŠ¡åˆ†è§£ ä½ å¯ä»¥åœ¨ Chrome æ§åˆ¶å°æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š document.body.innerHTML = ''; for(var i = 0; i å¯ä»¥çœ‹åˆ°é¡µé¢è¢«ç«‹å³æ¸…ç©ºäº†ã€‚ç„¶åæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹è¿­ä»£çš„æ¬¡æ•°ï¼Œä» 100 æ¬¡å¢åŠ åˆ° 10 äº¿æ¬¡ï¼š document.body.innerHTML = ''; for(var i = 0; i è¿™æ—¶å€™è¿è¡Œä½ ä¼šå‘ç°é¡µé¢æ²¡æœ‰å˜åŒ–ï¼Œæ§åˆ¶å°ä¹Ÿå¡ä½äº†ã€‚è¿‡äº†å‡ ç§’åé¡µé¢è¢«æ¸…ç©ºäº†ã€‚è¿™æ˜¯å› ä¸º JavaScript çš„é•¿æ—¶é—´æ‰§è¡Œé˜»å¡äº†æ¸²æŸ“çº¿ç¨‹ã€‚ æ—¢ç„¶é•¿æ—¶é—´çš„è¿è¡Œä¼šå¯¼è‡´æ¸²æŸ“é˜»å¡ï¼Œé‚£ä¹ˆæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠæˆ‘ä»¬çš„ä»»åŠ¡æ‹†æˆä¸€ä¸ªä¸ªæŒç»­æ—¶é—´æ›´çŸ­çš„å°ä»»åŠ¡ï¼Œåˆ†æ•£åˆ°å„ä¸ªå¸§ä¸­æ‰§è¡Œï¼Œä¾‹å¦‚æ”¹é€ æˆä¸‹é¢è¿™æ ·ï¼š document.body.innerHTML = ''; let step = 0; function subtask() { if (step === 1e9) { return; } window.requestAnimationFrame(function () { for(var i = 0; i æˆ‘ä»¬æŠŠ 10 äº¿æ¬¡åˆ†æ•£ä¸ºåä¸ª 1 äº¿æ¬¡çš„å­ä»»åŠ¡ï¼Œè™½ç„¶åŒæ ·æ‰§è¡Œäº† 10 äº¿æ¬¡è®¡ç®—ï¼Œä½†æ˜¯é¡µé¢è¿…é€Ÿè¢«æ¸…ç©ºäº†ã€‚ æ­¤å¤–ï¼Œæµè§ˆå™¨è¿˜æœ‰ä¸€ä¸ªæ›´å¼ºå¤§çš„ API æ¥å¸®åŠ©ä½ æ›´ç²¾ç»†åœ°è¿›è¡Œè®¡ç®—è°ƒåº¦ï¼Œå®ƒå°±æ˜¯ requestIdleCallbackã€‚å®ƒä¼šåœ¨æµè§ˆå™¨â€œç©ºé—²â€çš„æ—¶å€™æ‰§è¡Œæ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œé¿å…åœ¨ä¸»çº¿ç¨‹â€œæ‹¥æŒ¤â€çš„æ—¶å€™æ‰§è¡ŒæŸäº›ä»£ç ã€‚å®ƒæ”¯æŒä½ è®¾å®šä¸€ä¸ªè¶…æ—¶å‚æ•°ï¼Œä¿è¯åœ¨è¶…æ—¶åï¼Œå³ä½¿ä»ç„¶æ²¡æœ‰ç©ºé—²æ—¶é—´ä¹Ÿå¿…é¡»æ‰§è¡Œå›è°ƒã€‚å›è°ƒå‡½æ•°ä¼šæ¥æ”¶ä¸€ä¸ª IdleDeadline ç±»å‹çš„å‚æ•°ï¼Œä½ å¯ä»¥é€šè¿‡ .didTimeout æ¥æŸ¥çœ‹æ˜¯å¦æ˜¯è¶…æ—¶æ‰§è¡Œï¼Œè¿˜å¯ä»¥é€šè¿‡æ‰§è¡Œ .timeRemaining() æ–¹æ³•æ¥æŸ¥çœ‹å‰©ä½™çš„ç©ºé—²æ—¶é—´ã€‚ window.requestIdleCallback(deadline => { if (deadline.timeRemaining() > 100) { // ä¸€äº›å¯ä»¥ç­‰æµè§ˆå™¨ç©ºé—²äº†å†å»åšçš„äº‹ // â€¦â€¦ } }, {timeout: 5000}) ä¸Šé¢æ˜¯åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹å¼å¯ä»¥æŸ¥çœ‹è¿™é‡Œ[6] 3.2. å»¶è¿Ÿæ‰§è¡Œ ä¸€èˆ¬æ¥è¯´ï¼Œå»¶è¿Ÿæ‰§è¡Œåˆ†ä¸ºä¸¤ç§ç­–ç•¥ï¼š ä¸€ç§æ˜¯æ‡’æ‰§è¡Œï¼Œä¾‹å¦‚å½“æˆ‘éœ€è¦æŸä¸ªå€¼æ—¶ï¼Œæˆ‘æ‰å»è®¡ç®—ï¼› ç¬¬äºŒç§æ˜¯å»¶åæ‰§è¡Œï¼Œå³åˆ©ç”¨ setTimeoutã€requestIdleCallback è¿™æ ·çš„æ–¹æ³•æŠŠè®¡ç®—æ”¾åˆ°åç»­çš„äº‹ä»¶å¾ªç¯æˆ–ç©ºé—²æ—¶åˆ»ã€‚ ä¸€äº›åœºæ™¯ä¸‹ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯å¯è¡Œçš„æ–¹æ³•ã€‚é™¤æ­¤ä»¥å¤–ï¼Œåœ¨ Idle Until Urgent[7] ä¸­ä½œè€…ä»‹ç»äº†ä¸€ç§æ”¹è¿›çš„æ–¹æ³•ï¼šæŠŠè®¡ç®—æ”¾åˆ° requestIdleCallback ä¸­ï¼Œå¦‚æœä½ ä¸€ç›´ä¸éœ€è¦ç”¨åˆ°è®¡ç®—ç»“æœä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå®ƒä¼šç­‰åˆ°ç©ºé—²æ—¶å†æ‰§è¡Œï¼Œä¸å½±å“æ€§èƒ½ï¼›è€Œå½“ä½ è¦ä½¿ç”¨æ—¶ï¼Œå¦‚æœè¿˜æœªè®¡ç®—å¥½åˆ™ä¼šç«‹åˆ»è¿›è¡Œè®¡ç®—å¹¶è¿”å›ç»“æœï¼ŒåŒæ—¶å–æ¶ˆæœªæ‰§è¡Œçš„ requestIdleCallbackã€‚ æˆ‘ä»¬åœ¨è¿™ä¸¤éƒ¨åˆ†éƒ½æåŠäº† requestIdleCallbackï¼Œå®ƒç¡®å®æ˜¯ä¸ªéå¸¸ä¸é”™çš„ APIï¼Œç„¶è€Œç›®å‰ï¼ˆ2019.08ï¼‰å…¼å®¹æ€§ä¸æ˜¯å¾ˆä¹è§‚ã€‚å¦‚æœä½ å¸Œæœ›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨ polyfillã€‚ 3.3. å¹¶è¡Œè®¡ç®— å¯¹äºä¸€äº› CPU å¯†é›†å‹çš„è®¡ç®—åœºæ™¯ï¼Œé™¤äº†åœ¨ä¸» JavaScript çº¿ç¨‹ä¸­æ‹†åˆ†è°ƒåº¦ä»»åŠ¡ã€å¼‚æ­¥æ‰§è¡Œä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è€ƒè™‘å°†è®¡ç®—ä¸ä¸»çº¿ç¨‹å¹¶è¡Œã€‚åœ¨æµè§ˆå™¨ä¸­å¯ç”¨å¹¶è¡Œçº¿ç¨‹å¯ä»¥ä½¿ç”¨ Web Worker[8] ä¸­ã€‚åœ¨ Web Worker æ ‡å‡†å‡ºç°ä¹‹å‰ï¼Œä½ èƒ½åšçš„åªæ˜¯å°†ä»»åŠ¡å¼‚æ­¥åŒ–ï¼ˆasynchronouslyï¼‰ï¼Œè€Œæœ‰äº† Web Workerï¼Œä½ å°±å¯ä»¥å¹¶è¡Œï¼ˆconcurrencyï¼‰åœ°æ‰§è¡Œ JavaScript äº†ã€‚ ä¸‹é¢æä¾›äº† Web Worker çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š // index.js const worker = new Worker('worker.js'); worker.addEventListener('message', function (e) { console.log(`result is ${e.data}`); }, false); worker.postMessage('start'); // worker.js self.addEventListener('message', function (e) { if (e.data === 'start') { // ä¸€äº›å¯†é›†çš„è®¡ç®—â€¦â€¦ self.postMessage(result); } }, false); 4. å–„ç”¨ Composite Composite è¿™ä¸ªæ¦‚å¿µå’Œæˆ‘ä»¬çš„æ¸²æŸ“ç®¡çº¿å…³ç³»å¯†åˆ‡ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå¤„äºæœ€åä¸€æ­¥ã€‚ ç”±äºä¹‹å‰æˆ‘ä»¬è¯´åˆ°ï¼Œå…ƒç´ å¸ƒå±€å¯èƒ½ä¼šå½±å“åˆ°æ•´ä¸ªé¡µé¢ï¼Œé‚£ä¹ˆè‡ªç„¶æˆ‘ä»¬å°±ä¼šæƒ³ï¼Œæ˜¯å¦èƒ½å°½å¯èƒ½å‡å°‘å½±å“çš„èŒƒå›´å‘¢ï¼Ÿåœ¨æŸäº›æƒ…å†µä¸‹æ˜¯å¯ä»¥çš„ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸¤ä¸ªå…ƒç´ ï¼š .main { height: 200px; width: 200px; background: black; } .fixed { position: fixed; top: 20px; left: 20px; transform: translateZ(0); width: 100px; height: 100px; background: red; } æµè§ˆå™¨ä¼šå°†å…¶å¤„ç†ä¸ºä¸¤ä¸ªæ¸²æŸ“å±‚ï¼Œå…¶ä¸­ .fixed å…ƒç´ ç”±äºè®¾ç½®äº† 3D transformï¼Œæ‰€ä»¥ä¼šä»æ™®é€šçš„æ¸²æŸ“å±‚æå‡è‡³åˆæˆå±‚ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„ GraphicsLayersã€‚å½“åˆæˆå±‚æ›´æ–°æ—¶ï¼Œæµè§ˆå™¨ä¼šå°†å¸ƒå±€è°ƒæ•´é™åˆ¶åœ¨è¯¥å±‚ä¸­ï¼Œåšåˆ°å°½å¯èƒ½å°çš„å¸ƒå±€å˜åŠ¨ã€‚ä¸‹å›¾å±•ç¤ºäº†å½“å‰çš„ä¸¤ä¸ªåˆæˆå±‚ï¼š æ€»å¾—æ¥è¯´ï¼Œåˆæˆå±‚åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šçš„ä¼˜ç‚¹åœ¨äºï¼š åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”± GPU åˆæˆï¼Œæ¯” CPU å¤„ç†è¦å¿«ï¼› å½“éœ€è¦ repaint æ—¶ï¼Œåªéœ€è¦ repaint æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚ï¼› å¯¹äº transform å’Œ opacity æ•ˆæœï¼Œä¸ä¼šè§¦å‘ layout å’Œ paintã€‚ ä½†åŒæ—¶ï¼Œä¹Ÿè¦æ³¨æ„é¿å…å±‚çˆ†ç‚¸ï¼Œé˜²æ­¢åœ¨æ— æ³•è¿›è¡Œå±‚å‹ç¼©çš„æƒ…å†µä¸‹å‡ºç°è¿‡å¤šçš„å±‚ï¼Œåè€Œå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»äº† composite çš„åŸç†åŠå…¶ç›¸å…³åº”ç”¨[9]ã€‚ 5. æ»šåŠ¨äº‹ä»¶çš„æ€§èƒ½ä¼˜åŒ– å‰ç«¯æœ€å®¹æ˜“ç¢°åˆ°çš„æ€§èƒ½é—®é¢˜çš„åœºæ™¯ä¹‹ä¸€å°±æ˜¯ç›‘å¬æ»šåŠ¨äº‹ä»¶å¹¶è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚ç”±äºæ»šåŠ¨äº‹ä»¶å‘ç”Ÿéå¸¸é¢‘ç¹ï¼ˆç›¸è¾ƒäºç”¨æˆ·ç‚¹å‡»ã€hover ç­‰äº‹ä»¶ï¼‰ï¼Œæ‰€ä»¥é¢‘ç¹åœ°æ‰§è¡Œç›‘å¬å›è°ƒå°±å®¹æ˜“é€ æˆ JavaScript æ‰§è¡Œä¸é¡µé¢æ¸²æŸ“ä¹‹é—´äº’ç›¸é˜»å¡çš„æƒ…å†µã€‚ æ»šåŠ¨çš„æ€§èƒ½ä¼˜åŒ–å…¶å®ä¹Ÿæ˜¯ä¸€ç§ç»¼åˆæ€§çš„ä¼˜åŒ–ã€‚å®ƒä¸»è¦æ˜¯ä¼šå°†ä¸Šè¿°çš„å„ç±»æ€§èƒ½é—®é¢˜æ”¾å¤§äº†ï¼Œæ‰€ä»¥åœ¨ä¼˜åŒ–æªæ–½ä¸­ï¼Œä½ ä»ç„¶éœ€è¦é¿å…å‡ºç°ä¸Šé¢æåˆ°çš„é•¿æ—¶é—´çš„ JavaScript æ‰§è¡Œã€å¼ºåˆ¶åŒæ­¥å¸ƒå±€ç­‰é—®é¢˜ã€‚ æ­¤å¤–ï¼ŒåŸºäºæ»šåŠ¨è¿™ä¸ªç‰¹æ®Šåœºæ™¯ï¼Œè¿™é‡Œå†ä»‹ç»ä¸¤ä¸ªå¤„ç†æ»šåŠ¨æ€§èƒ½æ—¶éå¸¸å¸¸è§çš„æŠ€æœ¯ï¼šé˜²æŠ–å’ŒèŠ‚æµã€‚ å½“ä¸€ä¸ªäº‹ä»¶é¢‘ç¹è§¦å‘ï¼Œè€Œä½ å¸Œæœ›é—´éš”ä¸€å®šçš„æ—¶é—´å†è§¦å‘ç›¸åº”çš„å‡½æ•°æ—¶å°±ä¼šä½¿ç”¨èŠ‚æµï¼ˆthrottleï¼‰ã€‚ä¾‹å¦‚åœ¨é¡µé¢æ»šåŠ¨æ—¶ï¼Œæ¯ 200ms è¿›è¡Œä¸€æ¬¡é¡µé¢èƒŒæ™¯é¢œè‰²çš„ä¿®æ”¹ã€‚ å½“ä¸€ä¸ªäº‹ä»¶é¢‘ç¹è§¦å‘ï¼Œè€Œä½ å¸Œæœ›åœ¨äº‹ä»¶è§¦å‘ç»“æŸä¸€æ®µæ—¶é—´åï¼ˆæ­¤æ®µæ—¶é—´å†…ä¸å†æœ‰è§¦å‘ï¼‰æ‰å®é™…è§¦å‘å“åº”å‡½æ•°æ—¶ä¼šä½¿ç”¨é˜²æŠ–ï¼ˆdebounceï¼‰ã€‚ä¾‹å¦‚ç”¨æˆ·ä¸€ç›´ç‚¹å‡»æŒ‰é’®ï¼Œä½†ä½ ä¸å¸Œæœ›é¢‘ç¹å‘é€è¯·æ±‚ï¼Œä½ å°±å¯ä»¥è®¾ç½®å½“ç‚¹å‡»å 200ms å†…ç”¨æˆ·ä¸å†ç‚¹å‡»æ—¶æ‰å‘é€è¯·æ±‚ã€‚ è¿™ä¸¤ä¸ªæŠ€æœ¯ä¹Ÿæ˜¯å‰ç«¯éå¸¸å¸¸ç”¨çš„æŠ€æœ¯ï¼Œä¾‹å¦‚ lodash ä¸­å°±æœ‰ throttle å’Œ debounce çš„å¯¹åº”å®ç°ã€‚å¦‚æœä½ å¯¹å®ƒä»¬ä¸å¤ªäº†è§£ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™ä¸¤ç¯‡æ–‡ç« ï¼š å‡½æ•°èŠ‚æµçš„å®ç° (throttle)[10] å‡½æ•°å»æŠ–çš„å®ç° (debounce)[11] 6. Passive event listeners åœ¨ä»‹ç» Passive event listeners æ˜¯å¦‚ä½•è®©æ»šåŠ¨æ›´é¡ºç•…ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä¸ºä»€ä¹ˆä¼šæœ‰ Passive event listenersã€‚ è€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼š document.addEventListener('touchstart', function (e) { // åšäº†ä¸€äº›æ“ä½œâ€¦â€¦ e.preventDefault(); }, true); æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ touchstart ä¸­è°ƒç”¨äº† e.preventDefault() ä¼šé˜»æ­¢é¡µé¢çš„æ»šåŠ¨ä¸ç¼©æ”¾ã€‚é‚£ä¹ˆæµè§ˆå™¨æ˜¯å¦‚ä½•çŸ¥é“ä¸è¦è®©é¡µé¢æ»šåŠ¨ä¸ç¼©æ”¾çš„å‘¢ï¼Ÿå½“ç„¶æ˜¯å› ä¸ºæˆ‘ä»¬è°ƒç”¨äº† e.preventDefault()ï¼Œä½ å¯èƒ½è®¤ä¸ºè¿™æ˜¯åºŸè¯ï¼Œä¸è¿‡é—®é¢˜å°±åœ¨è¿™ã€‚å¦‚æœæµè§ˆå™¨ä¸æ‰§è¡Œå®Œç›‘å¬å›è°ƒé‡Œçš„ä»£ç ï¼Œå°±ä¸ä¼šçŸ¥é“å¼€å‘è€…æœ‰æ²¡æœ‰ç¦æ­¢é»˜è®¤äº‹ä»¶ã€‚æ‰€ä»¥ä¸ç®¡ä½ æ˜¯å¦è°ƒç”¨äº† e.preventDefault()ï¼Œå½“ä½ æ·»åŠ è§¦æ‘¸ã€æ»šè½®çš„äº‹ä»¶ç›‘å¬åï¼Œæ¯æ¬¡è§¦å‘è¯¥äº‹ä»¶ï¼Œæµè§ˆå™¨éƒ½ä¼šå…ˆèŠ±è´¹äº‹ä»¶æ‰§è¡Œå®Œä½ çš„å›è°ƒï¼Œç„¶åæ ¹æ®ç»“æœæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ»šåŠ¨é¡µé¢ã€‚å¦‚æœçš„æ“ä½œèŠ±è´¹äº† 200msï¼Œé‚£é¡µé¢åªèƒ½åœ¨ 200ms åå†æ»šåŠ¨æˆ–ç¼©æ”¾ï¼Œè¿™å°±å¯¼è‡´äº†æ€§èƒ½é—®é¢˜ã€‚ é‚£ä½ è‚¯å®šä¼šæƒ³ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä¸ä¼šé˜»æ­¢é»˜è®¤äº‹ä»¶å‘€ï¼Œæˆ‘æœ‰æ²¡æœ‰åŠæ³•å‘Šè¯‰æµè§ˆå™¨ï¼Œè®©å®ƒä¸ç”¨ç­‰å•¦ï¼ˆé»˜è®¤è¡Œä¸ºæ²¡æœ‰è¢«ç¦ç”¨ï¼‰ï¼Œç›´æ¥æ»šåŠ¨é¡µé¢å°±è¡Œå‘¢ï¼ŸPassive event listeners å°±æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„[12]ã€‚ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼š document.addEventListener('touchstart', function (e) { // åšäº†ä¸€äº›æ“ä½œâ€¦â€¦ }, {passive: true}); åªéœ€è¦åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­ä¼ å…¥ {passive: true} å³å¯ã€‚ ç„¶è€Œå’Œå…¶ä»–æ–°ç‰¹æ€§ä¸€æ ·ï¼Œå¯¹äº Passive event listeners æˆ‘ä»¬ä¹Ÿéœ€è¦è€ƒè™‘å…¼å®¹æ€§ã€‚ç”±äºåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç”¨æ¥è®¾ç½®æ˜¯å¦è¿›è¡Œäº‹ä»¶æ•è·çš„ã€‚æ‰€ä»¥ä½¿ç”¨æ—¶å»ºè®®è¿›è¡Œç‰¹æ€§æ£€æµ‹ï¼š // è¿™æ®µç‰¹æ€§æ£€æµ‹çš„æ–¹æ³•å¾ˆå·§å¦™ let supportsPassive = false; try { const opts = Object.defineProperty({}, 'passive', { get: function() { supportsPassive = true; } }); window.addEventListener('testPassive', null, opts); window.removeEventListener('testPassive', null, opts); } catch (e) {} document.addEventListener('touchstart', function (e) { // åšäº†ä¸€äº›æ“ä½œâ€¦â€¦ }, supportsPassive ? {passive: true} : false); è¿™ä¸ªè§†é¢‘å±•ç¤ºäº† Passive event listeners å¸¦æ¥çš„æ€§èƒ½ä¸ä½“éªŒæå‡ï¼Œè§†é¢‘ä¸­å³ä¾§ç”»é¢æ˜¯ä½¿ç”¨äº† Passive event listeners çš„æ•ˆæœã€‚ è¿è¡Œæ—¶æ€§èƒ½æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­éå¸¸é‡è¦çš„ä¸€å—ã€‚è¿™ç¯‡æ–‡ç« é‡Œåˆ—ä¸¾äº†å¸¸è§åœºæ™¯ä¸‹çš„é€šç”¨ä¼˜åŒ–æ‰‹æ®µã€‚æ‰å¤–ï¼Œç›®å‰å¤§å¤šæ•°åº”ç”¨éƒ½æ˜¯æ„å»ºåœ¨ React/Vue/Angular ä¹‹ä¸Šï¼ˆå½“ç„¶ä¹Ÿæœ‰ jQueryï¼‰ï¼Œé’ˆå¯¹å…·ä½“æ¡†æ¶çš„æ€§èƒ½ä¼˜åŒ–åˆä¼šæ˜¯å¥½å‡ ä¸ªæ–°çš„è¯é¢˜ï¼Œåç»­å¦‚æœæœ‰æœºä¼šä¹Ÿå¸Œæœ›èƒ½å°†å®ƒä»¬è¡¥å……è¿›æ¥ã€‚ ä¸è¿‡ï¼Œä¸ç®¡ä»€ä¹ˆæ¡†æ¶åœ¨å‰ç«¯æœ€ç»ˆéƒ½ä¼šè¿è¡Œåœ¨æµè§ˆå™¨ä¸Šã€ä½¿ç”¨ JavaScript å¼•æ“ï¼ˆè‡³å°‘ç›®å‰æ˜¯ï¼‰ï¼Œæ‰€ä»¥è¿™äº›é’ˆå¯¹ä»¥è¿™äº›é€šç”¨æ€§çš„æ€§èƒ½ä¼˜åŒ–æ€è·¯ä½œä¸ºåŸºç¡€ï¼Œå¯ä»¥å¸®ä½ æ›´å¥½ç†è§£ä¸å¤„ç†é‡åˆ°çš„æ€§èƒ½é—®é¢˜ã€‚ ä¸ƒã€é¢„åŠ è½½ åœ¨ä¹‹å‰çš„æ—…é€”ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†å¾ˆå¤šå…³äºèµ„æºåŠ è½½çš„ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ€ä¹ˆåŠ å¿«è¿æ¥çš„å»ºç«‹ã€æ€ä¹ˆå‡å°‘åŒ…ä½“å¤§å°ã€æ€ä¹ˆå‡å°‘è¯·æ±‚æ•°ç­‰ã€‚ä½†è¿˜æœ‰ä¸€ç§å˜ç›¸åŠ å¿«åŠ è½½é€Ÿåº¦çš„æŠ€æœ¯ â€”â€” é¢„åŠ è½½ã€‚ é¢„åŠ è½½ç›¸å½“äºæ˜¯å¿«ç”¨æˆ·ä¸€æ­¥ï¼Œåœ¨ç©ºé—²çš„æ—¶å€™å°±æŠŠç”¨æˆ·å³å°†ç”¨åˆ°çš„èµ„æºåŠ è½½å®Œï¼Œç­‰ç”¨æˆ·å®é™…éœ€è¦ä½¿ç”¨æ—¶ï¼Œèµ„æºå·²ç»å­˜åœ¨åœ¨æœ¬åœ°ï¼Œè‡ªç„¶å°±è·³è¿‡äº†æ•´ä¸ªåŠ è½½çš„ç­‰å¾…æ—¶é—´ã€‚ åœ¨ã€Œæ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€çš„æœ€åä¸€ç«™ï¼Œæˆ‘ä¼šç»™ä½ ä»‹ç»ä¸€äº›é¢„åŠ è½½æŠ€æœ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨è§ˆå™¨æä¾›çš„èƒ½åŠ›ï¼Œæˆ–è€…å·§ç”¨ JavaScript ä¸­çš„ç›¸å…³ APIã€‚æ­¤å¤–ï¼Œé™¤äº†é¢„åŠ è½½æŠ€æœ¯ï¼Œé¢„åŠ è½½çš„ä¸€å¤§æ ¸å¿ƒé—®é¢˜è¿˜åœ¨äºé¢„åŠ è½½ç­–ç•¥ï¼Œå³å¦‚ä½•åˆ¤æ–­èµ„æºæ˜¯å¦éœ€è¦é¢„åŠ è½½ä»¥åŠåˆé€‚åŠ è½½ï¼Œä»¥ä¿è¯æœ€é«˜çš„æ•ˆç‡ã€‚ 1. é¢„åŠ è½½æŠ€æœ¯ 1.1. Resource Hints Resource Hints[1] æ˜¯ä¸€ç§é¢„åŠ è½½ç›¸å…³çš„æ ‡å‡†ï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨å“ªäº›æºä¸‹çš„èµ„æºæˆ‘ä»¬çš„ Web åº”ç”¨éœ€è¦è·å–ï¼Œå“ªäº›èµ„æºåœ¨ä¹‹åçš„æ“ä½œæˆ–æµè§ˆæ—¶éœ€è¦è¢«ä½¿ç”¨ï¼Œä»è€Œè®©æµè§ˆå™¨èƒ½å¤Ÿè¿›è¡Œä¸€äº›é¢„å…ˆè¿æ¥æˆ–é¢„å…ˆåŠ è½½æ“ä½œã€‚Resource Hints æ ‡å‡†åŒ…æ‹¬ DNS Prefetchã€Preconnectã€Prefetch ä¸ Prerenderã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸ Resource Hints ç±»ä¼¼çš„ Preload æˆ‘ä»¬ä¹Ÿä¼šåœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹ã€‚ åœ¨å‘èµ·è¯·æ±‚éƒ¨åˆ†æˆ‘ä»¬å·²ç»ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ DNS Prefetch æ¥é¢„è§£æ DNSã€å¦‚ä½•ä½¿ç”¨ Preconnect æ¥é¢„å…ˆå»ºç«‹è¿æ¥ã€‚æ‰€ä»¥ä¸‹é¢ä¼šå…¶ä»–ä¸‰å—ï¼šPrefetchã€Prerenderã€Preloadã€‚ 1.1.1. Prefetch ä½ å¯ä»¥æŠŠ Prefetch ç†è§£ä¸ºèµ„æºé¢„è·å–ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥ç”¨ Prefetch æ¥æŒ‡å®šåœ¨ç´§æ¥ç€ä¹‹åçš„æ“ä½œæˆ–æµè§ˆä¸­éœ€è¦ä½¿ç”¨åˆ°çš„èµ„æºï¼Œè®©æµè§ˆå™¨æå‰è·å–ã€‚ç”±äºä»…ä»…æ˜¯æå‰è·å–èµ„æºï¼Œå› æ­¤æµè§ˆå™¨ä¸ä¼šå¯¹èµ„æºè¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶ä¸”åƒ CSS æ ·å¼è¡¨ã€JavaScript è„šæœ¬è¿™æ ·çš„èµ„æºæ˜¯ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œå¹¶åº”ç”¨äºå½“å‰æ–‡æ¡£çš„ã€‚å…¶ä¸­ as å±æ€§ç”¨äºæŒ‡å®šèµ„æºçš„ç±»å‹ï¼Œä¸ Preload è§„èŒƒä¸€è‡´ï¼ŒåŸºæœ¬æ¶µç›–äº†æ‰€æœ‰èµ„æºç±»å‹[2]ã€‚ 1.1.2. Prerender Prerender æ¯” Prefetch æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥ç²—ç•¥åœ°ç†è§£ä¸ä»…ä¼šé¢„è·å–ï¼Œè¿˜ä¼šé¢„æ‰§è¡Œã€‚ The prerender link relation type is used to identify a resource that might be required by the next navigation, and that the user agent SHOULD fetch and execute. å¦‚æœä½ æŒ‡å®š Prerender ä¸€ä¸ªé¡µé¢ï¼Œé‚£ä¹ˆå®ƒä¾èµ–çš„å…¶ä»–èµ„æºï¼Œåƒ ã€ ç­‰é¡µé¢æ‰€éœ€èµ„æºä¹Ÿå¯èƒ½ä¼šè¢«ä¸‹è½½ä¸å¤„ç†ã€‚ä½†æ˜¯é¢„å¤„ç†ä¼šåŸºäºå½“å‰æœºå™¨ã€ç½‘ç»œæƒ…å†µçš„ä¸åŒè€Œè¢«ä¸åŒç¨‹åº¦åœ°æ¨è¿Ÿã€‚ä¾‹å¦‚ï¼Œä¼šæ ¹æ® CPUã€GPU å’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠè¯·æ±‚æ“ä½œçš„å¹‚ç­‰æ€§è€Œé€‰æ‹©ä¸åŒçš„ç­–ç•¥æˆ–é˜»æ­¢è¯¥æ“ä½œã€‚ 1.1.3. Preload åœ¨é‡åˆ°éœ€è¦ Preload çš„èµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¼š ç«‹åˆ» è¿›è¡Œé¢„è·å–ï¼Œå¹¶å°†ç»“æœæ”¾åœ¨å†…å­˜ä¸­ï¼Œèµ„æºçš„è·å–ä¸ä¼šå½±å“é¡µé¢ parse ä¸ load äº‹ä»¶çš„è§¦å‘ã€‚ç›´åˆ°å†æ¬¡é‡åˆ°è¯¥èµ„æºçš„ä½¿ç”¨æ ‡ç­¾æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œã€‚ç”±äºæˆ‘ä»¬ä¼šå°† æ ‡ç­¾ç½®äº åº•éƒ¨æ¥ä¿è¯æ€§èƒ½ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘åœ¨ æ ‡ç­¾ä¸­é€‚å½“æ·»åŠ è¿™äº›èµ„æºçš„ Preload æ¥åŠ é€Ÿé¡µé¢çš„åŠ è½½ä¸æ¸²æŸ“ã€‚ åˆ°è¿™é‡Œå¤§å®¶è‚¯å®šä¼šå¥½å¥‡ï¼ŒPreload ä¸ Prefetch æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå®ƒä»¬éå¸¸å®¹æ˜“æ··æ·†ï¼Œåœ¨æ ‡å‡†é‡Œæœ‰è¿™ä¹ˆä¸€æ®µè¯è§£é‡Šä¸¤è€…åŒºåˆ«ï¼š The application can use the preload keyword to initiate early, high-priority, and non-render-blocking fetch of a CSS resource that can then be applied by the application at appropriate time. ä¸ Prefetch ç›¸æ¯”ï¼ŒPreload ä¼šå¼ºåˆ¶æµè§ˆå™¨ç«‹å³è·å–èµ„æºï¼Œå¹¶ä¸”è¯¥è¯·æ±‚å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§ï¼ˆmandatory and high-priorityï¼‰ï¼Œå› æ­¤å»ºè®®å¯¹ä¸€äº›å½“å‰é¡µé¢ä¼šé©¬ä¸Šç”¨åˆ°èµ„æºä½¿ç”¨ Preloadï¼›ç›¸å¯¹çš„ï¼ŒPrefetch çš„èµ„æºè·å–åˆ™æ˜¯å¯é€‰ä¸è¾ƒä½ä¼˜å…ˆçº§çš„ï¼Œå…¶æ˜¯å¦è·å–å®Œå…¨å–å†³äºæµè§ˆå™¨çš„å†³å®šï¼Œé€‚ç”¨äºé¢„è·å–å°†æ¥å¯èƒ½ä¼šç”¨åˆ°çš„èµ„æºã€‚ å¦‚æœå¯¹ Resource Hints æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨æˆ‘ä¹‹å‰çš„æ–‡ç« ä¸­è¿›ä¸€æ­¥äº†è§£å®ƒä»¬[3]ã€‚ 1.1.4. webpack ä¸­çš„ä½¿ç”¨æ–¹å¼ é¢„åŠ è½½å¯ä»¥é…åˆ code split æ¥ä½¿ç”¨ï¼Œå¯ä»¥åœ¨é™ä½åˆå§‹åŠ è½½é‡çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä¿è¯æŒ‰éœ€åŠ è½½æ—¶çš„ä½“éªŒã€‚åœ¨ webpack ä¸­åº”ç”¨é¢„åŠ è½½[4]éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ dynamic import ä¸­æ·»åŠ ç›¸åº”æ³¨é‡Šï¼Œwebpack å°±ä¼šçŸ¥é“ä½ éœ€è¦å¯¹è¿™ä¸ª chunk è¿›è¡Œé¢„åŠ è½½ã€‚ // prefetch import(/* webpackPrefetch: true */ './sub1.js'); // preload import(/* webpackPreload: true */ './sub2.js') 1.2. åŸºäº JavaScript çš„é¢„åŠ è½½ ä¸Šé¢æåˆ°äº†åŸºäº Resource Hints çš„é¢„åŠ è½½æŠ€æœ¯ï¼Œå®ƒå…¶å®åƒæ˜¯ä¸€ç§å£°æ˜å¼æŠ€æœ¯ï¼šä½ æå‡ºä½ çš„é¢„åŠ è½½éœ€æ±‚ï¼Œæµè§ˆå™¨æ ¹æ®è‡ªèº«çŠ¶æ€ï¼Œé€‰æ‹©åˆé€‚çš„æ—¶å€™é¢„åŠ è½½ã€‚ å¦‚æœä½ åœ¨ä¸å…¼å®¹ Resource Hints çš„æµè§ˆå™¨ä¸Šè¿›è¡Œé¢„åŠ è½½ï¼Œæˆ–è€…å¸Œæœ›æœ‰â€œæ›´å¼ºç¡¬çš„â€é¢„åŠ è½½æ§åˆ¶ï¼Œä½ å¯èƒ½ä¼šå¸Œæœ›ä½¿ç”¨ä¸€äº› JavaScript ä¸­çš„åŠŸèƒ½æ¥â€œå·§å¦™â€åœ°è¿›è¡Œé¢„åŠ è½½ã€‚ ä¾‹å¦‚å¯¹äºå›¾ç‰‡ï¼Œ let img = new Image(); img.src = '/static/img/prefetch.jpg'; ä¸Šé¢çš„æ–¹æ³•ä¼šè§¦å‘æµè§ˆå™¨åŠ è½½å›¾ç‰‡ï¼Œç„¶åç­‰åˆ°ç”¨æˆ·éœ€è¦æµè§ˆæ—¶ï¼Œå†å°†å…¶æ’å…¥åˆ°é¡µé¢å³å¯ã€‚ å¯¹äº JavaScript å’Œ CSS å¯ä»¥åŠ¨æ€æ·»åŠ  å’Œ æ ‡ç­¾ï¼Œä¸è¿‡è¦æ³¨æ„å®ƒä»¬åªæœ‰åœ¨æ·»åŠ åˆ°é¡µé¢æ—¶æµè§ˆå™¨æ‰ä¼šåŠ è½½ï¼ˆå°‘æ•°è€å¼æµè§ˆå™¨ä¸Šè¿™å—è¡¨ç°ä¼šä¸å¤ªä¸€æ ·ï¼‰ï¼Œç”±äºæ·»åŠ åˆ°é¡µé¢ååŠ è½½å®Œä¼šæ‰§è¡Œè¯¥èµ„æºï¼Œæ‰€ä»¥è¦é¿å…äº§ç”Ÿä¸éœ€è¦çš„å‰¯ä½œç”¨ï¼ˆå¦åˆ™å°±ä¸æ˜¯é¢„åŠ è½½äº†ï¼‰ã€‚ å¦‚æœä½ å¸Œæœ›é€šè¿‡ JavaScript æ¥è¿›è¡Œé¢„åŠ è½½ï¼Œå¯ä»¥ä½¿ç”¨ PreloadJS è¿™ä¸ªåº“ï¼Œå®ƒæä¾›äº†åŒ…æ‹¬è„šæœ¬ã€æ ·å¼ã€å›¾ç‰‡ã€å­—ä½“ã€SVGç­‰å„ç±»èµ„æºçš„é¢„åŠ è½½å™¨ã€‚ 2. è§†é¢‘é¢„åŠ è½½ è§†é¢‘é¢„åŠ è½½æŠ€æœ¯å¯ä»¥æœ‰æ•ˆæé«˜è§†é¢‘æ’­æ”¾çš„ç”¨æˆ·ä½“éªŒã€‚åœ¨ Fast Playback with Video Preload[5] ä¸­æåˆ°äº†ä¸‰ç§è§†é¢‘é¢„åŠ è½½æ–¹å¼ã€‚ 2.1. ä¸ºè§†é¢‘æ·»åŠ  preload å±æ€§ ä½¿ç”¨ preload å±æ€§å¯ä»¥è®©æµè§ˆå™¨é¢„åŠ è½½ç›¸åº”çš„å†…å®¹ã€‚å…¶å–å€¼ä¸ä½œç”¨å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š å€¼ ä½œç”¨ none ä¸è½½å…¥è§†é¢‘ï¼ˆå³ä¸é¢„åŠ è½½ï¼‰ meta è½½å…¥å…ƒæ•°æ®ï¼ˆæ—¶é•¿ã€å°ºå¯¸ã€æ–‡å­—è½¨é“ï¼‰ auto åŠ è½½æ•´ä¸ªè§†é¢‘ æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥è®¾ç½® poster å±æ€§ï¼Œå®ƒè§„å®šè§†é¢‘ä¸‹è½½æ—¶æˆ–ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æŒ‰é’®å‰æ’­æ”¾å™¨ä¸Šæ˜¾ç¤ºçš„å›¾åƒã€‚ä¸€ç§æ¨èçš„æ–¹å¼æ˜¯è®¾ç½® poster ä¸ preload: metaï¼Œä¸ºç”¨æˆ·æä¾›ä¸€å®šçš„æ’­æ”¾é¢„è§ˆä¿¡æ¯çš„åŒæ—¶é¿å…è¿‡å¤šçš„é¢„åŠ è½½æµé‡ã€‚ 2.2. ä½¿ç”¨ Preload Link è¿™ä¸€ç‚¹å·²ç»åœ¨ç¬¬ä¸€éƒ¨åˆ†æåˆ°äº†ï¼Œå¯ä»¥ä½¿ç”¨ è¿›è¡Œèµ„æºçš„é¢„åŠ è½½ã€‚ 2.3. ä½¿ç”¨ JavaScript è¿›è¡Œè‡ªå®šä¹‰çš„ Buffer æ“ä½œ å¯ä»¥é€šè¿‡ HTTP Range è¯·æ±‚å¤´æ¥è·å–å¼€å§‹çš„ä¸€å°æ®µè§†é¢‘æ•°æ®ï¼Œç„¶åä½¿ç”¨ MediaSource API æ¥è¿›è¡Œè§†é¢‘åª’ä½“æ•°æ®çš„æš‚å­˜ä¸æ’­æ”¾ã€‚ ä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç æ‘˜è‡ª Fast Playback with Video Preload - Manual bufferingï¼Œå®ƒå¯ä»¥å®ç°è§†é¢‘æ•°æ®çš„é¢„åŠ è½½ï¼Œæ›´å¤šç›¸å…³å®ç°å¯ä»¥å‚è§å…¶ä¸­å†…å®¹ã€‚ const mediaSource = new MediaSource(); video.src = URL.createObjectURL(mediaSource); mediaSource.addEventListener('sourceopen', sourceOpen, { once: true }); function sourceOpen() { URL.revokeObjectURL(video.src); const sourceBuffer = mediaSource.addSourceBuffer('video/webm; codecs=\"vp09.00.10.08\"'); // Fetch beginning of the video by setting the Range HTTP request header. fetch('file.webm', { headers: { range: 'bytes=0-567139' } }) .then(response => response.arrayBuffer()) .then(data => { sourceBuffer.appendBuffer(data); sourceBuffer.addEventListener('updateend', updateEnd, { once: true }); }); } function updateEnd() { // Video is now ready to play! var bufferedSeconds = video.buffered.end(0) - video.buffered.start(0); console.log(bufferedSeconds + ' seconds of video are ready to play!'); // Fetch the next segment of video when user starts playing the video. video.addEventListener('playing', fetchNextSegment, { once: true }); } function fetchNextSegment() { fetch('file.webm', { headers: { range: 'bytes=567140-1196488' } }) .then(response => response.arrayBuffer()) .then(data => { const sourceBuffer = mediaSource.sourceBuffers[0]; sourceBuffer.appendBuffer(data); // TODO: Fetch further segment and append it. }); } 3. é¢„åŠ è½½çš„ç­–ç•¥ é¢„åŠ è½½ä¸€èˆ¬éƒ½ä¼šé¢ä¸´ä¸€äº›çŸ›ç›¾ï¼š é¢„åŠ è½½èµ„æºè¿‡å¤šï¼Œå¯èƒ½å¯¼è‡´æµé‡æ¶ˆè€—è¿‡å¤§ï¼Œå ç”¨æ­£å¸¸è¯·æ±‚çš„é€šé“ï¼› é¢„åŠ è½½èµ„æºè¿‡å°‘ï¼Œå¯èƒ½å¯¼è‡´è¦†ç›–ç‡å¤ªä½ï¼Œå¯¹äºå¤§éƒ¨åˆ†èµ„æºç”¨æˆ·æ— æ³•äº«å—åˆ°é¢„åŠ è½½æ•ˆæœã€‚ è®¾è®¡ä¸€ä¸ªé«˜æ•ˆçš„é¢„åŠ è½½ç­–ç•¥æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„é—®é¢˜ ï¼Œè¿™é‡Œåªç®€å•ä»‹ç»ä¸€äº›å·¥å…·ã€‚ 3.1. quicklink quicklink æ˜¯ GoogleChromeLabs æ¨å‡ºçš„è½»é‡çº§åº“ï¼Œä½¿ç”¨ Resource Hints è¿›è¡Œé¢„åŠ è½½ï¼Œå¯¹äºä¸æ”¯æŒçš„æµè§ˆå™¨ä¼šå›é€€åˆ° XHR æ¨¡å¼ã€‚å®ƒçš„ç­–ç•¥å…¶å®éå¸¸ç›´æ¥ï¼Œæ ¸å¿ƒå°±æ˜¯å½“é“¾æ¥è¿›å…¥åˆ°è§†å£åï¼Œä¼šå¯¹å…¶è¿›è¡Œé¢„åŠ è½½ã€‚ å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥åŠ ä¸€äº›å…¶ä»–ç­–ç•¥ï¼Œä¾‹å¦‚è®¾å®šä¸€ä¸ª 200ms çš„åœç•™é˜ˆå€¼ã€‚æ€»ä½“è€Œè¨€ï¼Œå®ƒçš„ç­–ç•¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæ›´åƒæ˜¯ä¸ºå‰ç«¯é¢„åŠ è½½æä¾›ä¸€ä¸ªæ€è·¯ã€‚å¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥ä»è¿™ç¯‡æ–‡ç« ä¸­äº†è§£ quicklink çš„å®ç°ç»†èŠ‚[6]ã€‚ 3.2. Guess.js Guess.js åˆ™æ˜¯ä¸€ä¸ªæ›´ä¸ºå®Œå¤‡çš„å·¥å…·åŒ…ã€‚å®ƒä¼šç»“åˆå‰ç«¯è®¿é—®ä¸æ‰“ç‚¹çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ï¼Œç”šè‡³åº”ç”¨ä¸€äº›æœºå™¨å­¦ä¹ çš„æ¨¡å‹ï¼Œæ¥æä¾›ä¸€ä¸ªæ›´ç²¾ç»†åŒ–ã€æ›´å‡†ç¡®çš„é¢„åŠ è½½ç­–ç•¥ã€‚åŒæ—¶ï¼Œåœ¨é¢„åŠ è½½ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥å¸®åŠ©å®ç°æœ€ä¼˜çš„æ‰“åŒ…æ–¹å¼ã€åŠ è½½è·¯å¾„ç­‰ã€‚æ ¸å¿ƒå°±æ˜¯é€šè¿‡å¤§é‡çš„å®é™…ç”¨æˆ·æ•°æ®ï¼Œæ¥å¸®åŠ©å‰ç«¯æ€§èƒ½ä¼˜åŒ–åšå†³ç­–ä¸é¢„æµ‹ã€‚ ä½ å¯ä»¥æŸ¥çœ‹ Guess.js Repo æ¥è¿›ä¸€æ­¥äº†è§£å®ƒï¼Œæˆ–è€…é˜…è¯»è¿™ç¯‡ä»‹ç»æ–‡ç« [7]ã€‚ å…³äºé¢„åŠ è½½çš„è¯é¢˜å°±åˆ°è¿™äº†ï¼Œæˆ‘ä»¬çš„ã€Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€ä¹Ÿæ¥è¿‘å°¾å£°äº†ã€‚æœ€åä¸€ç«™ï¼Œè®©æˆ‘ä»¬å†å›æ¥ä»æ•´ä½“ç»´åº¦èŠèŠå‰ç«¯æ€§èƒ½ä¼˜åŒ–å§ã€‚ å°¾å£° æˆ‘ä»¬è¿™æ¬¡çš„ã€Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€å·²ç»åˆ°äº†å°¾å£°ï¼Œè¿˜è®°å¾—æˆ‘ä»¬è¿™æ¬¡æ—…ç¨‹çš„åˆè¡·ä¹ˆ â€”â€” ä»æ•´ä¸ªå‰ç«¯è®¿é—®é“¾æ¡çš„è§’åº¦ï¼Œæ¥ç†è§£ä¸æŒæ¡å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„çŸ¥è¯†å’ŒæŠ€æœ¯ã€‚ æœ€åï¼Œå†å’Œå¤§å®¶èŠä¸€èŠæ€§èƒ½ä¼˜åŒ–å®è·µç›¸å…³çš„è¯é¢˜ã€‚ 1. æ€§èƒ½æŒ‡æ ‡ Web å‘å±•åˆ°ç°ä»Šé˜¶æ®µï¼Œæ€§èƒ½æŒ‡æ ‡å·²ç»ä¸å†åªæ˜¯ DOMContentLoad å’Œ load è¿™æ ·çš„â€œé¢å‘æµè§ˆå™¨â€çš„æŒ‡æ ‡ï¼Œæ›´å¤šçš„ä¼šæ˜¯ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼ˆuser-centricï¼‰çš„æŒ‡æ ‡ï¼Œä¾‹å¦‚ï¼š FP (First Paint) FID (First Input Delay) FCP (First Contentful Paint) FMP (First Meaningful Paint) TTI (Time to interactive) â€¦â€¦ æ‰€ä»¥åœ¨æ€§èƒ½ä¼˜åŒ–ä¹‹å‰æœ€é‡è¦çš„è¿˜æ˜¯æ˜ç¡®ä½ çš„ç›‘æ§æŒ‡æ ‡å’Œåˆ†æç»´åº¦ï¼Œå…³äºæ€§èƒ½æŒ‡æ ‡å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥ç»§ç»­èŠä¸‹å»çš„å†…å®¹ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œä»¥åæœ‰æœºä¼šå¸Œæœ›æŠŠè¿™éƒ¨åˆ†ä¹Ÿè¡¥å……è¿›æ¥ã€‚ 2. æŒç»­ä¼˜åŒ– æ€§èƒ½ä¼˜åŒ–å¾ˆå¤šæ—¶å€™ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œæ›´ä¸æ˜¯ä¸€é”¤å­ä¹°å–ã€‚ä¸€ä¸ªè‰¯å¥½çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆä¸€å®šæ˜¯ä¸€ä¸ªæŒç»­å¾ªç¯çš„ä½“ç³»ã€‚ ä¸€ä¸ªåˆç†çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¸€å®šæ˜¯é€šè¿‡çº¿ä¸Šçš„æ€§èƒ½ç›‘æ§æ•°æ®ï¼Œæˆ–è€…å‰ç«¯è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•åˆ†æï¼Œå‘ç°æ€§èƒ½é—®é¢˜ï¼Œé’ˆå¯¹å‘ç°çš„é—®é¢˜è¿›è¡Œåˆ†æä¸å®šä½ï¼Œç„¶åè¿›è¡Œå¯¹åº”çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæœ€åä¸Šçº¿è§‚å¯Ÿã€‚ä¹‹ååˆä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–çš„å¾ªç¯ä¸­ã€‚æ‰€ä»¥æ¨è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œä¸€å®šè¦æ³¨é‡ä¼˜åŒ–å·¥ç¨‹çš„å¯æŒç»­æ€§ã€‚ 3. ç›‘æ§ä¸æµ‹è¯• ğŸ’» æ€§èƒ½ç›‘æ§ä¸æµ‹è¯•ä¹Ÿæ˜¯ä¸€å—éå¸¸å¤§çš„è¯é¢˜ï¼ŒåŒ…æ‹¬ç›‘æ§çš„æ‰‹æ®µã€åˆ†æçš„ç»´åº¦ç­‰ç­‰ï¼Œå¦‚æœåç»­æœ‰æœºä¼šå¸Œæœ›æŠŠè¿™å—å†è¡¥å……ä¸Šæ¥ã€‚è¿™é‡Œå…ˆä»‹ç»ä¸€ä¸‹ã€‚ æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠæ€§èƒ½æ•°æ®åˆ†ä¸ºä¸¤ç§[1]ï¼š ä¸€ç§å« Lab dataï¼Œä¸»è¦æ˜¯åœ¨å¼€å‘å’Œæµ‹è¯•äººå‘˜æœ¬åœ°æˆ–å†…éƒ¨æµ‹è¯•æœºå™¨ä¸Šè·‘å‡ºæ¥çš„æ•°æ®ï¼Œä¾‹å¦‚åœ¨ CI/CD ä¸­åŠ å…¥ lighthouseã€‚å®ƒçš„ä¼˜ç‚¹åœ¨äºé‡‡é›†çš„æŒ‡æ ‡æ›´å…¨é¢ï¼Œä¹Ÿæ˜“äºå¤ç°é—®é¢˜ï¼›ç¼ºç‚¹ä¸»è¦åœ¨äºæœ‰æ—¶å€™å¯èƒ½ä¸èƒ½ååº”çœŸå®çš„ç”¨æˆ·ä½“éªŒæƒ…å†µã€‚ å¦ä¸€ç§å« Field dataï¼Œä¹Ÿè¢«æˆä¸º RUM (Real User Monitoring)ï¼Œæ˜¯æŒ‡é‡‡é›†çº¿ä¸Šå®é™…çš„æ€§èƒ½æ•°æ®æ¥è¿›è¡Œç›‘æ§ã€‚å®ƒçš„ä¼˜ç‚¹åˆ™æ˜¯èƒ½æ›´å¥½åœ°å‘ç°ç”¨æˆ·å®é™…é‡åˆ°çš„æ€§èƒ½é—®é¢˜ï¼›ç¼ºç‚¹ä¸»è¦æ˜¯æ¯”è¾ƒéš¾ä»¥è°ƒè¯•ä¸å¤ç°é—®é¢˜ï¼ŒåŒæ—¶é‡‡é›†åˆ°çš„æŒ‡æ ‡çš„è¯¦ç»†ç¨‹åº¦ä¸åŠ Lab dataã€‚ è€Œ The Three Types of Performance Testing[2] åˆ™è¿›ä¸€æ­¥åˆ’åˆ†å‡ºäº†ä¸‰ç±»æ€§èƒ½æµ‹è¯•ã€‚ ç¬¬ä¸€ç§å«åš Proactiveï¼šå®ƒå¯ä»¥ç†è§£ä¸ºæ˜¯å·¥ç¨‹å¸ˆåœ¨å¼€å‘é˜¶æ®µï¼Œé€šè¿‡æµè§ˆå™¨è°ƒè¯•ç­‰æœ¬åœ°å·¥å…·æ¥å‘ç°å¹¶è§£å†³æ€§èƒ½é—®é¢˜ï¼ˆå–„äºåˆ©ç”¨ Chrome DevTools[3] ä¹Ÿæ˜¯ä¸€ä¸ªä¼˜ç§€å‰ç«¯å·¥ç¨‹å¸ˆæ‰€éœ€è¦å…·å¤‡çš„ ğŸ˜Šï¼‰ï¼› ç¬¬äºŒç§å«åš Reactiveï¼šå®ƒæ˜¯ä¸€ç§è‡ªåŠ¨åŒ–çš„æ€§èƒ½æµ‹è¯•ï¼Œå¯ä»¥é›†æˆåˆ°è‡ªåŠ¨åŒ–æµ‹è¯•æˆ–æµæ°´çº¿çš„å…¶ä»–é˜¶æ®µï¼Œä¼šåœ¨æ„å»ºä¸æ¯æ¬¡å‘å¸ƒå‰æ‰§è¡Œï¼› ç¬¬ä¸‰ç§å«åš Passiveï¼šå®ƒå°±æ˜¯åœ¨äº§å“å‘å¸ƒåï¼Œé€šè¿‡æ”¶é›†çº¿ä¸Šæ•°æ®ï¼ˆæˆ–ç”¨æˆ·åé¦ˆï¼‰æ¥å‘ç°æ€§èƒ½é—®é¢˜ï¼Œä¸»è¦æ˜¯åŸºäºä¸€äº› RUMã€‚ é€‰æ‹©å“ªç§æ€§èƒ½æµ‹è¯•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å°†å®ƒä»¬ç»“åˆä½¿ç”¨ï¼ˆå°±åƒæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ä¼šç»“åˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ä¸ç«¯åˆ°ç«¯æµ‹è¯•ï¼‰ã€‚ å¯¹äºä¸€äº›æ˜“äºæ ‡å‡†åŒ–çš„æ€§èƒ½æ ‡å‡†ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Proactive å’Œ Reactive è¿™æ ·çš„ Lab data æ¥é¿å…æ€§èƒ½é—®é¢˜ï¼›è€Œå¯¹äºæ›´å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œåˆ™å¯ä»¥é€šè¿‡ Passive æ¨¡å¼ä¸‹çš„ Field data è¿›è¡Œç›‘æ§ã€‚ 4. è‡ªåŠ¨åŒ– ğŸ›  åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šï¼Œè¯·åŠ¡å¿…å°†å¯ä»¥è‡ªåŠ¨åŒ–çš„å·¥ä½œéƒ½è‡ªåŠ¨åŒ–ã€‚ å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„é“¾è·¯åŒ…æ‹¬äº†ã€Œç¼“å­˜ -> å‘é€è¯·æ±‚ -> ç­‰å¾…å“åº” -> è§£æ -> å¤„ç†å„ç±»é™æ€èµ„æº -> è¿è¡Œæ—¶ -> é¢„åŠ è½½ï¼ˆç­‰å¾…åç»­çš„è¯·æ±‚ï¼‰ã€ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚å› æ­¤ï¼Œå»ºè®®é€šè¿‡ä¸€äº›å·¥å…·æ¥å°†å·¥ä½œè‡ªåŠ¨åŒ–ã€‚å¦åˆ™å¾ˆå¯èƒ½æ— æ³•ä¿è¯æ€§èƒ½ä¼˜åŒ–çš„æŒç»­å®æ–½ï¼Œå› ä¸ºå®ƒä»æ¥ä¸æ˜¯ä¸€é”¤å­ä¹°å–ã€‚ åœ¨æ—…ç¨‹ä¸­çš„å„ä¸ªæŠ€æœ¯ç‚¹ä¸Šï¼Œæˆ‘ä¹Ÿéƒ½ä¼šæåˆ°ä¸€äº›å¸®åŠ©å¿«é€Ÿå®ç°ä¼˜åŒ–æˆ–è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œä¾‹å¦‚ Workbox æä¾›çš„å„ç±»ç¼“å­˜æ–¹æ¡ˆã€å›¾ç‰‡å‹ç¼©çš„å·¥å…·ã€webpack æ’ä»¶ç­‰ã€‚è¿˜åŒ…æ‹¬ä¸Šé¢æåˆ°çš„ï¼Œå¯ä»¥åœ¨ CI/CD ä¸­é›†æˆçš„ lighthouse[4] è¿™æ ·çš„åˆ†æå·¥å…·ã€‚è€Œå¯¹äº RUMï¼Œå¦‚æœä½ ä»¬å…¬å¸æœ‰äººåŠ›å¯ä»¥è‡ªå»ºä¸€å¥—ä½“ç³»ï¼Œå¦‚æœè‡ªå»ºæˆæœ¬è¾ƒé«˜ï¼Œå¯ä»¥è€ƒè™‘æ¥å…¥ä¸€äº›å…è´¹æˆ–æ”¶è´¹çš„å•†ä¸šå…¬å¸äº§å“ã€‚ "},"æŠ€æœ¯ç¬”è®°/å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡ä¹‹RAIL.html":{"url":"æŠ€æœ¯ç¬”è®°/å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡ä¹‹RAIL.html","title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡ä¹‹RAIL","keywords":"","body":"å‰ç«¯æ€§èƒ½ä¼˜åŒ– - ç”¨RAILæ¨¡å‹åˆ†ææ€§èƒ½ RAILæ˜¯ä¸€ä¸ªä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æ¨¡å‹ï¼Œå®ƒæŠŠç”¨æˆ·çš„ä½“éªŒæ‹†åˆ†æˆå‡ ä¸ªå…³é”®ç‚¹ï¼ˆä¾‹å¦‚ï¼Œtapï¼Œscrollï¼Œloadï¼‰ï¼Œå¹¶ä¸”å¸®ä½ å®šä¹‰å¥½äº†æ¯ä¸€ä¸ªçš„æ€§èƒ½æŒ‡æ ‡ã€‚ æœ‰ä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š Response Animation Idle Load èšç„¦ç”¨æˆ· ä»¥ä¸‹æ˜¯ç”¨æˆ·å¯¹æ€§èƒ½å»¶è¿Ÿçš„æ„ŸçŸ¥ï¼š å»¶è¿Ÿæ—¶é—´ ç”¨æˆ·æ„ŸçŸ¥ 0-16ms å¾ˆæµç•… 0-100ms åŸºæœ¬æµç•… 100-1000ms æ„Ÿè§‰åˆ°ç½‘ç«™ä¸Šæœ‰ä¸€äº›åŠ è½½ä»»åŠ¡ 1000ms or more å¤±å»è€å¿ƒäº† 10000ms or more ç›´æ¥ç¦»å¼€ï¼Œä¸ä¼šå†è®¿é—®äº† Response: äº‹ä»¶å¤„ç†æœ€å¥½åœ¨50mså†…å®Œæˆ ç›®æ ‡ ç”¨æˆ·çš„è¾“å…¥åˆ°å“åº”çš„æ—¶é—´ä¸è¶…è¿‡100msï¼Œç»™ç”¨æˆ·çš„æ„Ÿå—æ˜¯ç¬é—´å°±å®Œæˆäº†ã€‚ ä¼˜åŒ–æ–¹æ¡ˆ äº‹ä»¶å¤„ç†å‡½æ•°åœ¨50mså†…å®Œæˆï¼Œè€ƒè™‘åˆ°idle taskçš„æƒ…å†µï¼Œäº‹ä»¶ä¼šæ’é˜Ÿï¼Œç­‰å¾…æ—¶é—´å¤§æ¦‚åœ¨50msã€‚é€‚ç”¨äºclickï¼Œtoggleï¼Œstarting animationsç­‰ï¼Œä¸é€‚ç”¨äºdragå’Œscrollã€‚ å¤æ‚çš„jsè®¡ç®—å°½å¯èƒ½æ”¾åœ¨åå°ï¼Œå¦‚web workerï¼Œé¿å…å¯¹ç”¨æˆ·è¾“å…¥é€ æˆé˜»å¡ è¶…è¿‡50msçš„å“åº”ï¼Œä¸€å®šè¦æä¾›åé¦ˆï¼Œæ¯”å¦‚å€’è®¡æ—¶ï¼Œè¿›åº¦ç™¾åˆ†æ¯”ç­‰ã€‚ idle taskï¼šé™¤äº†è¦å¤„ç†è¾“å…¥äº‹ä»¶ï¼Œæµè§ˆå™¨è¿˜æœ‰å…¶å®ƒä»»åŠ¡è¦åšï¼Œè¿™äº›ä»»åŠ¡ä¼šå ç”¨éƒ¨åˆ†æ—¶é—´ï¼Œä¸€èˆ¬æƒ…å†µä¼šèŠ±è´¹50msçš„æ—¶é—´ï¼Œè¾“å…¥äº‹ä»¶çš„å“åº”åˆ™æ’åœ¨å…¶åã€‚ ä¸‹å›¾æ˜¯idle taskå¯¹input responseçš„å½±å“ï¼š Animation: åœ¨10mså†…äº§ç”Ÿä¸€å¸§ ç›®æ ‡ äº§ç”Ÿæ¯ä¸€å¸§çš„æ—¶é—´ä¸è¦è¶…è¿‡10msï¼Œä¸ºäº†ä¿è¯æµè§ˆå™¨60å¸§ï¼Œæ¯ä¸€å¸§çš„æ—¶é—´åœ¨16mså·¦å³ï¼Œä½†æµè§ˆå™¨éœ€è¦ç”¨6msæ¥æ¸²æŸ“æ¯ä¸€å¸§ã€‚ æ—¨åœ¨è§†è§‰ä¸Šçš„å¹³æ»‘ã€‚ç”¨æˆ·å¯¹å¸§ç‡å˜åŒ–æ„ŸçŸ¥å¾ˆæ•æ„Ÿã€‚ ä¼˜åŒ–æ–¹æ¡ˆ åœ¨ä¸€äº›é«˜å‹ç‚¹ä¸Šï¼Œæ¯”å¦‚åŠ¨ç”»ï¼Œä¸è¦å»æŒ‘æˆ˜cpuï¼Œå°½å¯èƒ½åœ°å°‘åšäº‹ï¼Œå¦‚ï¼šå–offsetï¼Œè®¾ç½®styleç­‰æ“ä½œã€‚å°½å¯èƒ½åœ°ä¿è¯60å¸§çš„ä½“éªŒã€‚ åœ¨æ¸²æŸ“æ€§èƒ½ä¸Šï¼Œé’ˆå¯¹ä¸åŒçš„åŠ¨ç”»åšä¸€äº›ç‰¹å®šä¼˜åŒ– åŠ¨ç”»ä¸åªæ˜¯UIçš„è§†è§‰æ•ˆæœï¼Œä»¥ä¸‹è¡Œä¸ºéƒ½å±äº è§†è§‰åŠ¨ç”»ï¼Œå¦‚æ¸éšæ¸æ˜¾ï¼Œtweensï¼Œloadingç­‰ æ»šåŠ¨ï¼ŒåŒ…å«å¼¹æ€§æ»šåŠ¨ï¼Œæ¾å¼€æ‰‹æŒ‡åï¼Œæ»šåŠ¨ä¼šæŒç»­ä¸€æ®µè·ç¦» æ‹–æ‹½ï¼Œç¼©æ”¾ï¼Œç»å¸¸ä¼´éšç€ç”¨æˆ·è¡Œä¸º Idle: æœ€å¤§åŒ–ç©ºé—²æ—¶é—´ ç›®æ ‡ æœ€å¤§åŒ–ç©ºé—²æ—¶é—´ï¼Œä»¥å¢å¤§50mså†…å“åº”ç”¨æˆ·è¾“å…¥çš„å‡ ç‡ ä¼˜åŒ–æ–¹æ¡ˆ ç”¨ç©ºé—²æ—¶é—´æ¥å®Œæˆä¸€äº›å»¶åçš„å·¥ä½œï¼Œå¦‚å…ˆåŠ è½½é¡µé¢å¯è§çš„éƒ¨åˆ†ï¼Œç„¶ååˆ©ç”¨ç©ºé—²æ—¶é—´åŠ è½½å‰©ä½™éƒ¨åˆ†ï¼Œæ­¤å¤„å¯ä»¥ä½¿ç”¨ requestIdleCallback API åœ¨ç©ºé—²æ—¶é—´å†…æ‰§è¡Œçš„ä»»åŠ¡å°½é‡æ§åˆ¶åœ¨50msä»¥å†…ï¼Œå¦‚æœæ›´é•¿çš„è¯ï¼Œä¼šå½±å“input handleçš„pendingæ—¶é—´ å¦‚æœç”¨æˆ·åœ¨ç©ºé—²æ—¶é—´ä»»åŠ¡è¿›è¡Œæ—¶è¿›è¡Œäº¤äº’ï¼Œå¿…é¡»ä»¥æ­¤ä¸ºæœ€é«˜ä¼˜å…ˆçº§ï¼Œå¹¶æš‚åœç©ºé—²æ—¶é—´çš„ä»»åŠ¡ Load: ä¼ è¾“å†…å®¹åˆ°é¡µé¢å¯äº¤äº’çš„æ—¶é—´ä¸è¶…è¿‡5ç§’ å¦‚æœé¡µé¢åŠ è½½æ¯”è¾ƒæ…¢ï¼Œç”¨æˆ·çš„äº¤ç‚¹å¯èƒ½ä¼šç¦»å¼€ã€‚åŠ è½½å¾ˆå¿«çš„é¡µé¢ï¼Œç”¨æˆ·å¹³å‡åœç•™æ—¶é—´ä¼šå˜é•¿ï¼Œè·³å‡ºç‡ä¼šæ›´ä½ï¼Œä¹Ÿå°±æœ‰æ›´é«˜çš„å¹¿å‘ŠæŸ¥çœ‹ç‡ ç›®æ ‡ ä¼˜åŒ–åŠ è½½é€Ÿåº¦ï¼Œå¯ä»¥æ ¹æ®è®¾å¤‡ã€ç½‘ç»œç­‰æ¡ä»¶ã€‚ç›®å‰ï¼Œæ¯”è¾ƒå¥½çš„ä¸€ä¸ªæ–¹å¼æ˜¯ï¼Œè®©ä½ çš„é¡µé¢åœ¨ä¸€ä¸ªä¸­é…çš„3Gç½‘ç»œæ‰‹æœºä¸Šæ‰“å¼€æ—¶é—´ä¸è¶…è¿‡5ç§’ å¯¹äºç¬¬äºŒæ¬¡æ‰“å¼€ï¼Œå°½é‡ä¸è¶…è¿‡2ç§’ ä¼˜åŒ–æ–¹æ¡ˆ åœ¨æ‰‹æœºè®¾å¤‡ä¸Šæµ‹è¯•åŠ è½½æ€§èƒ½ï¼Œé€‰ç”¨ä¸­é…çš„3Gç½‘ç»œï¼ˆ400kb/sï¼Œ400ms RTTï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ WebPageTest æ¥æµ‹è¯• è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿ç”¨æˆ·çš„ç½‘ç»œæ˜¯4Gï¼Œä½†å› ä¸ºä¸¢åŒ…æˆ–è€…ç½‘ç»œæ³¢åŠ¨ï¼Œå¯èƒ½ä¼šæ¯”é¢„æœŸçš„æ›´æ…¢ ç¦ç”¨æ¸²æŸ“é˜»å¡çš„èµ„æºï¼Œå»¶ååŠ è½½ å¯ä»¥é‡‡ç”¨ lazy loadï¼Œcode-splitting ç­‰ å…¶ä»–ä¼˜åŒ– æ‰‹æ®µï¼Œè®©ç¬¬ä¸€æ¬¡åŠ è½½çš„èµ„æºæ›´å°‘ "},"æŠ€æœ¯ç¬”è®°/å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ historyæ¨¡å¼.html":{"url":"æŠ€æœ¯ç¬”è®°/å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ historyæ¨¡å¼.html","title":"å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šHashæ¨¡å¼å’Œ Historyæ¨¡å¼","keywords":"","body":"å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ historyæ¨¡å¼ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è·¯ç”± ç°åœ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºè¶Šæ¥è¶Šå¤šçš„ä½¿ç”¨AJAXå¼‚æ­¥è¯·æ±‚å®Œæˆé¡µé¢çš„æ— ç¼åˆ·æ–°ï¼Œå¯¼è‡´æµè§ˆå™¨çš„URLä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–è€Œå®Œæˆäº†è¯·æ±‚ï¼Œä»è€Œç ´åäº†ç”¨æˆ·æµè§ˆä½“éªŒã€‚åŒæ—¶æœ¬æ¬¡æµè§ˆçš„é¡µé¢å†…å®¹åœ¨ç”¨æˆ·ä¸‹æ¬¡ä½¿ç”¨URLè®¿é—®æ—¶å°†æ— æ³•é‡æ–°å‘ˆç°ï¼Œä½¿ç”¨è·¯ç”±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å•é¡µé¢åº”ç”¨åˆ©ç”¨äº†JavaScriptåŠ¨æ€å˜æ¢ç½‘é¡µå†…å®¹ï¼Œé¿å…äº†é¡µé¢é‡è½½ï¼›è·¯ç”±åˆ™æä¾›äº†æµè§ˆå™¨åœ°å€å˜åŒ–ï¼Œç½‘é¡µå†…å®¹ä¹Ÿè·Ÿéšå˜åŒ–ï¼Œä¸¤è€…ç»“åˆèµ·æ¥åˆ™ä¸ºæˆ‘ä»¬æä¾›äº†ä½“éªŒè‰¯å¥½çš„å•é¡µé¢webåº”ç”¨ã€‚ å‰ç«¯è·¯ç”±å®ç°æ–¹å¼ è·¯ç”±éœ€è¦å®ç°ä¸‰ä¸ªåŠŸèƒ½ï¼š å½“æµè§ˆå™¨åœ°å€å˜åŒ–æ—¶ï¼Œåˆ‡æ¢é¡µé¢ï¼› ç‚¹å‡»æµè§ˆå™¨ã€åé€€ã€‘ã€ã€å‰è¿›ã€‘æŒ‰é’®ï¼Œç½‘é¡µå†…å®¹è·Ÿéšå˜åŒ–ï¼› åˆ·æ–°æµè§ˆå™¨ï¼Œç½‘é¡µåŠ è½½å½“å‰è·¯ç”±å¯¹åº”å†…å®¹ï¼› åœ¨å•é¡µé¢webç½‘é¡µä¸­, å•çº¯çš„æµè§ˆå™¨åœ°å€æ”¹å˜, ç½‘é¡µä¸ä¼šé‡è½½ï¼Œå¦‚å•çº¯çš„hashç½‘å€æ”¹å˜ç½‘é¡µä¸ä¼šå˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬çš„è·¯ç”±ä¸»è¦æ˜¯é€šè¿‡ç›‘å¬äº‹ä»¶ï¼Œå¹¶åˆ©ç”¨jså®ç°åŠ¨æ€æ”¹å˜ç½‘é¡µå†…å®¹ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š hashæ¨¡å¼ï¼šç›‘å¬æµè§ˆå™¨åœ°å€hashå€¼å˜åŒ–ï¼Œæ‰§è¡Œç›¸åº”çš„jsåˆ‡æ¢ç½‘é¡µï¼› historyæ¨¡å¼ï¼šåˆ©ç”¨history APIå®ç°urlåœ°å€æ”¹å˜ï¼Œç½‘é¡µå†…å®¹æ”¹å˜ï¼› å®ƒä»¬çš„åŒºåˆ«æœ€æ˜æ˜¾çš„å°±æ˜¯hashä¼šåœ¨æµè§ˆå™¨åœ°å€åé¢å¢åŠ #å·ï¼Œè€Œhistoryå¯ä»¥è‡ªå®šä¹‰åœ°å€ã€‚ hashæ¨¡å¼ ä½¿ç”¨window.location.hashå±æ€§åŠçª—å£çš„onhashchangeäº‹ä»¶ï¼Œå¯ä»¥å®ç°ç›‘å¬æµè§ˆå™¨åœ°å€hashå€¼å˜åŒ–ï¼Œæ‰§è¡Œç›¸åº”çš„jsåˆ‡æ¢ç½‘é¡µã€‚ä¸‹é¢å…·ä½“ä»‹ç»å‡ ä¸ªä½¿ç”¨è¿‡ç¨‹ä¸­å¿…é¡»ç†è§£çš„è¦ç‚¹ï¼š hashæŒ‡çš„æ˜¯åœ°å€ä¸­#å·ä»¥åŠåé¢çš„å­—ç¬¦ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—å€¼ã€‚hashä¹Ÿç§°ä½œé”šç‚¹ï¼Œæœ¬èº«æ˜¯ç”¨æ¥åšé¡µé¢è·³è½¬å®šä½çš„ã€‚å¦‚http://localhost/index.html#abcï¼Œè¿™é‡Œçš„#abcå°±æ˜¯hashï¼› æ•£åˆ—å€¼æ˜¯ä¸ä¼šéšè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ç«¯çš„ï¼Œæ‰€ä»¥æ”¹å˜hashï¼Œä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ï¼› ç›‘å¬ window çš„ hashchange äº‹ä»¶ï¼Œå½“æ•£åˆ—å€¼æ”¹å˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ location.hash æ¥è·å–å’Œè®¾ç½®hashå€¼ï¼› location.hashå€¼çš„å˜åŒ–ä¼šç›´æ¥ååº”åˆ°æµè§ˆå™¨åœ°å€æ ï¼› è§¦å‘hashchangeäº‹ä»¶çš„å‡ ç§æƒ…å†µï¼š æµè§ˆå™¨åœ°å€æ æ•£åˆ—å€¼çš„å˜åŒ–ï¼ˆåŒ…æ‹¬æµè§ˆå™¨çš„å‰è¿›ã€åé€€ï¼‰ä¼šè§¦å‘window.location.hashå€¼çš„å˜åŒ–ï¼Œä»è€Œè§¦å‘onhashchangeäº‹ä»¶ï¼› å½“æµè§ˆå™¨åœ°å€æ ä¸­URLåŒ…å«å“ˆå¸Œå¦‚ http://www.baidu.com/#homeï¼Œè¿™æ—¶æŒ‰ä¸‹è¾“å…¥ï¼Œæµè§ˆå™¨å‘é€http://www.baidu.com/è¯·æ±‚è‡³æœåŠ¡å™¨ï¼Œè¯·æ±‚å®Œæ¯•ä¹‹åè®¾ç½®æ•£åˆ—å€¼ä¸º#homeï¼Œè¿›è€Œè§¦å‘onhashchangeäº‹ä»¶ï¼› å½“åªæ”¹å˜æµè§ˆå™¨åœ°å€æ URLçš„å“ˆå¸Œéƒ¨åˆ†ï¼Œè¿™æ—¶æŒ‰ä¸‹å›è½¦ï¼Œæµè§ˆå™¨ä¸ä¼šå‘é€ä»»ä½•è¯·æ±‚è‡³æœåŠ¡å™¨ï¼Œè¿™æ—¶å‘ç”Ÿçš„åªæ˜¯è®¾ç½®æ•£åˆ—å€¼æ–°ä¿®æ”¹çš„å“ˆå¸Œå€¼ï¼Œå¹¶è§¦å‘onhashchangeäº‹ä»¶ï¼› htmlä¸­æ ‡ç­¾çš„å±æ€§ href å¯ä»¥è®¾ç½®ä¸ºé¡µé¢çš„å…ƒç´ IDå¦‚ #topï¼Œå½“ç‚¹å‡»è¯¥é“¾æ¥æ—¶é¡µé¢è·³è½¬è‡³è¯¥idå…ƒç´ æ‰€åœ¨åŒºåŸŸï¼ŒåŒæ—¶æµè§ˆå™¨è‡ªåŠ¨è®¾ç½® window.location.hash å±æ€§ï¼Œåœ°å€æ ä¸­çš„å“ˆå¸Œå€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¹¶è§¦å‘onhashchangeäº‹ä»¶ï¼› //è®¾ç½® url çš„ hashï¼Œä¼šåœ¨å½“å‰urlååŠ ä¸Š'#abc' window.location.hash='abc'; let hash = window.location.hash //'#abc' window.addEventListener('hashchange',function(){ //ç›‘å¬hashå˜åŒ–ï¼Œç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›åé€€ä¼šè§¦å‘ }) historyæ¨¡å¼ æ¦‚è¿° window.history å±æ€§æŒ‡å‘ History å¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºå½“å‰çª—å£çš„æµè§ˆå†å²ã€‚å½“å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåªä¼šæ”¹å˜é¡µé¢çš„è·¯å¾„ï¼Œä¸ä¼šåˆ·æ–°é¡µé¢ã€‚ History å¯¹è±¡ä¿å­˜äº†å½“å‰çª—å£è®¿é—®è¿‡çš„æ‰€æœ‰é¡µé¢ç½‘å€ã€‚é€šè¿‡ history.length å¯ä»¥å¾—å‡ºå½“å‰çª—å£ä¸€å…±è®¿é—®è¿‡å‡ ä¸ªç½‘å€ã€‚ ç”±äºå®‰å…¨åŸå› ï¼Œæµè§ˆå™¨ä¸å…è®¸è„šæœ¬è¯»å–è¿™äº›åœ°å€ï¼Œä½†æ˜¯å…è®¸åœ¨åœ°å€ä¹‹é—´å¯¼èˆªã€‚ æµè§ˆå™¨å·¥å…·æ çš„â€œå‰è¿›â€å’Œâ€œåé€€â€æŒ‰é’®ï¼Œå…¶å®å°±æ˜¯å¯¹ History å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ å±æ€§ History å¯¹è±¡ä¸»è¦æœ‰ä¸¤ä¸ªå±æ€§ã€‚ History.lengthï¼šå½“å‰çª—å£è®¿é—®è¿‡çš„ç½‘å€æ•°é‡ï¼ˆåŒ…æ‹¬å½“å‰ç½‘é¡µï¼‰ History.stateï¼šHistory å †æ ˆæœ€ä¸Šå±‚çš„çŠ¶æ€å€¼ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ // å½“å‰çª—å£è®¿é—®è¿‡å¤šå°‘ä¸ªç½‘é¡µ history.length // 1 // History å¯¹è±¡çš„å½“å‰çŠ¶æ€ // é€šå¸¸æ˜¯ undefinedï¼Œå³æœªè®¾ç½® history.state // undefined æ–¹æ³• History.back()ã€History.forward()ã€History.go() è¿™ä¸‰ä¸ªæ–¹æ³•ç”¨äºåœ¨å†å²ä¹‹ä¸­ç§»åŠ¨ã€‚ History.back()ï¼šç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªç½‘å€ï¼Œç­‰åŒäºç‚¹å‡»æµè§ˆå™¨çš„åé€€é”®ã€‚å¯¹äºç¬¬ä¸€ä¸ªè®¿é—®çš„ç½‘å€ï¼Œè¯¥æ–¹æ³•æ— æ•ˆæœã€‚ History.forward()ï¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªç½‘å€ï¼Œç­‰åŒäºç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›é”®ã€‚å¯¹äºæœ€åä¸€ä¸ªè®¿é—®çš„ç½‘å€ï¼Œè¯¥æ–¹æ³•æ— æ•ˆæœã€‚ History.go()ï¼šæ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œä»¥å½“å‰ç½‘å€ä¸ºåŸºå‡†ï¼Œç§»åŠ¨åˆ°å‚æ•°æŒ‡å®šçš„ç½‘å€ã€‚å¦‚æœå‚æ•°è¶…è¿‡å®é™…å­˜åœ¨çš„ç½‘å€èŒƒå›´ï¼Œè¯¥æ–¹æ³•æ— æ•ˆæœï¼›å¦‚æœä¸æŒ‡å®šå‚æ•°ï¼Œé»˜è®¤å‚æ•°ä¸º0ï¼Œç›¸å½“äºåˆ·æ–°å½“å‰é¡µé¢ã€‚ history.back(); history.forward(); history.go(1);//ç›¸å½“äºhistory.forward() history.go(-1);//ç›¸å½“äºhistory.back() history.go(0); // åˆ·æ–°å½“å‰é¡µé¢ æ³¨æ„ï¼šç§»åŠ¨åˆ°ä»¥å‰è®¿é—®è¿‡çš„é¡µé¢æ—¶ï¼Œé¡µé¢é€šå¸¸æ˜¯ä»æµè§ˆå™¨ç¼“å­˜ä¹‹ä¸­åŠ è½½ï¼Œè€Œä¸æ˜¯é‡æ–°è¦æ±‚æœåŠ¡å™¨å‘é€æ–°çš„ç½‘é¡µã€‚ History.pushState() è¯¥æ–¹æ³•ç”¨äºåœ¨å†å²ä¸­æ·»åŠ ä¸€æ¡è®°å½•ã€‚pushState()æ–¹æ³•ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°ï¼Œåªæ˜¯å¯¼è‡´ History å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œåœ°å€æ ä¼šæœ‰å˜åŒ–ã€‚ è¯­æ³•ï¼šhistory.pushState(object, title, url) è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºï¼š objectï¼šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ pushState æ–¹æ³•å¯ä»¥å°†è¯¥å¯¹è±¡å†…å®¹ä¼ é€’åˆ°æ–°é¡µé¢ä¸­ã€‚å¦‚æœä¸éœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œæ­¤å¤„å¯ä»¥å¡« nullã€‚ titleï¼šæŒ‡æ ‡é¢˜ï¼Œå‡ ä¹æ²¡æœ‰æµè§ˆå™¨æ”¯æŒè¯¥å‚æ•°ï¼Œä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ¯”è¾ƒå®‰å…¨ã€‚ urlï¼šæ–°çš„ç½‘å€ï¼Œå¿…é¡»ä¸å½“å‰é¡µé¢å¤„åœ¨åŒä¸€ä¸ªåŸŸã€‚ä¸æŒ‡å®šçš„è¯åˆ™ä¸ºå½“å‰çš„è·¯å¾„ï¼Œå¦‚æœè®¾ç½®äº†ä¸€ä¸ªè·¨åŸŸç½‘å€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚ var data = { foo: 'bar' }; history.pushState(data, '', '2.html'); console.log(history.state) // {foo: \"bar\"} æ³¨æ„ï¼šå¦‚æœ pushState çš„ URL å‚æ•°è®¾ç½®äº†ä¸€ä¸ªæ–°çš„é”šç‚¹å€¼ï¼ˆå³ hashï¼‰ï¼Œå¹¶ä¸ä¼šè§¦å‘ hashchange äº‹ä»¶ã€‚åè¿‡æ¥ï¼Œå¦‚æœ URL çš„é”šç‚¹å€¼å˜äº†ï¼Œåˆ™ä¼šåœ¨ History å¯¹è±¡åˆ›å»ºä¸€æ¡æµè§ˆè®°å½•ã€‚ å¦‚æœ pushState() æ–¹æ³•è®¾ç½®äº†ä¸€ä¸ªè·¨åŸŸç½‘å€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ // å½“å‰ç½‘å€ä¸º http://example.com history.pushState(null, '', 'https://twitter.com/hello'); ä¸Šé¢ä»£ç ä¸­ï¼ŒpushState æƒ³è¦æ’å…¥ä¸€ä¸ªè·¨åŸŸçš„ç½‘å€ï¼Œå¯¼è‡´æŠ¥é”™ã€‚è¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ï¼Œé˜²æ­¢æ¶æ„ä»£ç è®©ç”¨æˆ·ä»¥ä¸ºä»–ä»¬æ˜¯åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¯¼è‡´é¡µé¢è·³è½¬ã€‚ History.replaceState() è¯¥æ–¹æ³•ç”¨æ¥ä¿®æ”¹ History å¯¹è±¡çš„å½“å‰è®°å½•ï¼Œç”¨æ³•ä¸ pushState() æ–¹æ³•ä¸€æ ·ã€‚ å‡å®šå½“å‰ç½‘é¡µæ˜¯ example.com/example.htmlã€‚ history.pushState({page: 1}, '', '?page=1') // URL æ˜¾ç¤ºä¸º http://example.com/example.html?page=1 history.pushState({page: 2}, '', '?page=2'); // URL æ˜¾ç¤ºä¸º http://example.com/example.html?page=2 history.replaceState({page: 3}, '', '?page=3'); // URL æ˜¾ç¤ºä¸º http://example.com/example.html?page=3 history.back() // URL æ˜¾ç¤ºä¸º http://example.com/example.html?page=1 history.back() // URL æ˜¾ç¤ºä¸º http://example.com/example.html history.go(2) // URL æ˜¾ç¤ºä¸º http://example.com/example.html?page=3 popstate äº‹ä»¶ æ¯å½“ history å¯¹è±¡å‡ºç°å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘ popstate äº‹ä»¶ã€‚ æ³¨æ„ï¼š ä»…ä»…è°ƒç”¨pushState()æ–¹æ³•æˆ–replaceState()æ–¹æ³• ï¼Œå¹¶ä¸ä¼šè§¦å‘è¯¥äº‹ä»¶; åªæœ‰ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨å€’é€€æŒ‰é’®å’Œå‰è¿›æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨ JavaScript è°ƒç”¨History.back()ã€History.forward()ã€History.go()æ–¹æ³•æ—¶æ‰ä¼šè§¦å‘ã€‚ å¦å¤–ï¼Œè¯¥äº‹ä»¶åªé’ˆå¯¹åŒä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœæµè§ˆå†å²çš„åˆ‡æ¢ï¼Œå¯¼è‡´åŠ è½½ä¸åŒçš„æ–‡æ¡£ï¼Œè¯¥äº‹ä»¶ä¹Ÿä¸ä¼šè§¦å‘ã€‚ é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸ä¼šè§¦å‘popstateäº‹ä»¶ã€‚ ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä¸ºpopstateäº‹ä»¶æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª event äº‹ä»¶å¯¹è±¡ï¼Œå®ƒçš„ state å±æ€§æŒ‡å‘å½“å‰çš„ state å¯¹è±¡ã€‚ window.addEventListener('popstate', function(e) { //e.state ç›¸å½“äº history.state console.log('state: ' + JSON.stringify(e.state)); console.log(history.state); }); ç‚¹å‡»æŸ¥çœ‹ é€šè¿‡history.pushState å®ç°é¡µé¢ tab åˆ‡æ¢çš„åŠŸèƒ½ã€‚ history è‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯å½“æ”¹å˜é¡µé¢åœ°å€åï¼Œå¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨æ—¶ï¼Œï¼ˆå¦‚æœåç«¯æ²¡æœ‰åšå‡†å¤‡çš„è¯ï¼‰ä¼šæŠ¥é”™ï¼Œå› ä¸ºåˆ·æ–°æ˜¯æ‹¿å½“å‰åœ°å€å»è¯·æ±‚æœåŠ¡å™¨çš„ï¼Œå¦‚æœæœåŠ¡å™¨ä¸­æ²¡æœ‰ç›¸åº”çš„å“åº”ï¼Œä¼šå‡ºç° 404 é¡µé¢ã€‚ "},"æŠ€æœ¯ç¬”è®°/å±‚å ä¸Šä¸‹æ–‡.html":{"url":"æŠ€æœ¯ç¬”è®°/å±‚å ä¸Šä¸‹æ–‡.html","title":"å±‚å ä¸Šä¸‹æ–‡","keywords":"","body":"CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº ä¸€ã€ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ å±‚å ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œè·Ÿã€Œå—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡(BFC)ã€ç±»ä¼¼ã€‚è¯´åˆ°å±‚å ä¸Šä¸‹æ–‡ï¼Œå¤§å®¶å¯èƒ½ä¼šæƒ³åˆ°CSSä¸­çš„z-indexå±æ€§ï¼Œéœ€è¦è·Ÿå¤§å®¶è®²çš„æ˜¯ï¼Œz-indexå®é™…ä¸Šåªæ˜¯CSSå±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåºä¸­çš„ä¸€å¶å°èˆŸã€‚ å±‚å ä¸Šä¸‹æ–‡ï¼Œè‹±æ–‡ç§°ä½œâ€stacking contextâ€. æ˜¯HTMLä¸­çš„ä¸€ä¸ªä¸‰ç»´çš„æ¦‚å¿µã€‚å¦‚æœä¸€ä¸ªå…ƒç´ å«æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªå…ƒç´ åœ¨zè½´ä¸Šå°±â€œé«˜äººä¸€ç­‰â€ã€‚ è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªåè¯-zè½´ï¼ŒæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¡¨ç¤ºçš„æ˜¯ç”¨æˆ·ä¸å±å¹•çš„è¿™æ¡çœ‹ä¸è§çš„å‚ç›´çº¿ï¼ˆå›¾ä¸­è“çº¿ï¼‰ ä¸€ä¸ªé¡µé¢æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„æ˜¯å¹³é¢çš„ï¼Œæˆ‘ä»¬æ„Ÿè§‰å®ƒå°±æ˜¯ä¸€ä¸ªæ°´å¹³é¢ï¼ˆäºŒç»´ï¼‰çš„ä¸œè¥¿ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå…ƒç´ äº’ç›¸ä¹‹é—´è¦†ç›–ï¼Œè¿™å°±è¯´æ˜ï¼Œå®ƒä»¬åœ¨å‚ç›´æ–¹å‘ä¸Šæ˜¯æœ‰é¡ºåºçš„ã€‚ä¸€ä¸ªç›’åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå°±æ˜¯ç»™å®ƒè‡ªå·±åˆ’äº†ä¸€ç‰‡è‡ªæ²»åŒºï¼Œä¸‹é¢çš„ç›’æ— è®ºæ˜¯æ’èµ„è®ºè¾ˆï¼ŒæŠ‘æˆ–æ˜¯åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œéƒ½åªèƒ½åœ¨è¿™ç‰‡åŒºé‡Œé¢å¾…ç€ã€‚ äºŒã€ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³ å†æ¥è¯´è¯´å±‚å æ°´å¹³ã€‚â€œå±‚å æ°´å¹³â€è‹±æ–‡ç§°ä½œâ€stacking levelâ€ï¼Œå†³å®šäº†åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ä¸­å…ƒç´ åœ¨zè½´ä¸Šçš„æ˜¾ç¤ºé¡ºåºã€‚levelè¿™ä¸ªè¯å¾ˆå®¹æ˜“è®©æˆ‘ä»¬è”æƒ³åˆ°æˆ‘ä»¬çœŸæ­£ä¸–ç•Œä¸­çš„ä¸‰å…­ä¹ç­‰ã€è®ºèµ„æ’è¾ˆã€‚çœŸå®ä¸–ç•Œä¸­ï¼Œæ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼ŒåŒ…æ‹¬åŒåµåŒèƒèƒï¼Œæœ‰å·®å¼‚å°±æœ‰åŒºåˆ†ã€‚ä¾‹å¦‚ï¼ŒåŒèƒèƒè™½ç„¶é•¿å¾—åƒCtrl+C/Ctrl+Vå¾—åˆ°çš„ï¼Œä½†å®é™…ä¸Šï¼Œå‡ºç”Ÿæ—¶é—´è¿˜æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå…ˆå‡ºç”Ÿçš„é‚£ä¸ªå°±å¤§ï¼Œå¤§å“¥æˆ–å¤§å§ã€‚ç½‘é¡µä¸­çš„å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé¡µé¢ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼Œä»–ä»¬ä¸€å®šæ˜¯ä¼šæœ‰ä¸€ä¸ªç±»ä¼¼çš„æ’åæ’åºçš„æƒ…å†µå­˜åœ¨ã€‚è€Œè¿™ä¸ªæ’åæ’åºã€è®ºèµ„æ’è¾ˆå°±æ˜¯æˆ‘ä»¬è¿™é‡Œæ‰€è¯´çš„â€œå±‚å æ°´å¹³â€ã€‚ æ™®é€šå…ƒç´ çš„å±‚å æ°´å¹³ä¼˜å…ˆç”±å±‚å ä¸Šä¸‹æ–‡å†³å®šï¼Œå› æ­¤ï¼Œå±‚å æ°´å¹³çš„æ¯”è¾ƒåªæœ‰åœ¨å½“å‰å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¸­æ‰æœ‰æ„ä¹‰ã€‚ ä¸‰ã€ä»€ä¹ˆæ˜¯å±‚å é¡ºåº å†æ¥è¯´è¯´å±‚å é¡ºåºã€‚â€œå±‚å é¡ºåºâ€è‹±æ–‡ç§°ä½œâ€stacking orderâ€. è¡¨ç¤ºå…ƒç´ å‘ç”Ÿå±‚å æ—¶å€™æœ‰ç€ç‰¹å®šçš„å‚ç›´æ˜¾ç¤ºé¡ºåºï¼Œæ³¨æ„ï¼Œè¿™é‡Œè·Ÿä¸Šé¢ä¸¤ä¸ªä¸ä¸€æ ·ï¼Œä¸Šé¢çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å æ°´å¹³æ˜¯æ¦‚å¿µï¼Œè€Œè¿™é‡Œçš„å±‚å é¡ºåºæ˜¯è§„åˆ™ã€‚ åœ¨CSS2.1çš„å¹´ä»£ï¼Œåœ¨CSS3è¿˜æ²¡æœ‰å‡ºç°çš„æ—¶å€™ï¼ˆæ³¨æ„è¿™é‡Œçš„å‰æï¼‰ï¼Œå±‚å é¡ºåºè§„åˆ™éµå¾ªä¸‹é¢è¿™å¼ å›¾ï¼š å¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œä¸ºä»€ä¹ˆå†…è”å…ƒç´ çš„å±‚å é¡ºåºè¦æ¯”æµ®åŠ¨å…ƒç´ å’Œå—çŠ¶å…ƒç´ éƒ½é«˜ï¼Ÿå…ˆçœ‹ä¸‹å›¾ï¼š è¯¸å¦‚border/backgroundä¸€èˆ¬ä¸ºè£…é¥°å±æ€§ï¼Œè€Œæµ®åŠ¨å’Œå—çŠ¶å…ƒç´ ä¸€èˆ¬ç”¨ä½œå¸ƒå±€ï¼Œè€Œå†…è”å…ƒç´ éƒ½æ˜¯å†…å®¹ã€‚ç½‘é¡µä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯å†…å®¹äº†å“ˆï¼Œå¯¹ä¸å¯¹ï¼ å› æ­¤ï¼Œä¸€å®šè¦è®©å†…å®¹çš„å±‚å é¡ºåºç›¸å½“é«˜ï¼Œå½“å‘ç”Ÿå±‚å æ—¶å¾ˆå¥½ï¼Œé‡è¦çš„æ–‡å­—å•Šå›¾ç‰‡å†…å®¹å¯ä»¥ä¼˜å…ˆæš´éœ²åœ¨å±å¹•ä¸Šã€‚ å››ã€åŠ¡å¿…ç‰¢è®°çš„å±‚å å‡†åˆ™ ä¸‹é¢è¿™ä¸¤ä¸ªæ˜¯å±‚å é¢†åŸŸçš„é»„é‡‘å‡†åˆ™ã€‚å½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œå…¶è¦†ç›–å…³ç³»éµå¾ªä¸‹é¢2ä¸ªå‡†åˆ™ï¼š è°å¤§è°ä¸Šï¼šå½“å…·æœ‰æ˜æ˜¾çš„å±‚å æ°´å¹³æ ‡ç¤ºçš„æ—¶å€™ï¼Œå¦‚è¯†åˆ«çš„z-indexå€¼ï¼Œåœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡é¢†åŸŸï¼Œå±‚å æ°´å¹³å€¼å¤§çš„é‚£ä¸€ä¸ªè¦†ç›–å°çš„é‚£ä¸€ä¸ªã€‚é€šä¿—è®²å°±æ˜¯å®˜å¤§çš„å‹æ­»å®˜å°çš„ã€‚ åæ¥å±…ä¸Šï¼šå½“å…ƒç´ çš„å±‚å æ°´å¹³ä¸€è‡´ã€å±‚å é¡ºåºç›¸åŒçš„æ—¶å€™ï¼Œåœ¨DOMæµä¸­å¤„äºåé¢çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ ã€‚ åœ¨CSSå’ŒHTMLé¢†åŸŸï¼Œåªè¦å…ƒç´ å‘ç”Ÿäº†é‡å ï¼Œéƒ½ç¦»ä¸å¼€ä¸Šé¢è¿™ä¸¤ä¸ªé»„é‡‘å‡†åˆ™ã€‚å› ä¸ºåé¢ä¼šæœ‰å¤šä¸ªå®ä¾‹è¯´æ˜ï¼Œè¿™é‡Œå°±åˆ°æ­¤ä¸ºæ­¢ã€‚ äº”ã€å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§ å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š å±‚å ä¸Šä¸‹æ–‡çš„å±‚å æ°´å¹³è¦æ¯”æ™®é€šå…ƒç´ é«˜ï¼ˆåŸå› åé¢ä¼šè¯´æ˜ï¼‰ï¼› å±‚å ä¸Šä¸‹æ–‡å¯ä»¥é˜»æ–­å…ƒç´ çš„æ··åˆæ¨¡å¼ï¼ˆåªè¦å…ƒç´ åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œå°±å¯ä»¥é˜»æ–­mix-blend-modeï¼‰ï¼› å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åµŒå¥—ï¼Œå†…éƒ¨å±‚å ä¸Šä¸‹æ–‡åŠå…¶æ‰€æœ‰å­å…ƒç´ å‡å—åˆ¶äºå¤–éƒ¨çš„å±‚å ä¸Šä¸‹æ–‡ã€‚ æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å’Œå…„å¼Ÿå…ƒç´ ç‹¬ç«‹ï¼Œä¹Ÿå°±æ˜¯å½“è¿›è¡Œå±‚å å˜åŒ–æˆ–æ¸²æŸ“çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘åä»£å…ƒç´ ã€‚ æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªæˆä½“ç³»çš„ï¼Œå½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œæ•´ä¸ªå…ƒç´ è¢«è®¤ä¸ºæ˜¯åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„å±‚å é¡ºåºä¸­ã€‚ å…­ã€å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º å¦‚åŒå—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå±‚å ä¸Šä¸‹æ–‡ä¹ŸåŸºæœ¬ä¸Šæ˜¯æœ‰ä¸€äº›ç‰¹å®šçš„CSSå±æ€§åˆ›å»ºçš„ã€‚å°†å…¶æ€»ç»“ä¸ºï¼š é¡µé¢æ ¹å…ƒç´ å¤©ç”Ÿå…·æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œç§°ä¹‹ä¸ºâ€œæ ¹å±‚å ä¸Šä¸‹æ–‡â€ã€‚ z-indexå€¼ä¸ºæ•°å€¼çš„å®šä½å…ƒç´ çš„ä¼ ç»Ÿå±‚å ä¸Šä¸‹æ–‡ã€‚ å…¶ä»–CSS3å±æ€§ã€‚ â‘ . æ ¹å±‚å ä¸Šä¸‹æ–‡ æŒ‡çš„æ˜¯é¡µé¢æ ¹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ»šåŠ¨æ¡çš„é»˜è®¤çš„å§‹ä½œä¿‘è€…å…ƒç´ ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œç»å¯¹å®šä½å…ƒç´ åœ¨left/topç­‰å€¼å®šä½çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–å®šä½å…ƒç´ é™åˆ¶ï¼Œä¼šç›¸å¯¹æµè§ˆå™¨çª—å£å®šä½çš„åŸå› ã€‚ â‘¡. å®šä½å…ƒç´ ä¸ä¼ ç»Ÿå±‚å ä¸Šä¸‹æ–‡ å¯¹äºåŒ…å«æœ‰position:relative/position:absoluteçš„å®šä½å…ƒç´ ï¼Œä»¥åŠFireFox/IEæµè§ˆå™¨ï¼ˆä¸åŒ…æ‹¬Chromeç­‰webkitå†…æ ¸æµè§ˆå™¨ï¼‰ï¼ˆç›®å‰ï¼Œä¹Ÿå°±æ˜¯2016å¹´åˆæ˜¯è¿™æ ·ï¼‰ä¸‹å«æœ‰position:fixedå£°æ˜çš„å®šä½å…ƒç´ ï¼Œå½“å…¶z-indexå€¼ä¸æ˜¯autoçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚ çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œæœ‰äº›ç°è±¡å°±å¥½ç†è§£äº†ã€‚ å¦‚ä¸‹HTMLä»£ç ï¼š .blue { position:absolute; width: 200px; height: 100px z-index:1; background: blue; } .green { position:relative; width: 100px; height: 200px z-index:1; background: green; } å¤§å®¶ä¼šå‘ç°ï¼Œç»¿è‰²å—è¢«è“è‰²å—ç»™è¦†ç›–äº†ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹çˆ¶çº§ç®€å•è°ƒæ•´ä¸‹ï¼ŒæŠŠz-index:autoæ”¹æˆå±‚å æ°´å¹³ä¸€è‡´çš„z-index:0ï¼Œ æ ·å¼ä¿æŒä¸å˜ï¼Œä»£ç å¦‚ä¸‹ï¼š å¤§å®¶ä¼šå‘ç°ï¼Œè“è‰²å—è¢«ç»¿è‰²å—ç»™è¦†ç›–äº† ä¸ºä»€ä¹ˆå°å°çš„æ”¹å˜ä¼šæœ‰ç›¸åçš„ç»“æœå‘¢ï¼Ÿ å·®åˆ«å°±åœ¨äºï¼Œz-index:autoæ‰€åœ¨çš„å…ƒç´ æ˜¯ä¸€ä¸ªæ™®é€šçš„å…ƒç´ ï¼Œäºæ˜¯ï¼Œé‡Œé¢çš„ä¸¤ä¸ªçš„å±‚å æ¯”è¾ƒå°±ä¸å—çˆ¶çº§çš„å½±å“ï¼Œä¸¤è€…ç›´æ¥å¥—ç”¨å±‚å é»„é‡‘å‡†åˆ™ï¼Œè¿™é‡Œï¼Œä¸¤è€…æœ‰ç€æ˜æ˜¾ä¸ä¸€çš„z-indexå€¼ï¼Œå› æ­¤ï¼Œéµå¾ªâ€œè°å¤§è°ä¸Šâ€çš„å‡†åˆ™ï¼Œäºæ˜¯ï¼Œz-indexä¸º2çš„é‚£ä¸ªè“è‰²å—ï¼Œå°±ç›–åœ¨äº†z-indexä¸º1çš„ç»¿è‰²å—èº«ä¸Šã€‚ è€Œz-indexä¸€æ—¦å˜æˆæ•°å€¼ï¼Œå“ªæ€•æ˜¯0ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ã€‚æ­¤æ—¶ï¼Œå±‚å è§„åˆ™å°±å‘ç”Ÿäº†å˜åŒ–ã€‚å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§é‡Œé¢æœ€åä¸€æ¡â€”â€”è‡ªæˆä½“ç³»ã€‚ä¸¤ä¸ªçš„å±‚å é¡ºåºæ¯”è¾ƒå˜æˆäº†ä¼˜å…ˆæ¯”è¾ƒå…¶çˆ¶çº§å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„å±‚å é¡ºåºã€‚è¿™é‡Œï¼Œç”±äºä¸¤è€…éƒ½æ˜¯z-index:0ï¼Œå±‚å é¡ºåºè¿™ä¸€å—ä¸¤è€…ä¸€æ ·å¤§ï¼Œæ­¤æ—¶ï¼Œéµå¾ªå±‚å é»„é‡‘å‡†åˆ™çš„å¦å¤–ä¸€ä¸ªå‡†åˆ™â€œåæ¥å±…ä¸Šâ€ï¼Œæ ¹æ®åœ¨DOMæµä¸­çš„ä½ç½®å†³å®šè°åœ¨ä¸Šé¢ï¼Œäºæ˜¯ï¼Œä½äºåé¢çš„ç»¿æ–¹å—å°±è‡ªç„¶è€Œç„¶è¶´åœ¨äº†è“æ–¹å—èº«ä¸Šã€‚å¯¹ï¼Œæ²¡é”™ï¼Œå…ƒç´ ä¸Šçš„z-indexæ‰“é…±æ²¹äº†ï¼ â‘¢. CSS3ä¸æ–°æ—¶ä»£çš„å±‚å ä¸Šä¸‹æ–‡ CSS3çš„å‡ºç°é™¤äº†å¸¦æ¥äº†æ–°å±æ€§ï¼ŒåŒæ—¶è¿˜å¯¹è¿‡å»çš„å¾ˆå¤šè§„åˆ™å‘å‡ºäº†æŒ‘æˆ˜ã€‚è€Œè¿™é‡Œï¼Œå±‚å ä¸Šä¸‹æ–‡è¿™ä¸€å—çš„å½±å“è¦æ›´åŠ å¹¿æ³›ä¸æ˜¾è‘—ã€‚ å¦‚ä¸‹ï¼š z-indexå€¼ä¸ä¸ºautoçš„flexé¡¹(çˆ¶å…ƒç´ display:flex|inline-flex). å…ƒç´ çš„opacityå€¼ä¸æ˜¯1. å…ƒç´ çš„transformå€¼ä¸æ˜¯none. å…ƒç´ mix-blend-modeå€¼ä¸æ˜¯normal. å…ƒç´ çš„filterå€¼ä¸æ˜¯none. å…ƒç´ çš„isolationå€¼æ˜¯isolate. will-changeæŒ‡å®šçš„å±æ€§å€¼ä¸ºä¸Šé¢ä»»æ„ä¸€ä¸ªã€‚ å…ƒç´ çš„-webkit-overflow-scrollingè®¾ä¸ºtouch. åŸºæœ¬ä¸Šæ¯ä¸€é¡¹éƒ½æœ‰å¾ˆå¤šæ§½ç‚¹ã€‚ 1. display:flex|inline-flexä¸å±‚å ä¸Šä¸‹æ–‡ æ³¨æ„ï¼Œè¿™é‡Œçš„è§„åˆ™æœ‰äº›è´Ÿè´£å¤æ‚ã€‚è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶æ‰èƒ½å½¢æˆå±‚å ä¸Šä¸‹æ–‡ï¼šæ¡ä»¶1æ˜¯çˆ¶çº§éœ€è¦æ˜¯display:flexæˆ–è€…display:inline-flexæ°´å¹³ï¼Œæ¡ä»¶2æ˜¯å­å…ƒç´ çš„z-indexä¸æ˜¯autoï¼Œå¿…é¡»æ˜¯æ•°å€¼ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªå­å…ƒç´ ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œæ²¡é”™ï¼Œæ³¨æ„äº†ï¼Œæ˜¯å­å…ƒç´ ï¼Œä¸æ˜¯flexçˆ¶çº§å…ƒç´ ã€‚ çœ¼è§ä¸ºå®ï¼Œç»™å¤§å®¶ä¸Šä¾‹å­å§ã€‚ å¦‚ä¸‹HTMLå’ŒCSSä»£ç ï¼š .box { } .box .blue { z-index: 1;/* æ­¤æ—¶è¯¥divæ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼ŒåŒæ—¶z-indexç”Ÿæ•ˆ */ width: 200px; height: 200px; background-color: blue; } .box .blue .green { position: relative; z-index: -1; right: -150px; /* æ³¨æ„è¿™é‡Œæ˜¯è´Ÿå€¼z-index */ width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š ä¼šå‘ç°ï¼Œç»¿è‰²å—è·‘åˆ°è“è‰²èƒŒæ™¯çš„ä¸‹é¢äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå±‚å é¡ºåºå›¾å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆï¼Œå¦‚ä¸‹ï¼š ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºè´Ÿå€¼z-indexçš„å±‚å é¡ºåºåœ¨blockæ°´å¹³å…ƒç´ çš„ä¸‹é¢ï¼Œè€Œè“è‰²èƒŒæ™¯divå…ƒç´ æ˜¯ä¸ªæ™®é€šå…ƒç´ ï¼Œå› æ­¤ï¼Œç»¿è‰²å—ç›´æ¥ç©¿è¶Šè¿‡å»ï¼Œåœ¨è“è‰²èƒŒæ™¯åé¢çš„æ˜¾ç¤ºäº†ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬CSSå¾®è°ƒä¸‹ï¼Œå¢åŠ display:flex, å¦‚ä¸‹ï¼š .box { display: flex; } .box .blue { z-index: 1;/* æ­¤æ—¶è¯¥divæ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼ŒåŒæ—¶z-indexç”Ÿæ•ˆ */ width: 200px; height: 200px; background-color: blue; } .box .blue .green { position: relative; z-index: -1; right: -150px; /* æ³¨æ„è¿™é‡Œæ˜¯è´Ÿå€¼z-index */ width: 100px; height: 100px; background-color: green; } ç»“æœï¼š ä¼šå‘ç°ï¼Œç»¿è‰²å—åœ¨è“è‰²èƒŒæ™¯ä¸Šé¢æ˜¾ç¤ºäº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå±‚å é¡ºåºå›¾å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆï¼Œå¦‚ä¸‹ï¼š ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºè´Ÿå€¼z-indexçš„å±‚å é¡ºåºåœ¨å½“å‰ç¬¬ä¸€ä¸ªçˆ¶å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„ä¸Šé¢ï¼Œè€Œæ­¤æ—¶ï¼Œé‚£ä¸ªz-indexå€¼ä¸º1çš„è“è‰²èƒŒæ™¯çš„çˆ¶å…ƒç´ çš„displayå€¼æ˜¯flexï¼Œä¸€ä¸‹å­å˜æˆå±‚å ä¸Šä¸‹æ–‡å…ƒç´ äº†ï¼Œäºæ˜¯ï¼Œç»¿è‰²å—åœ¨è“è‰²èƒŒæ™¯ä¸Šé¢æ˜¾ç¤ºäº†ã€‚è¿™ä¸ªç°è±¡ä¹Ÿè¯å®äº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æ˜¯flexå­å…ƒç´ ï¼Œè€Œä¸æ˜¯flexå®¹å™¨å…ƒç´ ã€‚ å¦å¤–ï¼Œè¿™ä¸ªä¾‹å­ä¹Ÿé¢ è¦†äº†æˆ‘ä»¬ä¼ ç»Ÿçš„å¯¹z-indexçš„ç†è§£ã€‚åœ¨CSS2.1æ—¶ä»£ï¼Œz-indexå±æ€§å¿…é¡»å’Œå®šä½å…ƒç´ ä¸€èµ·ä½¿ç”¨æ‰æœ‰ä½œç”¨ï¼Œä½†æ˜¯ï¼Œåœ¨CSS3çš„ä¸–ç•Œé‡Œï¼Œéå®šä½å…ƒç´ çš„z-indexä¹Ÿå¯èƒ½æœ‰ä½œç”¨ã€‚ 2. opacityä¸å±‚å ä¸Šä¸‹æ–‡ æˆ‘ä»¬ç›´æ¥çœ‹ä»£ç ï¼ŒåŸç†å’Œä¸Šé¢ä¾‹å­ä¸€æ ·ï¼Œå°±ä¸è§£é‡Šäº†ã€‚ å¦‚ä¸‹HTMLå’ŒCSSä»£ç ï¼š .box { width: 200px; height: 200px; background-color: blue; } .box .green { position: relative; z-index: -1; right: -150px; width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š ç„¶ååŠ ä¸ªé€æ˜åº¦ï¼Œä¾‹å¦‚50%é€æ˜ï¼š .box { width: 200px; height: 200px; background-color: blue; opacity: 0.5; } .box .green { position: relative; z-index: -1; right: -150px; width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š åŸå› å°±æ˜¯åŠé€æ˜å…ƒç´ å…·æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œç»¿è‰²å—çš„z-index:-1æ— æ³•ç©¿é€ï¼Œäºæ˜¯ï¼Œåœ¨è“è‰²èƒŒæ™¯ä¸Šé¢ä¹–ä¹–æ˜¾ç¤ºäº†ã€‚ 3. transformä¸å±‚å ä¸Šä¸‹æ–‡ åº”ç”¨äº†transformå˜æ¢çš„å…ƒç´ åŒæ ·å…·æœ‰èœå•ä¸Šä¸‹æ–‡ã€‚ æˆ‘ä»¬ç›´æ¥çœ‹åº”ç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹CSSä»£ç ï¼š .box { width: 200px; height: 200px; background-color: blue; transform: rotate(15deg); } .box .green { position: relative; z-index: -1; right: -150px; width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š 4. mix-blend-modeä¸å±‚å ä¸Šä¸‹æ–‡ mix-blend-modeç±»ä¼¼äºPSä¸­çš„æ··åˆæ¨¡å¼ã€‚ å…ƒç´ å’Œç™½è‰²èƒŒæ™¯æ··åˆã€‚æ— è®ºå“ªç§æ¨¡å¼ï¼Œè¦ä¹ˆå…¨ç™½ï¼Œè¦ä¹ˆæ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚ä¸ºäº†è®©å¤§å®¶æœ‰ç›´è§‚æ„Ÿå—ï¼Œå› æ­¤ï¼Œä¸‹é¢ä¾‹å­æˆ‘ç‰¹æ„ç»™bodyåŠ äº†ä¸ªé»„è‰²èƒŒæ™¯ï¼š body { background-color: yellow; } .box { width: 200px; height: 200px; background-color: blue; mix-blend-mode: darken; } .box .green { position: relative; z-index: -1; right: -150px; width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š åŒæ ·çš„ï¼Œå› ä¸ºè“è‰²èƒŒæ™¯å…ƒç´ å‡çº§æˆäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ï¼Œz-index:-1æ— æ³•ç©¿é€ï¼Œåœ¨è“è‰²èƒŒæ™¯ä¸Šæ˜¾ç¤ºäº†ã€‚ 5. filterä¸å±‚å ä¸Šä¸‹æ–‡ æ­¤å¤„è¯´çš„filteræ˜¯CSS3ä¸­è§„èŒƒçš„æ»¤é•œã€‚ä¾‹å¦‚å›¾ç‰‡çš„ç°åº¦æˆ–è€…å›¾ç‰‡çš„æ¯›ç»ç’ƒæ•ˆæœç­‰ã€‚ æˆ‘ä»¬ä½¿ç”¨å¸¸è§çš„æ¨¡ç³Šæ•ˆæœè¯•ä¸€ä¸‹ï¼š .box { width: 200px; height: 200px; background-color: blue; filter: blur(5px); } .box .green { position: relative; z-index: -1; right: -150px; width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š 6. will-changeä¸å±‚å ä¸Šä¸‹æ–‡ éƒ½æ˜¯ç±»ä¼¼çš„æ¼”ç¤ºä»£ç ï¼š .box { width: 200px; height: 200px; background-color: blue; will-change: transform; } .box .green { position: relative; z-index: -1; right: -150px; width: 100px; height: 100px; background-color: green; } ç»“æœå¦‚ä¸‹ï¼š ä¸ƒã€å±‚å ä¸Šä¸‹æ–‡ä¸å±‚å é¡ºåº æœ¬æ–‡å¤šæ¬¡æåˆ°ï¼Œä¸€æ—¦æ™®é€šå…ƒç´ å…·æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå…¶å±‚å é¡ºåºå°±ä¼šå˜é«˜ã€‚é‚£å®ƒçš„å±‚å é¡ºåºç©¶ç«Ÿåœ¨å“ªä¸ªä½ç½®å‘¢ï¼Ÿ è¿™é‡Œéœ€è¦åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š å¦‚æœå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¸ä¾èµ–z-indexæ•°å€¼ï¼Œåˆ™å…¶å±‚å é¡ºåºæ˜¯z-index:autoå¯çœ‹æˆz:index:0çº§åˆ«ï¼› å¦‚æœå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¾èµ–z-indexæ•°å€¼ï¼Œåˆ™å…¶å±‚å é¡ºåºç”±z-indexå€¼å†³å®šã€‚ å¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆå®šä½å…ƒç´ ä¼šå±‚å åœ¨æ™®é€šå…ƒç´ çš„ä¸Šé¢å—ï¼Ÿ å…¶æ ¹æœ¬åŸå› å°±åœ¨äºï¼Œå…ƒç´ ä¸€æ—¦æˆä¸ºå®šä½å…ƒç´ ï¼Œå…¶z-indexå°±ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ­¤æ—¶å…¶z-indexå°±æ˜¯é»˜è®¤çš„autoï¼Œä¹Ÿå°±æ˜¯0çº§åˆ«ï¼Œæ ¹æ®ä¸Šé¢çš„å±‚å é¡ºåºè¡¨ï¼Œå°±ä¼šè¦†ç›–inlineæˆ–blockæˆ–floatå…ƒç´ ã€‚ è€Œä¸æ”¯æŒz-indexçš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ å¤©ç„¶z-index:autoçº§åˆ«ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œå±‚å ä¸Šä¸‹æ–‡å…ƒç´ å’Œå®šä½å…ƒç´ æ˜¯ä¸€ä¸ªå±‚å é¡ºåºçš„ï¼Œäºæ˜¯å½“ä»–ä»¬å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œéµå¾ªçš„æ˜¯â€œåæ¥å±…ä¸Šâ€å‡†åˆ™ã€‚ å…«ã€ç»“æŸè¯­ å¯¹å±‚å ä¸Šä¸‹æ–‡ä»¥åŠå±‚å é¡ºåºçš„æ¦‚å¿µæœ‰äº†ä¸€å®šçš„äº†è§£åï¼Œå¯¹å¹³æ—¶å¼€å‘é‡åˆ°çš„å…ƒç´ è¦†ç›–é—®é¢˜éƒ½ä¼šè¿åˆƒè€Œè§£äº†ã€‚ è¡Œä¸ºåŒ†å¿™ï¼Œå‡ºé”™åœ¨æ‰€éš¾å…ï¼Œæ¬¢è¿å¤§åŠ›æŒ‡æ­£ã€‚æ¬¢è¿å„ç§å½¢å¼çš„äº¤æµï¼Œæˆ–è€…æŒ‡å‡ºæ–‡ä¸­æ¦‚å¿µæ€§çš„é”™è¯¯ã€‚ "},"æŠ€æœ¯ç¬”è®°/æµè§ˆå™¨å·¥ä½œåŸç†ï¼šä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ.html":{"url":"æŠ€æœ¯ç¬”è®°/æµè§ˆå™¨å·¥ä½œåŸç†ï¼šä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ.html","title":"æµè§ˆå™¨å·¥ä½œåŸç†ï¼šä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ","keywords":"","body":"æµè§ˆå™¨å·¥ä½œåŸç†ï¼šä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ å¯¹æµè§ˆå™¨åŸç†æœ‰è¿‡äº†è§£çš„ä¸€å®šä¸ä¼šé™Œç”Ÿè¿™ç¯‡ç¥æ–‡ã€ŠHow Browsers Workã€‹ä¸­æ–‡ç¿»è¯‘ï¼šæµè§ˆå™¨åŸç†ï¼šæ–°å¼ç½‘ç»œæµè§ˆå™¨å¹•åæ­ç§˜ã€‚å¦å¤–è¿˜æœ‰ä¸€ç¯‡ ã€ŠWhat really happens when you navigate to a URLã€‹ã€‚å¤§ç¥å†™çš„ä¸œè¥¿å¾ˆé•¿å¾ˆå¤æ‚ï¼Œé˜…è¯»æˆæœ¬è™½ç„¶å¤§ï¼Œä½†èƒ½å­¦åˆ°ä¸œè¥¿ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¹Ÿè¯•ç€ç”¨è‡ªå·±çš„ç†è§£å»å†™ä¸€å†™ï¼Œç®—æ˜¯åšä¸ªå·©å›ºã€‚é‡Œé¢æœ‰å¾ˆå¤šå‚è€ƒï¼Œå¦‚æ¶‰åŠç‰ˆæƒï¼Œä¾µæƒåˆ ï¼è¡¨è¿°æœ‰è¯¯ï¼Œè¯·æŒ‡æ­£ï¼ å‰ç«¯ä¸ºä»€ä¹ˆè¦ç ”ç©¶æ¸²æŸ“åŸç†ï¼Ÿ åƒç´ å®Œç¾ï¼ˆPixel Perfectionï¼‰ã€åˆ†è¾¨ç‡æ— å…³ï¼ˆResolution Independentï¼‰å’Œå¤šå¹³å°ä½“éªŒä¸€è‡´æ€§æ˜¯è®¾è®¡å¸ˆçš„è¿½æ±‚ã€‚è€Œè®¿é—®æ€§ï¼ˆAccessabilityï¼‰ã€åŠ è½½æ€§èƒ½å’Œé‡æ„çµæ´»æ€§åˆ™æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆå¿…æ‡‚çš„æŠ€èƒ½ã€‚æœ€é‡è¦çš„åŠ è½½æ€§èƒ½åˆä¸æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶æ·±æ·±æŒ‚é’©ï¼Œæ‰€ä»¥åªæœ‰å¼„æ˜ç™½äº†æµè§ˆå™¨èƒŒåçš„æ¸²æŸ“æœºåˆ¶ï¼Œæ‰èƒ½åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘ä¸­æ˜ç™½å¦‚ä½•è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚ è¿˜æœ‰å°±æ˜¯åƒç±»ä¼¼ï¼š ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ ä»æŒ‰ä¸‹é”®ç›˜åˆ°å±å¹•ä¸Šå‡ºç°å­—ç¬¦ï¼Œä¸­é—´éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ ç”¨æˆ·ååº”ç½‘ç«™å¡ï¼Œè¯·é—®éƒ½æœ‰å“ªäº›å¯èƒ½æ€§ï¼Œä»¥åŠè§£å†³æ–¹æ³•ï¼Ÿ è¿™æ ·çš„é—®é¢˜é¢è¯•å®˜éƒ½æ˜¯æ¯”è¾ƒå–œæ¬¢é—®çš„ï¼Œä»Šå¤©å°è¯•æ¥è¯¦ç»†è¯´ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚ ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ ç®€å•è·¯å¾„çº¿ï¼š é”®ç›˜æˆ–è§¦å±è¾“å…¥URLå¹¶å›è½¦ç¡®è®¤ URLè§£æ/DNSè§£ææŸ¥æ‰¾åŸŸåIPåœ°å€ ç½‘ç»œè¿æ¥å‘èµ·HTTPè¯·æ±‚ HTTPæŠ¥æ–‡ä¼ è¾“è¿‡ç¨‹ æœåŠ¡å™¨æ¥æ”¶æ•°æ® æœåŠ¡å™¨å“åº”è¯·æ±‚/MVC æœåŠ¡å™¨è¿”å›æ•°æ® å®¢æˆ·ç«¯æ¥æ”¶æ•°æ® æµè§ˆå™¨åŠ è½½/æ¸²æŸ“é¡µé¢ æ‰“å°ç»˜åˆ¶è¾“å‡º å®é™…ä¸Šå¹¶æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œä¸‹é¢è¯´è¯´å®ƒçš„è¯¦ç»†è·¯å¾„çº¿ï¼š 1. é”®ç›˜æˆ–è§¦å±è¾“å…¥URLå¹¶å›è½¦ç¡®è®¤ å½“ç„¶æ•…äº‹å…¶å®å¹¶ä¸æ˜¯ä»è¾“å…¥ä¸€ä¸ªURLæˆ–æŠ“ç€é¼ æ ‡ç‚¹å‡»ä¸€ä¸ªé“¾æ¥å¼€å§‹çš„ï¼Œäº‹æƒ…çš„å¼€ç«¯è¦è¿½æº¯åˆ°æœåŠ¡å™¨å¯åŠ¨ç›‘å¬æœåŠ¡çš„æ—¶å€™ï¼Œåœ¨æŸä¸ªæœªçŸ¥çš„æ—¶åˆ»ï¼Œä¸€å°æœºæˆ¿é‡Œæ™®æ™®é€šé€šçš„æœåŠ¡å™¨ï¼ŒåŠ ä¸Šç”µï¼Œå¯åŠ¨äº†æ“ä½œç³»ç»Ÿï¼Œéšç€æ“ä½œç³»ç»Ÿçš„å°±ç»ªï¼ŒæœåŠ¡å™¨å¯åŠ¨äº† http æœåŠ¡è¿›ç¨‹ï¼Œè¿™ä¸ª http æœåŠ¡çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œå¯èƒ½æ˜¯ Apacheã€Nginxã€IISã€Lighttpdä¸­çš„ä¸€ä¸ªï¼Œä¸ç®¡æ€ä¹ˆè¯´ï¼Œè¿™ä¸ª http æœåŠ¡è¿›ç¨‹å¼€å§‹å®šä½åˆ°æœåŠ¡å™¨ä¸Šçš„ www æ–‡ä»¶å¤¹ï¼ˆç½‘ç«™æ ¹ç›®å½•ï¼‰ï¼Œä¸€èˆ¬æ˜¯ä½äº /var/www ï¼Œç„¶åå¯åŠ¨äº†ä¸€äº›é™„å±çš„æ¨¡å—ï¼Œä¾‹å¦‚ phpï¼Œæˆ–è€…ï¼Œä½¿ç”¨ fastcgi æ–¹å¼è¿æ¥åˆ° php çš„ fpm ç®¡ç†è¿›ç¨‹ï¼Œç„¶åï¼Œå‘æ“ä½œç³»ç»Ÿç”³è¯·äº†ä¸€ä¸ª tcp è¿æ¥ï¼Œç„¶åç»‘å®šåœ¨äº† 80 ç«¯å£ï¼Œè°ƒç”¨äº† accept å‡½æ•°ï¼Œå¼€å§‹äº†é»˜é»˜çš„ç›‘å¬ï¼Œç›‘å¬ç€å¯èƒ½æ¥è‡ªä½äºåœ°çƒä»»ä½•ä¸€ä¸ªåœ°æ–¹çš„è¯·æ±‚ï¼Œéšæ—¶å‡†å¤‡åšå‡ºå“åº”ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå…¸å‹çš„æƒ…å†µä¸‹ï¼Œæœºæˆ¿é‡Œé¢åº”è¯¥è¿˜æœ‰ä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ï¼Œæˆ–è®¸ï¼Œè¿˜æœ‰ä¸€å°ç¼“å­˜æœåŠ¡å™¨ï¼Œå¦‚æœå¯¹äºæµé‡å·¨å¤§çš„ç½‘ç«™ï¼Œé‚£ä¹ˆåŠ¨æ€è„šæœ¬çš„è§£é‡Šå™¨å¯èƒ½è¿˜æœ‰å•ç‹¬çš„ç‰©ç†æœºå™¨æ¥è·‘ï¼Œå¦‚æœæ˜¯ä¸­å°çš„ç«™ç‚¹ï¼Œé‚£ä¹ˆï¼Œä¸Šè¿°çš„å„è‰²æœåŠ¡ï¼Œç”šè‡³éƒ½å¯èƒ½åœ¨ä¸€å°ç‰©ç†æœºä¸Šï¼Œè¿™äº›æœåŠ¡ç›‘å¬ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥é€šè¿‡è‡ªå·±æ­å»ºä¸€æ¬¡ Apache PHP MySQL ç¯å¢ƒæ¥äº†è§£ä¸€ä¸‹ï¼Œä¸ç®¡æ€ä¹ˆè¯´ï¼Œä»–ä»¬åšå¥½äº†å‡†å¤‡ï¼Œé™å€™å·®é£ã€‚ ç„¶åæ˜¯å¼€å§‹é”®ç›˜æˆ–æ‰‹æœºè§¦å±è¾“å…¥URLï¼Œç„¶åé€šè¿‡æŸç§æœºåˆ¶ä¼ åˆ°CPUï¼ˆè¿‡ç¨‹ç•¥ï¼‰ï¼ŒCPUè¿›è¡Œå†…éƒ¨å¤„ç†ï¼ˆè¿‡ç¨‹ç•¥ï¼‰ï¼Œå¤„ç†å®Œåï¼Œå†ä»CPUä¼ åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ï¼ˆè¿‡ç¨‹ç•¥ï¼‰ï¼Œç„¶åå†ç”±æ“ä½œç³»ç»ŸGUIä¼ åˆ°æµè§ˆå™¨ï¼Œå†ç”±æµè§ˆå™¨åˆ°æµè§ˆå™¨å†…æ ¸ã€‚è¿™ä¸ªè¿‡ç¨‹å› ä¸ºæ¶‰åŠå¾ˆå¤šåº•å±‚çš„çŸ¥è¯†ï¼Œè‡ªå·±ä¹Ÿåªæ˜¯äº†è§£çš®æ¯›ï¼Œè¿‡ç¨‹è¿™é‡Œä¸å¤šè®²äº†ï¼Œå…·ä½“è¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡åšå®¢ã€Šå­—ç¬¦é›†å†å²å’Œä¹±ç é—®é¢˜ã€‹å’Œä»¥ä¸‹ä¹¦ç±ï¼š ã€Šç¼–ç ã€‹ ã€Šæ“ä½œç³»ç»Ÿæ¦‚å¿µã€‹ ã€ŠCPUè‡ªåˆ¶å…¥é—¨ã€‹ ã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ã€‹ ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹ ã€Šç²¾é€šLinuxè®¾å¤‡é©±åŠ¨ç¨‹åºå¼€å‘ã€‹ ã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ï¼šé‡åŒ–ç ”ç©¶æ–¹æ³•ã€‹ ã€Šè®¡ç®—æœºç»„æˆä¸è®¾è®¡ï¼šç¡¬ä»¶/è½¯ä»¶æ¥å£ã€‹ 2. URL è§£æ/DNS æŸ¥è¯¢ æ¥ç€æ˜¯è¾“å…¥ URL ã€Œå›è½¦ã€åï¼Œè¿™æ—¶æµè§ˆå™¨ä¼šå¯¹ URL è¿›è¡Œæ£€æŸ¥ï¼Œè¿™é‡Œéœ€è¦å¯¹URLæœ‰ä¸ªå›é¡¾ï¼Œè¯·è§ç™¾ç§‘ã€ŠURLã€‹ï¼Œå®Œæ•´çš„URLç”±å‡ ä¸ªéƒ¨åˆ†æ„æˆï¼š åè®®ã€ç½‘ç»œåœ°å€ã€èµ„æºè·¯å¾„ã€æ–‡ä»¶åã€åŠ¨æ€å‚æ•° åè®®/æ¨¡å¼ï¼ˆschemeï¼‰æ˜¯ä»è¯¥è®¡ç®—æœºè·å–èµ„æºçš„æ–¹å¼ï¼Œä¸€èˆ¬æœ‰Httpã€Httpsã€Ftpã€Fileã€Mailtoã€Telnetã€Newsç­‰åè®®ï¼Œä¸åŒåè®®æœ‰ä¸åŒçš„é€šè®¯å†…å®¹æ ¼å¼ï¼Œåè®®ä¸»è¦ä½œç”¨æ˜¯å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•å¤„ç†å°†è¦æ‰“å¼€çš„æ–‡ä»¶ï¼› ç½‘ç»œåœ°å€æŒ‡ç¤ºè¯¥è¿æ¥ç½‘ç»œä¸Šå“ªä¸€å°è®¡ç®—æœºï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ–è€…IPåœ°å€ï¼ŒåŸŸåæˆ–IPåœ°å€åé¢æœ‰æ—¶è¿˜è·Ÿä¸€ä¸ªå†’å·å’Œä¸€ä¸ªç«¯å£å·ï¼› ç«¯å£å·å¦‚æœåœ°å€ä¸åŒ…å«ç«¯å£å·ï¼Œæ ¹æ®åè®®çš„ç±»å‹ä¼šç¡®å®šä¸€ä¸ªé»˜è®¤ç«¯å£å·ã€‚ç«¯å£å·ä¹‹äºè®¡ç®—æœºå°±åƒçª—å£å·ä¹‹äºé“¶è¡Œï¼Œä¸€å®¶é“¶è¡Œæœ‰å¤šä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£éƒ½æœ‰ä¸ªå·ç ï¼Œä¸åŒçª—å£å¯ä»¥è´Ÿè´£ä¸åŒçš„æœåŠ¡ã€‚ç«¯å£åªæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œå’Œè®¡ç®—æœºç¡¬ä»¶æ²¡æœ‰å…³ç³»ã€‚ä¸€èˆ¬å¦‚æœä½ çš„ç«¯å£å·å°±æ˜¯é»˜è®¤çš„ï¼Œé‚£ä¹ˆurlæ˜¯ä¸éœ€è¦è¾“å…¥ç«¯å£å·çš„ï¼Œä½†å¦‚æœä½ æ›´æ”¹äº†é»˜è®¤ç«¯å£å·ï¼Œä½ å°±å¿…é¡»è¦åœ¨urlåè¾“å…¥æ–°ç«¯å£å·æ‰èƒ½æ­£å¸¸è®¿é—®ã€‚ä¾‹å¦‚ï¼šhttpåè®®é»˜è®¤ç«¯å£å·æ˜¯80ã€‚å¦‚æœä½ è¾“å…¥çš„urlæ˜¯http://www.zhihu.com:8080/ ï¼Œé‚£è¡¨ç¤ºä¸ä½¿ç”¨é»˜è®¤çš„ç«¯å£å·ï¼Œè€Œä½¿ç”¨æŒ‡å®šçš„ç«¯å£å·8080ã€‚å¦‚æœä½¿ç”¨çš„å°±æ˜¯é»˜è®¤ç«¯å£å·é‚£ä¹ˆè¾“å…¥http://www.zhihu.com:80 å’Œhttp://www.zhihu.comæ˜¯ä¸€æ ·çš„ã€‚æœ‰ä¸ªç‰¹æ®Šæƒ…å†µæœ‰æ‰€ä¸åŒï¼Œæ¯”å¦‚æœ¬åœ°IP 127.0.0.1 å…¶å®èµ°çš„æ˜¯ loopbackï¼Œå’Œç½‘å¡è®¾å¤‡æ²¡å…³ç³»ã€‚ èµ„æºè·¯å¾„æŒ‡ç¤ºä»æœåŠ¡å™¨ä¸Šè·å–å“ªä¸€é¡¹èµ„æºçš„ç­‰çº§ç»“æ„è·¯å¾„ï¼Œä»¥æ–œçº¿/åˆ†éš”ï¼› æ–‡ä»¶åä¸€èˆ¬æ˜¯éœ€è¦çœŸæ­£è®¿é—®çš„æ–‡ä»¶ï¼Œæœ‰æ—¶å€™ï¼ŒURLä»¥æ–œæ â€œ/â€ç»“å°¾ï¼Œè€Œéšè—äº†æ–‡ä»¶åï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒURLå¼•ç”¨è·¯å¾„ä¸­æœ€åä¸€ä¸ªç›®å½•ä¸­çš„é»˜è®¤æ–‡ä»¶ï¼ˆé€šå¸¸å¯¹åº”äºä¸»é¡µï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶å¸¸è¢«ç§°ä¸º index.html æˆ– default.htmã€‚ åŠ¨æ€å‚æ•°æœ‰æ—¶å€™è·¯å¾„åé¢ä¼šæœ‰ä»¥é—®å·?å¼€å§‹çš„å‚æ•°ï¼Œè¿™ä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥ä¼ é€å¯¹æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“è¿›è¡ŒåŠ¨æ€è¯¢é—®æ—¶æ‰€éœ€è¦çš„å‚æ•°ï¼Œæœ‰æ—¶å€™æ²¡æœ‰ï¼Œå¾ˆå¤šä¸ºäº†seoä¼˜åŒ–ï¼Œéƒ½å·²å¤„ç†æˆä¼ªé™æ€äº†ã€‚è¦æ³¨æ„åŒºåˆ†urlå’Œè·¯ç”±çš„åŒºåˆ«ã€‚ URLå®Œæ•´æ ¼å¼ä¸ºï¼šåè®®://ç”¨æˆ·å:å¯†ç @å­åŸŸå.åŸŸå.é¡¶çº§åŸŸå:ç«¯å£å·/ç›®å½•/æ–‡ä»¶å.æ–‡ä»¶åç¼€?å‚æ•°=å€¼#æ ‡å¿— ä¾‹å¦‚ï¼šhttps://www.zhihu.com/question/55998388/answer/166987812 åè®®éƒ¨åˆ†ï¼šhttps ç½‘ç»œåœ°å€ï¼šwww.zhihu.comï¼ˆä¾æ¬¡ä¸º å­/ä¸‰çº§åŸŸå.äºŒçº§åŸŸå.é¡¶/ä¸€çº§åŸŸåï¼‰ èµ„æºè·¯å¾„ï¼š/question/55998388/answer/166987812 æµè§ˆå™¨å¯¹ URL è¿›è¡Œæ£€æŸ¥æ—¶é¦–å…ˆåˆ¤æ–­åè®®ï¼Œå¦‚æœæ˜¯ http/https å°±æŒ‰ç…§ Web æ¥å¤„ç†ï¼Œå¦å¤–è¿˜ä¼šå¯¹ URL è¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œç„¶åç›´æ¥è°ƒç”¨æµè§ˆå™¨å†…æ ¸ä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œæ¥ä¸‹æ¥æ˜¯å¯¹ç½‘ç»œåœ°å€è¿›è¡Œå¤„ç†ï¼Œå¦‚æœåœ°å€ä¸æ˜¯ä¸€ä¸ªIPåœ°å€è€Œæ˜¯åŸŸååˆ™é€šè¿‡DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰å°†è¯¥åœ°å€è§£ææˆIPåœ°å€ã€‚IPåœ°å€å¯¹åº”ç€ç½‘ç»œä¸Šä¸€å°è®¡ç®—æœºï¼ŒDNSæœåŠ¡å™¨æœ¬èº«ä¹Ÿæœ‰IPï¼Œä½ çš„ç½‘ç»œè®¾ç½®åŒ…å«DNSæœåŠ¡å™¨çš„IPã€‚ ä¾‹å¦‚ï¼šwww.zhihu.comåŸŸåè¯·æ±‚å¯¹åº”è·å¾—çš„IPæ˜¯ 116.211.167.187ã€‚DNS åœ¨è§£æåŸŸåçš„æ—¶å€™æœ‰ä¸¤ç§æ–¹å¼ï¼šé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢ï¼Œ é€’å½’æŸ¥è¯¢çš„æµç¨‹å¦‚ä¸‹ï¼š ä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šé¦–å…ˆæŸ¥è¯¢æµè§ˆå™¨ç¼“å­˜ï¼ˆDNS åœ¨å„ä¸ªå±‚çº§éƒ½æœ‰ç¼“å­˜çš„ï¼Œç›¸åº”çš„ï¼Œç¼“å­˜å½“ç„¶æœ‰è¿‡æœŸæ—¶é—´ï¼ŒTime to liveï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šæ£€æŸ¥ç³»ç»Ÿç¼“å­˜ï¼Œæ£€æŸ¥æœ¬åœ°ç¡¬ç›˜çš„hostsæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¿å­˜äº†ä¸€äº›ä»¥å‰è®¿é—®è¿‡çš„ç½‘ç«™çš„åŸŸåå’ŒIPå¯¹åº”çš„æ•°æ®ã€‚å®ƒå°±åƒæ˜¯ä¸€ä¸ªæœ¬åœ°çš„æ•°æ®åº“ã€‚å¦‚æœæ‰¾åˆ°å°±å¯ä»¥ç›´æ¥è·å–ç›®æ ‡ä¸»æœºçš„IPåœ°å€äº†ï¼ˆæ³¨æ„è¿™ä¸ªåœ°æ–¹å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œå¦‚æœæœ‰ç—…æ¯’æŠŠä¸€äº›å¸¸ç”¨çš„åŸŸåï¼Œä¿®æ”¹ hosts æ–‡ä»¶ï¼ŒæŒ‡å‘ä¸€äº›æ¶æ„çš„IPï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¹Ÿä¼šä¸åŠ åˆ¤æ–­çš„å»è¿æ¥ï¼Œæ˜¯çš„ï¼Œè¿™æ­£æ˜¯å¾ˆå¤šç—…æ¯’çš„æƒ¯ç”¨æ‰‹æ³•ï¼‰ã€‚å¦‚æœæœ¬åœ°hostsä¹Ÿæ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œåˆ™éœ€è¦å†å‘ä¸Šå±‚æ‰¾è·¯ç”±å™¨ç¼“å­˜ï¼Œè·¯ç”±å™¨æœ‰è‡ªå·±çš„DNSç¼“å­˜ï¼Œå¯èƒ½å°±åŒ…æ‹¬äº†æŸ¥è¯¢çš„å†…å®¹ï¼›å¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œéœ€è¦æ¥ç€å¾€ä¸Šæ‰¾ï¼ŒæŸ¥è¯¢ISP DNS ç¼“å­˜ï¼ˆæœ¬åœ°åç§°æœåŠ¡å™¨ç¼“å­˜ï¼Œå°±æ˜¯å®¢æˆ·ç«¯ç”µè„‘TCP/IPå‚æ•°ä¸­è®¾ç½®çš„é¦–é€‰DNSæœåŠ¡å™¨ï¼Œæ­¤è§£æå…·æœ‰æƒå¨æ€§ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä½ åœ¨ä¸åŒçš„åœ°åŒºæˆ–è€…ä¸åŒçš„ç½‘ç»œï¼Œå¦‚ç”µä¿¡ã€è”é€šã€ç§»åŠ¨çš„æƒ…å†µä¸‹ï¼Œè½¬æ¢åçš„IPåœ°å€å¾ˆå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ¶‰åŠåˆ°è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡DNSè§£æåŸŸåæ—¶ä¼šå°†ä½ çš„è®¿é—®åˆ†é…åˆ°ä¸åŒçš„å…¥å£ï¼Œå…ˆæ‰¾é™„è¿‘çš„æœ¬åœ° DNS æœåŠ¡å™¨å»è¯·æ±‚è§£æåŸŸåï¼Œå°½å¯èƒ½ä¿è¯ä½ æ‰€è®¿é—®çš„å…¥å£æ˜¯æ‰€æœ‰å…¥å£ä¸­è¾ƒå¿«çš„ä¸€ä¸ªï¼Œè¿™å’ŒCDNè¿˜ä¸ä¸€æ ·ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„114.114.114.114æˆ–Googleçš„8.8.8.8å°±æ˜¯æœ¬åœ°åç§°æœåŠ¡å™¨ï¼‰ã€‚å¦‚æœé™„è¿‘çš„æœ¬åœ°DNSæœåŠ¡å™¨è¿˜æ˜¯æ²¡æœ‰ç¼“å­˜æˆ‘ä»¬è¯·æ±‚çš„åŸŸåè®°å½•çš„è¯ï¼Œè¿™æ—¶å€™ä¼šæ ¹æ®æœ¬åœ°DNSæœåŠ¡å™¨çš„è®¾ç½®ï¼ˆæ˜¯å¦è®¾ç½®è½¬å‘å™¨ï¼‰è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœæœªç”¨è½¬å‘æ¨¡å¼ï¼Œåˆ™æœ¬åœ°åç§°æœåŠ¡å™¨å†ä»¥DNSå®¢æˆ·ç«¯çš„è§’è‰²å‘é€ä¸å‰é¢ä¸€æ ·çš„DNSåŸŸåæŸ¥è¯¢è¯·æ±‚è½¬å‘ç»™ä¸Šä¸€å±‚ã€‚è¿™é‡Œå¯èƒ½ç»è¿‡ä¸€æ¬¡æˆ–è€…å¤šæ¬¡è½¬å‘ï¼Œä»æœ¬åœ°åç§°æœåŠ¡å™¨åˆ°æƒå¨åç§°æœåŠ¡å™¨å†åˆ°é¡¶çº§åç§°æœåŠ¡å™¨æœ€ååˆ°æ ¹åç§°æœåŠ¡å™¨ã€‚ï¼ˆé¡ºä¾¿ä¸€æï¼Œæ ¹æœåŠ¡å™¨æ˜¯äº’è”ç½‘åŸŸåè§£æç³»ç»ŸDNSä¸­æœ€é«˜çº§åˆ«çš„åŸŸåæœåŠ¡å™¨ï¼Œå…¨çƒä¸€å…±13ç»„ï¼Œæ¯ç»„éƒ½åªæœ‰ä¸€ä¸ªä¸»æ ¹åç§°æœåŠ¡å™¨é‡‡ç”¨åŒä¸€ä¸ªIPã€‚æ³¨æ„ä¸æ˜¯13ä¸ªï¼Œå‰æœŸæ˜¯ä¸ªç°åœ¨å·²ç»æ˜¯é›†ç¾¤äº†ï¼Œæ®è¯´å·²ç»æœ‰ä¸Šåƒå°äº†ï¼Œå¥½å¤šå°ç”¨äºè´Ÿè½½å‡è¡¡ï¼Œå¤‡ä»½ç­‰ï¼Œå…¨çƒæœ‰386å°æ ¹ç‰©ç†æœåŠ¡å™¨ï¼Œè¢«ç¼–å·ä¸ºAåˆ°Må…±13ä¸ªæ ‡å·ã€‚ä¸­å›½åŒ…æ‹¬å°æ¸¯ä¹ŸæŒæœ‰å…¶ä¸­5ç»„14å°è¾…æ ¹æœåŠ¡å™¨æˆ–å«é•œåƒä¹Ÿå¯ä»¥ï¼Œ386å°æ ¹æœåŠ¡å™¨æ€»å…±åªä½¿ç”¨äº†13ä¸ªIPï¼Œå› æ­¤å¯ä»¥æŠµæŠ—é’ˆå¯¹å…¶æ‰€è¿›è¡Œçš„åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»DDoSã€‚å…·ä½“æƒ…å†µå¯ä»¥å‚çœ‹ç»´åŸºç™¾ç§‘çš„ æ ¹åŸŸåæœåŠ¡å™¨ æ¡ç›®ï¼‰æ‰€ä»¥ï¼Œæœ€ç»ˆè¯·æ±‚åˆ°äº†æ ¹æœåŠ¡å™¨åï¼Œæ ¹æœåŠ¡å™¨æŸ¥è¯¢å‘ç°æˆ‘ä»¬è¿™ä¸ªè¢«è¯·æ±‚çš„åŸŸåæ˜¯ç”±ç±»ä¼¼Aæˆ–è€…Bè¿™æ ·çš„æœåŠ¡å™¨è§£æçš„ï¼Œä½†æ˜¯ï¼Œæ ¹æœåŠ¡å™¨å¹¶ä¸ä¼šé€ä½›é€åˆ°è¥¿åœ°æ‰¾Aæˆ–Bä¹‹ç±»çš„ç›´æ¥å»è§£æï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¿å­˜å…¨éƒ¨äº’è”ç½‘åŸŸåè®°å½•ï¼Œå¹¶ä¸ç›´æ¥ç”¨äºåç§°è§£æï¼Œå®ƒåªæ˜¯è´Ÿè´£é¡¶çº§åç§°æœåŠ¡å™¨ï¼ˆå¦‚.com/.cn/.netç­‰ï¼‰çš„ç›¸å…³å†…å®¹ã€‚æ‰€ä»¥å®ƒä¼šæŠŠæ‰€æŸ¥è¯¢å¾—åˆ°çš„è¢«è¯·æ±‚çš„DNSåŸŸåä¸­é¡¶çº§åŸŸåæ‰€å¯¹åº”çš„é¡¶çº§åç§°æœåŠ¡å™¨IPåœ°å€è¿”å›ç»™æœ¬åœ°åç§°æœåŠ¡å™¨ã€‚æœ¬åœ°åç§°æœåŠ¡å™¨æ‹¿åˆ°åœ°å€åå†å‘å¯¹åº”çš„é¡¶çº§åç§°æœåŠ¡å™¨å‘é€ä¸å‰é¢ä¸€æ ·çš„DNSåŸŸåæŸ¥è¯¢è¯·æ±‚ã€‚å¯¹åº”çš„é¡¶çº§åç§°æœåŠ¡å™¨åœ¨æ”¶åˆ°DNSæŸ¥è¯¢è¯·æ±‚åï¼Œä¹Ÿæ˜¯å…ˆæŸ¥è¯¢è‡ªå·±çš„ç¼“å­˜ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥æŠŠå¯¹åº”çš„è®°å½•é¡¹è¿”å›ç»™æœ¬åœ°åç§°æœåŠ¡å™¨ï¼Œç„¶åå†ç”±æœ¬åœ°åç§°æœåŠ¡å™¨è¿”å›ç»™DNSå®¢æˆ·ç«¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™å‘æœ¬åœ°åç§°æœåŠ¡å™¨è¿”å›æ‰€è¯·æ±‚çš„DNSåŸŸåä¸­çš„äºŒçº§åŸŸåæ‰€å¯¹åº”çš„äºŒçº§åç§°æœåŠ¡å™¨ï¼ˆå¦‚baidu.com/qq.com/net.cnç­‰ï¼‰åœ°å€ã€‚ç„¶åæœ¬åœ°åç§°æœåŠ¡å™¨ç»§ç»­æŒ‰ç…§å‰é¢ä»‹ç»çš„æ–¹æ³•ä¸€æ¬¡æ¬¡åœ°å‘ä¸‰çº§ï¼ˆå¦‚www.baidu.com/www.qq.com/bbs.taobao.comç­‰ï¼‰ã€å››çº§åç§°æœåŠ¡å™¨æŸ¥è¯¢ï¼Œç›´åˆ°æœ€ç»ˆçš„å¯¹åº”åŸŸåæ‰€åœ¨åŒºåŸŸçš„æƒå¨åç§°æœåŠ¡å™¨è¿”å›æœ€ç»ˆè®°å½•ç»™æœ¬åœ°åç§°æœåŠ¡å™¨ã€‚åŒæ—¶æœ¬åœ°åç§°æœåŠ¡å™¨ä¼šç¼“å­˜æœ¬æ¬¡æŸ¥è¯¢å¾—åˆ°çš„è®°å½•é¡¹ï¼ˆæ¯å±‚éƒ½åº”è¯¥ä¼šç¼“å­˜ï¼‰ã€‚å†å±‚å±‚ä¸‹ä¼ ï¼Œæœ€ååˆ°äº†æˆ‘ä»¬çš„DNSå®¢æˆ·ç«¯æœºå­ï¼Œä¸€æ¬¡ DNS è§£æè¯·æ±‚å°±æ­¤å®Œæˆã€‚å¦‚æœæœ€ç»ˆæƒå¨åç§°æœåŠ¡å™¨éƒ½è¯´æ‰¾ä¸åˆ°å¯¹åº”çš„åŸŸåè®°å½•ï¼Œåˆ™ä¼šå‘æœ¬åœ°åç§°æœåŠ¡å™¨è¿”å›ä¸€æ¡æŸ¥è¯¢å¤±è´¥çš„DNSåº”ç­”æŠ¥æ–‡ï¼Œè¿™æ¡æŠ¥æ–‡æœ€ç»ˆä¹Ÿä¼šç”±æœ¬åœ°åç§°æœåŠ¡å™¨è¿”å›ç»™DNSå®¢æˆ·ç«¯ã€‚å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªæƒå¨åç§°æœåŠ¡å™¨ä¸Šé…ç½®äº†æŒ‡å‘å…¶å®ƒåç§°æœåŠ¡å™¨çš„è½¬å‘å™¨ï¼Œåˆ™æƒå¨åç§°æœåŠ¡å™¨è¿˜ä¼šåœ¨è½¬å‘å™¨æŒ‡å‘çš„åç§°æœåŠ¡å™¨ä¸Šè¿›ä¸€æ­¥æŸ¥è¯¢ã€‚å¦å¤–ï¼Œå¦‚æœDNSå®¢æˆ·ç«¯ä¸Šé…ç½®äº†å¤šä¸ªDNSæœåŠ¡å™¨ï¼Œåˆ™è¿˜ä¼šç»§ç»­å‘å…¶å®ƒDNSæœåŠ¡å™¨æŸ¥è¯¢çš„ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬çœ‹åˆ°DNSçš„åŸŸåè§£ææ˜¯é€’å½’çš„ï¼Œé€’å½’çš„DNSé¦–å…ˆä¼šæŸ¥çœ‹è‡ªå·±çš„DNSç¼“å­˜ï¼Œå¦‚æœç¼“å­˜èƒ½å¤Ÿå‘½ä¸­ï¼Œé‚£ä¹ˆå°±ä»ç¼“å­˜ä¸­æŠŠIPåœ°å€è¿”å›ç»™æµè§ˆå™¨ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯¹åº”çš„åŸŸåçš„IPåœ°å€ï¼Œé‚£ä¹ˆå°±ä¾æ­¤å±‚å±‚å‘ä¸Šè½¬å‘è¯·æ±‚ï¼Œä»æ ¹åŸŸåæœåŠ¡å™¨åˆ°é¡¶çº§åŸŸåæœåŠ¡å™¨å†åˆ°æé™åŸŸåæœåŠ¡å™¨ä¾æ¬¡æœç´¢å¯¹åº”ç›®æ ‡åŸŸåçš„IPï¼Œæœ€é«˜è¾¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æˆ–è€…å…¨éƒ¨æ‰¾ä¸åˆ°ä¸ºæ­¢ã€‚ç„¶åæŠŠæ‰¾åˆ°çš„è¿™ä¸ªåŸŸåå¯¹åº”çš„ nameserver çš„åœ°å€æ‹¿åˆ°ï¼Œå†å‘è¿™ä¸ª namserver å»è¯·æ±‚åŸŸåå¯¹åº”çš„IPï¼Œæœ€åæŠŠè¿™ä¸ªIPåœ°å€è¿”å›ç»™æµè§ˆå™¨ï¼Œåœ¨è¿™ä¸ªé€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæµè§ˆå™¨æ¥è¯´æ˜¯é€æ˜çš„ï¼Œå¦‚æœDNSå®¢æˆ·ç«¯çš„æœ¬åœ°åç§°æœåŠ¡å™¨ä¸èƒ½è§£æçš„è¯ï¼Œåˆ™åé¢çš„æŸ¥è¯¢éƒ½ä¼šä»¥æœ¬åœ°åç§°æœåŠ¡å™¨ä¸ºä¸­å¿ƒï¼Œå…¨äº¤ç”±æœ¬åœ°åç§°æœåŠ¡å™¨ä»£æ›¿DNSå®¢æˆ·ç«¯è¿›è¡ŒæŸ¥è¯¢ï¼ŒDNSå®¢æˆ·ç«¯åªæ˜¯å‘å‡ºåŸå§‹çš„åŸŸåæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ï¼Œç„¶åå°±ä¸€ç›´å¤„äºåç­‰çŠ¶æ€ï¼Œç›´åˆ°æœ¬åœ°åç§°æœåŠ¡å™¨æœ€ç»ˆä»æƒå¨åç§°æœåŠ¡å™¨å¾—åˆ°äº†æ­£ç¡®çš„IPåœ°å€æŸ¥è¯¢ç»“æœå¹¶è¿”å›ç»™å®ƒã€‚è™½ç„¶é€’å½’æŸ¥è¯¢æ˜¯é»˜è®¤çš„DNSæŸ¥è¯¢æ–¹å¼ï¼Œä½†æ˜¯å¦‚æœæœ‰ä»¥ä¸‹æƒ…å†µå‘ç”Ÿçš„è¯ï¼Œåˆ™ä¼šä½¿ç”¨è¿­ä»£çš„æŸ¥è¯¢æ–¹å¼è¿›è¡Œã€‚ æƒ…å†µä¸€ï¼šDNSå®¢æˆ·ç«¯çš„è¯·æ±‚æŠ¥æ–‡ä¸­æ²¡æœ‰ç”³è¯·ä½¿ç”¨é€’å½’æŸ¥è¯¢ï¼Œå³åœ¨DNSè¯·æ±‚æŠ¥å¤´éƒ¨çš„RDå­—æ®µæ²¡æœ‰ç½®1ã€‚ æƒ…å†µäºŒï¼šDNSå®¢æˆ·ç«¯çš„è¯·æ±‚æŠ¥æ–‡ä¸­ç”³è¯·ä½¿ç”¨çš„æ˜¯é€’å½’æŸ¥è¯¢ï¼ˆä¹Ÿå°±æ˜¯RDå­—æ®µç½®1äº†ï¼‰ï¼Œä½†åœ¨æ‰€é…ç½®çš„æœ¬åœ°åç§°æœåŠ¡å™¨ä¸Šæ˜¯ç¦ç”¨é€’å½’æŸ¥è¯¢äº†ï¼ˆå³åœ¨åº”ç­”DNSæŠ¥æ–‡å¤´éƒ¨çš„RAå­—æ®µç½®0ï¼‰ã€‚ è¿­ä»£æŸ¥è¯¢çš„æµç¨‹å¦‚ä¸‹ï¼š å¼€å§‹ä¹Ÿæ˜¯ä»æµè§ˆå™¨ç¼“å­˜åˆ°ç³»ç»Ÿç¼“å­˜åˆ°è·¯ç”±ç¼“å­˜ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æ‰¾åˆ°åˆ™å®¢æˆ·ç«¯å‘æœ¬æœºé…ç½®çš„æœ¬åœ°åç§°æœåŠ¡å™¨ï¼ˆåœ¨æ­¤ä»…ä»¥é¦–å…ˆDNSæœåŠ¡å™¨ä¸ºä¾‹è¿›è¡Œä»‹ç»ï¼Œå…¶å®ƒå¤‡ç”¨DNSæœåŠ¡å™¨çš„è§£ææµç¨‹å®Œå…¨ä¸€æ ·ï¼‰å‘å‡ºDNSåŸŸåæŸ¥è¯¢è¯·æ±‚ã€‚æœ¬åœ°åç§°æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå…ˆæŸ¥è¯¢æœ¬åœ°çš„ç¼“å­˜ï¼Œå¦‚æœæœ‰è¯¥åŸŸåçš„è®°å½•é¡¹ï¼Œåˆ™æœ¬åœ°åç§°æœåŠ¡å™¨å°±ç›´æ¥æŠŠæŸ¥è¯¢çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼›å¦‚æœæœ¬åœ°ç¼“å­˜ä¸­æ²¡æœ‰è¯¥åŸŸåçš„è®°å½•ï¼Œåˆ™å‘DNSå®¢æˆ·ç«¯è¿”å›ä¸€æ¡DNSåº”ç­”æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­ä¼šç»™å‡ºä¸€äº›å‚è€ƒä¿¡æ¯ï¼Œå¦‚æœ¬åœ°åç§°æœåŠ¡å™¨ä¸Šçš„æ ¹åç§°æœåŠ¡å™¨åœ°å€ç­‰ã€‚DNSå®¢æˆ·ç«¯åœ¨æ”¶åˆ°æœ¬åœ°åç§°æœåŠ¡å™¨çš„åº”ç­”æŠ¥æ–‡åï¼Œä¼šæ ¹æ®å…¶ä¸­çš„æ ¹åç§°æœåŠ¡å™¨åœ°å€ä¿¡æ¯ï¼Œå‘å¯¹åº”çš„æ ¹åç§°æœåŠ¡å™¨å†æ¬¡å‘å‡ºä¸å‰é¢ä¸€æ ·çš„DNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ã€‚æ ¹åç§°æœåŠ¡å™¨åœ¨æ”¶åˆ°DNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡åï¼Œé€šè¿‡æŸ¥è¯¢è‡ªå·±çš„DNSæ•°æ®åº“å¾—åˆ°è¯·æ±‚DNSåŸŸåä¸­é¡¶çº§åŸŸåæ‰€å¯¹åº”çš„é¡¶çº§åç§°æœåŠ¡å™¨ä¿¡æ¯ï¼Œç„¶åä»¥ä¸€æ¡DNSåº”ç­”æŠ¥æ–‡è¿”å›ç»™DNSå®¢æˆ·ç«¯ã€‚DNSå®¢æˆ·ç«¯æ ¹æ®æ¥è‡ªæ ¹åç§°æœåŠ¡å™¨åº”ç­”æŠ¥æ–‡ä¸­çš„å¯¹åº”é¡¶çº§åç§°æœåŠ¡å™¨åœ°å€ä¿¡æ¯ï¼Œå‘è¯¥é¡¶çº§åç§°æœåŠ¡å™¨å‘å‡ºä¸å‰é¢ä¸€æ ·çš„DNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ã€‚é¡¶çº§åç§°æœåŠ¡å™¨åœ¨æ”¶åˆ°DNSæŸ¥è¯¢è¯·æ±‚åï¼Œå…ˆæŸ¥è¯¢è‡ªå·±çš„ç¼“å­˜ï¼Œå¦‚æœæœ‰è¯·æ±‚çš„DNSåŸŸåçš„è®°å½•é¡¹ï¼Œåˆ™ç›´æ¥æŠŠå¯¹åº”çš„è®°å½•é¡¹è¿”å›ç»™DNSå®¢æˆ·ç«¯ï¼Œå¦åˆ™é€šè¿‡æŸ¥è¯¢åæŠŠå¯¹åº”åŸŸåä¸­äºŒçº§åŸŸåæ‰€å¯¹åº”çš„äºŒçº§åç§°æœåŠ¡å™¨åœ°å€ä¿¡æ¯ä»¥ä¸€æ¡DNSåº”ç­”æŠ¥æ–‡è¿”å›ç»™DNSå®¢æˆ·ç«¯ã€‚ç„¶åDNSå®¢æˆ·ç«¯ç»§ç»­æŒ‰ç…§å‰é¢ä»‹ç»çš„æ–¹æ³•ä¸€æ¬¡æ¬¡åœ°å‘ä¸‰çº§ã€å››çº§åç§°æœåŠ¡å™¨æŸ¥è¯¢ï¼Œç›´åˆ°æœ€ç»ˆçš„æƒå¨åç§°æœåŠ¡å™¨è¿”å›åˆ°æœ€ç»ˆçš„è®°å½•ã€‚å¦‚æœæƒå¨åç§°æœåŠ¡å™¨ä¹Ÿæ‰¾ä¸åˆ°å¯¹åº”çš„åŸŸåè®°å½•ï¼Œåˆ™ä¼šå‘DNSå®¢æˆ·ç«¯è¿”å›ä¸€æ¡æŸ¥è¯¢å¤±è´¥çš„DNSåº”ç­”æŠ¥æ–‡ã€‚å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªæƒå¨åç§°æœåŠ¡å™¨ä¸Šé…ç½®äº†æŒ‡å‘å…¶å®ƒåç§°æœåŠ¡å™¨çš„è½¬å‘å™¨ï¼Œåˆ™æƒå¨åç§°æœåŠ¡å™¨è¿˜ä¼šåœ¨è½¬å‘å™¨æŒ‡å‘çš„åç§°æœåŠ¡å™¨ä¸Šè¿›ä¸€æ­¥æŸ¥è¯¢ã€‚å¦å¤–ï¼Œå¦‚æœDNSå®¢æˆ·ç«¯ä¸Šé…ç½®äº†å¤šä¸ªDNSæœåŠ¡å™¨ï¼Œåˆ™è¿˜ä¼šç»§ç»­å‘å…¶å®ƒDNSæœåŠ¡å™¨æŸ¥è¯¢ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å‘ç°åœ¨é€’å½’æŸ¥è¯¢ä¸­åé¢çš„æŸ¥è¯¢å·¥ä½œæ˜¯ç”±æœ¬åœ°åç§°æœåŠ¡å™¨æ›¿ä»£DNSå®¢æˆ·ç«¯è¿›è¡Œçš„ï¼ˆä»¥â€œæœ¬åœ°åç§°æœåŠ¡å™¨â€ä¸ºä¸­å¿ƒï¼‰ï¼Œåªéœ€è¦æœ¬åœ°åç§°æœåŠ¡å™¨å‘DNSå®¢æˆ·ç«¯è¿”å›æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœå³å¯ã€‚è€ŒDNSè¿­ä»£æŸ¥è¯¢çš„æ‰€æœ‰æŸ¥è¯¢å·¥ä½œåˆ™å…¨éƒ¨æ˜¯DNSå®¢æˆ·ç«¯è‡ªå·±è¿›è¡Œï¼ˆä»¥â€œDNSå®¢æˆ·ç«¯â€è‡ªå·±ä¸ºä¸­å¿ƒï¼‰ã€‚ DNSé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«ï¼Ÿ é€’å½’æŸ¥è¯¢æ˜¯ä»¥æœ¬åœ°åç§°æœåŠ¡å™¨ä¸ºä¸­å¿ƒçš„ï¼Œæ˜¯DNSå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æŸ¥è¯¢æ´»åŠ¨ï¼Œé€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­â€œæŸ¥è¯¢çš„é€’äº¤è€…â€ ä¸€ç›´åœ¨æ›´æ›¿ï¼Œå…¶ç»“æœæ˜¯ç›´æ¥å‘Šè¯‰DNSå®¢æˆ·ç«¯éœ€è¦æŸ¥è¯¢çš„ç½‘ç«™ç›®æ ‡IPåœ°å€ã€‚ è¿­ä»£æŸ¥è¯¢åˆ™æ˜¯DNSå®¢æˆ·ç«¯è‡ªå·±ä¸ºä¸­å¿ƒçš„ï¼Œæ˜¯å„ä¸ªæœåŠ¡å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æŸ¥è¯¢æ´»åŠ¨ï¼Œè¿­ä»£æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­â€œæŸ¥è¯¢çš„é€’äº¤è€…â€ä¸€ç›´æ²¡å˜åŒ–ï¼Œå…¶ç»“æœæ˜¯é—´æ¥å‘Šè¯‰DNSå®¢æˆ·ç«¯å¦ä¸€ä¸ªDNSæœåŠ¡å™¨çš„åœ°å€ã€‚ é€’å½’å’Œè¿­ä»£æŸ¥è¯¢ ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œä¸€æ¬¡é€‰ä¿®è¯¾ä¸Šä½ ç¢°åˆ°äº†ä½ çš„å¥³ç¥ï¼Œä½†ä½ åªçŸ¥é“å¥¹çš„åå­—å¹¶ä¸çŸ¥é“å¥¹çš„ç”µè¯ï¼Œäºæ˜¯åœ¨æ‰‹æœºé€šè®¯å½•é‡Œæ‰¾ï¼Œæ²¡æ‰¾åˆ°ï¼Œç„¶åä½ å›åˆ°å¯å®¤æŠŠå¥¹åå­—å‘Šè¯‰äº†ä¸€ä¸ªå¾ˆä»—ä¹‰çš„å“¥ä»¬ï¼Œè®©ä»–å¸®ä½ æ‰¾ï¼Œè¿™ä¸ªå“¥ä»¬å„¿ï¼ˆæœ¬åœ°åç§°æœåŠ¡å™¨ï¼‰äºŒè¯æ²¡è¯´ï¼Œå¼€å§‹æ›¿ä½ æŸ¥ï¼ˆæ­¤å¤„å®Œæˆäº†ä¸€æ¬¡é€’å½’æŸ¥è¯¢ï¼Œå³é—®è¯¢çš„äººç”±ä½ å˜æˆäº†ä½ çš„å“¥ä»¬ï¼‰ã€‚ç„¶åä½ å“¥ä»¬å¸¦ç€åå­—å»é—®äº†å­¦é™¢å¤§å››çš„å­¦é•¿ï¼Œå­¦é•¿ä¸€çœ‹ï¼Œæˆ‘æ“¦ï¼Œè¿™å§‘å¨˜æˆ‘è®¤è¯†å•Šï¼Œäºæ˜¯åœ¨æ‰‹æœºé‡Œæ‰¾åˆ°äº†å¥¹çš„ç”µè¯å‘Šè¯‰äº†ä½ å“¥ä»¬ï¼Œä½ å“¥ä»¬å›æ¥å‘Šè¯‰äº†ä½ ï¼Œä½ äºæ˜¯çŸ¥é“äº†å¥¹çš„ç”µè¯ï¼ˆè¿™é‡Œä¸€æ¬¡é€’å½’æŸ¥è¯¢ç»“æŸï¼‰ã€‚è¿˜æœ‰ä¸€ç§å¯èƒ½ä½ å“¥ä»¬è·‘å»é—®å­¦é•¿ï¼Œå­¦é•¿ä¹Ÿæ²¡å¥¹ç”µè¯ï¼Œä½†å­¦é•¿å‘Šè¯‰ä½ å“¥ä»¬ï¼Œè¿™å§‘å¨˜æ˜¯xxç³»çš„ï¼›ç„¶åä½ å“¥ä»¬å„¿é©¬ä¸åœè¹„åˆé—®äº†xxç³»çš„åŠå…¬å®¤ä¸»ä»»åŠ©ç†åŒå­¦ï¼ŒåŠ©ç†åŒå­¦è¯´æ˜¯xxç³»yyç­çš„ï¼Œç„¶åå¾ˆä»—ä¹‰çš„å“¥ä»¬å„¿å»xxç³»yyç­çš„ç­é•¿é‚£é‡Œå–åˆ°äº†è¯¥å¥³å­©çš„ç”µè¯ï¼ˆæ­¤å¤„å®Œæˆè‹¥å¹²æ¬¡è¿­ä»£æŸ¥è¯¢ï¼Œå³é—®è¯¢çš„äººä¸€ç›´æ˜¯ä½ å“¥ä»¬ä¸å˜ï¼Œä½†åå¤æ›´æ›¿çš„æ˜¯é—®è¯¢å¯¹è±¡ï¼‰ã€‚æœ€åï¼Œä»–æŠŠå·ç äº¤åˆ°äº†ä½ æ‰‹é‡Œï¼Œå®Œæˆæ•´ä¸ªæŸ¥è¯¢è¿‡ç¨‹ã€‚ æ‰©å±•é˜…è¯»ï¼š ä»€ä¹ˆæ˜¯DNSåŠ«æŒï¼Ÿ ä»€ä¹ˆæ˜¯301é‡å®šå‘ï¼Ÿä¸301é‡å®šå‘è®¾ç½®æ•™ç¨‹ ç”µè„‘ä¸Šä¸äº†ç½‘å°†DNSæ”¹ä¸º114.114.114.114æˆ–8.8.8.8å¯ä»¥è§£å†³æˆ–åŠ å¿«ç½‘é€Ÿçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ å±€åŸŸç½‘ IP å’Œå…¬ç½‘ IP æœ‰ä½•å·®åˆ«ï¼Ÿ æ ¹åŸŸåæœåŠ¡å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå…¨çƒ 13 ç»„æ ¹åŸŸåæœåŠ¡å™¨ä¸­æœ‰ 10 ç»„åœ¨ç¾å›½ï¼Œæ„å‘³ç€ä»€ä¹ˆï¼Ÿ é€’å½’å’Œè¿­ä»£çš„åŒºåˆ«ï¼Ÿ 3. åº”ç”¨å±‚å®¢æˆ·ç«¯å‘é€HTTPè¯·æ±‚ äº’è”ç½‘å†…å„ç½‘ç»œè®¾å¤‡é—´çš„é€šä¿¡éƒ½éµå¾ªTCP/IPåè®®ï¼Œåˆ©ç”¨TCP/IPåè®®æ—è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶ï¼Œä¼šé€šè¿‡åˆ†å±‚é¡ºåºä¸å¯¹æ–¹è¿›è¡Œé€šä¿¡ã€‚åˆ†å±‚ç”±é«˜åˆ°ä½åˆ†åˆ«ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€‚å‘é€ç«¯ä»åº”ç”¨å±‚å¾€ä¸‹èµ°ï¼Œæ¥æ”¶ç«¯ä»æ•°æ®é“¾è·¯å±‚ç½‘ä¸Šèµ°ã€‚å¦‚å›¾æ‰€ç¤ºï¼š ä»ä¸Šé¢çš„æ­¥éª¤ä¸­å¾—åˆ° IP åœ°å€åï¼Œæµè§ˆå™¨ä¼šå¼€å§‹æ„é€ ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œåº”ç”¨å±‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€çš„HTTPè¯·æ±‚åŒ…æ‹¬ï¼šè¯·æ±‚æŠ¥å¤´å’Œè¯·æ±‚ä¸»ä½“ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­è¯·æ±‚æŠ¥å¤´ï¼ˆrequest headerï¼‰åŒ…å«äº†è‡³å…³é‡è¦çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„æ–¹æ³•ï¼ˆGET / POSTå’Œä¸å¸¸ç”¨çš„PUT / DELETEä»¥åŠæ›´ä¸å¸¸ç”¨çš„HEAD / OPTION / TRACEï¼Œä¸€èˆ¬çš„æµè§ˆå™¨åªèƒ½å‘èµ· GET æˆ–è€… POST è¯·æ±‚ï¼‰ã€ç›®æ ‡urlã€éµå¾ªçš„åè®®ï¼ˆHTTP / HTTPS / FTPâ€¦ï¼‰ï¼Œè¿”å›çš„ä¿¡æ¯æ˜¯å¦éœ€è¦ç¼“å­˜ï¼Œä»¥åŠå®¢æˆ·ç«¯æ˜¯å¦å‘é€Cookieç­‰ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸º HTTP è¯·æ±‚æ˜¯çº¯æ–‡æœ¬æ ¼å¼çš„ï¼Œæ‰€ä»¥åœ¨ TCP çš„æ•°æ®æ®µä¸­å¯ä»¥ç›´æ¥åˆ†æ HTTP æ–‡æœ¬çš„ã€‚ 4. ä¼ è¾“å±‚TCPä¼ è¾“æŠ¥æ–‡ å½“åº”ç”¨å±‚çš„ HTTP è¯·æ±‚å‡†å¤‡å¥½åï¼Œæµè§ˆå™¨ä¼šåœ¨ä¼ è¾“å±‚å‘èµ·ä¸€æ¡åˆ°è¾¾æœåŠ¡å™¨çš„ TCP è¿æ¥ï¼Œä½äºä¼ è¾“å±‚çš„TCPåè®®ä¸ºä¼ è¾“æŠ¥æ–‡æä¾›å¯é çš„å­—èŠ‚æµæœåŠ¡ã€‚å®ƒä¸ºäº†æ–¹ä¾¿ä¼ è¾“ï¼Œå°†å¤§å—çš„æ•°æ®åˆ†å‰²æˆä»¥æŠ¥æ–‡æ®µä¸ºå•ä½çš„æ•°æ®åŒ…è¿›è¡Œç®¡ç†ï¼Œå¹¶ä¸ºå®ƒä»¬ç¼–å·ï¼Œæ–¹ä¾¿æœåŠ¡å™¨æ¥æ”¶æ—¶èƒ½å‡†ç¡®åœ°è¿˜åŸæŠ¥æ–‡ä¿¡æ¯ã€‚TCPåè®®é€šè¿‡â€œä¸‰æ¬¡æ¡æ‰‹â€ç­‰æ–¹æ³•ä¿è¯ä¼ è¾“çš„å®‰å…¨å¯é ã€‚â€œä¸‰æ¬¡æ¡æ‰‹â€çš„è¿‡ç¨‹æ˜¯ï¼Œå‘é€ç«¯å…ˆå‘é€ä¸€ä¸ªå¸¦æœ‰SYNï¼ˆsynchronizeï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ç»™æ¥æ”¶ç«¯ï¼Œåœ¨ä¸€å®šçš„å»¶è¿Ÿæ—¶é—´å†…ç­‰å¾…æ¥æ”¶çš„å›å¤ã€‚æ¥æ”¶ç«¯æ”¶åˆ°æ•°æ®åŒ…åï¼Œä¼ å›ä¸€ä¸ªå¸¦æœ‰SYN/ACKæ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯ã€‚æ¥æ”¶æ–¹æ”¶åˆ°åå†å‘é€ä¸€ä¸ªå¸¦æœ‰ACKæ ‡å¿—çš„æ•°æ®åŒ…ç»™æ¥æ”¶ç«¯ä»¥ç¤ºæ¡æ‰‹æˆåŠŸã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘é€ç«¯åœ¨è§„å®šå»¶è¿Ÿæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å›å¤åˆ™é»˜è®¤æ¥æ”¶æ–¹æ²¡æœ‰æ”¶åˆ°è¯·æ±‚ï¼Œè€Œå†æ¬¡å‘é€ï¼Œç›´åˆ°æ”¶åˆ°å›å¤ä¸ºæ­¢ã€‚ è¿™é‡Œéœ€è¦è°ˆä¸€ä¸‹ TCP çš„ Head-of-line blocking é—®é¢˜ï¼šå‡è®¾å®¢æˆ·ç«¯çš„å‘é€äº† 3 ä¸ª TCP ç‰‡æ®µï¼ˆsegmentsï¼‰ï¼Œç¼–å·åˆ†åˆ«æ˜¯ 1ã€2ã€3ï¼Œå¦‚æœç¼–å·ä¸º 1 çš„åŒ…ä¼ è¾“æ—¶ä¸¢äº†ï¼Œå³ä¾¿ç¼–å· 2 å’Œ 3 å·²ç»åˆ°è¾¾ä¹Ÿåªèƒ½ç­‰å¾…ï¼Œå› ä¸º TCP åè®®éœ€è¦ä¿è¯é¡ºåºï¼Œè¿™ä¸ªé—®é¢˜åœ¨ HTTP pipelining ä¸‹æ›´ä¸¥é‡ï¼Œå› ä¸º HTTP pipelining å¯ä»¥è®©å¤šä¸ª HTTP è¯·æ±‚é€šè¿‡ä¸€ä¸ª TCP å‘é€ï¼Œæ¯”å¦‚å‘é€ä¸¤å¼ å›¾ç‰‡ï¼Œå¯èƒ½ç¬¬äºŒå¼ å›¾ç‰‡çš„æ•°æ®å·²ç»å…¨æ”¶åˆ°äº†ï¼Œä½†è¿˜å¾—ç­‰ç¬¬ä¸€å¼ å›¾ç‰‡çš„æ•°æ®ä¼ åˆ°ã€‚ä¸ºäº†è§£å†³ TCP åè®®çš„æ€§èƒ½é—®é¢˜ï¼ŒChrome å›¢é˜Ÿæå‡ºäº† QUIC åè®®ï¼Œå®ƒæ˜¯åŸºäº UDP å®ç°çš„å¯é ä¼ è¾“ï¼Œæ¯”èµ· TCPï¼Œå®ƒèƒ½å‡å°‘å¾ˆå¤šæ¥å›ï¼ˆround tripï¼‰æ—¶é—´ï¼Œè¿˜æœ‰å‰å‘çº é”™ç ï¼ˆForward Error Correctionï¼‰ç­‰åŠŸèƒ½ã€‚ç›®å‰ Google Plusã€ Gmailã€Google Searchã€blogspotã€Youtube ç­‰å‡ ä¹å¤§éƒ¨åˆ† Google äº§å“éƒ½åœ¨ä½¿ç”¨ QUICï¼Œå¯ä»¥é€šè¿‡chrome://net-internals/#spdy é¡µé¢æ¥å‘ç°ã€‚å¦å¤–ï¼Œæµè§ˆå™¨å¯¹åŒä¸€ä¸ªåŸŸåæœ‰è¿æ¥æ•°é™åˆ¶ï¼Œå¤§éƒ¨åˆ†æ˜¯ 6ï¼Œä½†å¹¶éå°†è¿™ä¸ªè¿æ¥æ•°æ”¹å¤§åå°±ä¼šæå‡æ€§èƒ½ï¼ŒChrome å›¢é˜Ÿæœ‰åšè¿‡å®éªŒï¼Œå‘ç°ä» 6 æ”¹æˆ 10 åæ€§èƒ½åè€Œä¸‹é™äº†ï¼Œé€ æˆè¿™ä¸ªç°è±¡çš„å› ç´ æœ‰å¾ˆå¤šï¼Œå¦‚å»ºç«‹è¿æ¥çš„å¼€é”€ã€æ‹¥å¡æ§åˆ¶ç­‰é—®é¢˜ï¼Œè€Œåƒ SPDYã€HTTP 2.0 åè®®å°½ç®¡åªä½¿ç”¨ä¸€ä¸ª TCP è¿æ¥æ¥ä¼ è¾“æ•°æ®ï¼Œä½†æ€§èƒ½åè€Œæ›´å¥½ï¼Œè€Œä¸”è¿˜èƒ½å®ç°è¯·æ±‚ä¼˜å…ˆçº§ã€‚ 5. ç½‘ç»œå±‚IPåè®®æŸ¥è¯¢MACåœ°å€ IPåè®®çš„ä½œç”¨æ˜¯æŠŠTCPåˆ†å‰²å¥½çš„å„ç§æ•°æ®åŒ…å°è£…åˆ°IPåŒ…é‡Œé¢ä¼ é€ç»™æ¥æ”¶æ–¹ã€‚è€Œè¦ä¿è¯ç¡®å®èƒ½ä¼ åˆ°æ¥æ”¶æ–¹è¿˜éœ€è¦æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œä¹Ÿå°±æ˜¯ç‰©ç†åœ°å€æ‰å¯ä»¥ã€‚IPåœ°å€å’ŒMACåœ°å€æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œä¸€ä¸ªç½‘ç»œè®¾å¤‡çš„IPåœ°å€å¯ä»¥æ›´æ¢ï¼Œä½†æ˜¯MACåœ°å€ä¸€èˆ¬æ˜¯å›ºå®šä¸å˜çš„ã€‚ARPåè®®å¯ä»¥å°†IPåœ°å€è§£ææˆå¯¹åº”çš„MACåœ°å€ã€‚å½“é€šä¿¡çš„åŒæ–¹ä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘æ—¶ï¼Œéœ€è¦å¤šæ¬¡ä¸­è½¬æ‰èƒ½åˆ°è¾¾æœ€ç»ˆçš„ç›®æ ‡ï¼Œåœ¨ä¸­è½¬çš„è¿‡ç¨‹ä¸­éœ€è¦é€šè¿‡ä¸‹ä¸€ä¸ªä¸­è½¬ç«™çš„MACåœ°å€æ¥æœç´¢ä¸‹ä¸€ä¸ªä¸­è½¬ç›®æ ‡ã€‚ 6. æ•°æ®åˆ°è¾¾æ•°æ®é“¾è·¯å±‚ åœ¨æ‰¾åˆ°å¯¹æ–¹çš„MACåœ°å€åï¼Œå·²è¢«å°è£…å¥½çš„IPåŒ…å†è¢«å°è£…åˆ°æ•°æ®é“¾è·¯å±‚çš„æ•°æ®å¸§ç»“æ„ä¸­ï¼Œå°†æ•°æ®å‘é€åˆ°æ•°æ®é“¾è·¯å±‚ä¼ è¾“ï¼Œå†é€šè¿‡ç‰©ç†å±‚çš„æ¯”ç‰¹æµé€å‡ºå»ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„é˜¶æ®µç»“æŸã€‚ è¿™äº›åˆ†å±‚çš„æ„ä¹‰åœ¨äºåˆ†å·¥åˆä½œï¼Œæ•°æ®é“¾è·¯å±‚é€šè¿‡ CSMA/CD åè®®ä¿è¯äº†ç›¸é‚»ä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®æŠ¥æ–‡ä¼ é€’ï¼Œè€Œç½‘ç»œå±‚çš„ IP æ•°æ®åŒ…é€šè¿‡ä¸åŒå­ç½‘ä¹‹é—´çš„è·¯ç”±å™¨çš„è·¯ç”±ç®—æ³•å’Œè·¯ç”±è½¬å‘ï¼Œä¿è¯äº†äº’è”ç½‘ä¸Šä¸¤å°é¥è¿œä¸»æœºä¹‹é—´çš„ç‚¹å¯¹ç‚¹çš„é€šè®¯ï¼Œä¸è¿‡è¿™ç§ä¼ è¾“æ˜¯ä¸å¯é ï¼Œäºæ˜¯å¯é æ€§å°±ç”±ä¼ è¾“å±‚çš„ TCP åè®®æ¥ä¿è¯ï¼ŒTCP é€šè¿‡æ…¢å¼€å§‹ï¼Œä¹˜æ³•å‡å°ç­‰æ‰‹æ®µæ¥è¿›è¡Œæµé‡æ§åˆ¶å’Œæ‹¥å¡é¿å…ï¼ŒåŒæ—¶æä¾›äº†ä¸¤å°é¥è¿œä¸»æœºä¸Šè¿›ç¨‹åˆ°è¿›ç¨‹çš„é€šä¿¡ï¼Œæœ€ç»ˆä¿è¯äº† HTTP çš„è¯·æ±‚å¤´èƒ½å¤Ÿè¢«è¿œæ–¹çš„æœåŠ¡å™¨ä¸Šæ­£åœ¨ç›‘å¬çš„ HTTP æœåŠ¡å™¨è¿›ç¨‹æ”¶åˆ°ï¼Œç»ˆäºï¼Œæ•°æ®åŒ…åœ¨è·³ä¸è·³ä¹‹é—´è¢«æ‹†äº†åˆå°è£…ï¼Œåœ¨å­ç½‘ä¸å­ç½‘ä¹‹é—´è¢«è½¬å‘äº†åˆè½¬å‘ï¼Œæœ€åè¿›å…¥äº†æœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿçš„ç¼“å†²åŒºï¼ŒæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿç”±æ­¤ç»™æ­£åœ¨è¢«é˜»å¡ä½çš„ accept å‡½æ•°ä¸€ä¸ªè¿”å›ï¼Œå°†ä»–å”¤é†’ã€‚ 7. æœåŠ¡å™¨æ¥æ”¶æ•°æ® æ¥æ”¶ç«¯çš„æœåŠ¡å™¨åœ¨é“¾è·¯å±‚æ¥æ”¶åˆ°æ•°æ®åŒ…ï¼Œå†å±‚å±‚å‘ä¸Šç›´åˆ°åº”ç”¨å±‚ã€‚è¿™è¿‡ç¨‹ä¸­åŒ…æ‹¬åœ¨ä¼ è¾“å±‚é€šè¿‡TCPåè®®å°†åˆ†æ®µçš„æ•°æ®åŒ…é‡æ–°ç»„æˆåŸæ¥çš„HTTPè¯·æ±‚æŠ¥æ–‡ã€‚ 8. æœåŠ¡å™¨å“åº”è¯·æ±‚å¹¶è¿”å›ç›¸åº”æ–‡ä»¶ æœåŠ¡æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„HTTPè¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¸Šçš„çš„ http ç›‘å¬è¿›ç¨‹ä¼šå¾—åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œç„¶åä¸€èˆ¬æƒ…å†µä¸‹ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹å»å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼ŒåŒæ—¶çˆ¶è¿›ç¨‹ç»§ç»­ç›‘å¬ã€‚http æœåŠ¡å™¨é¦–å…ˆä¼šæŸ¥çœ‹é‡å†™è§„åˆ™ï¼Œç„¶åå¦‚æœè¯·æ±‚çš„æ–‡ä»¶æ˜¯çœŸå®å­˜åœ¨ï¼Œä¾‹å¦‚ä¸€äº›å›¾ç‰‡ï¼Œæˆ– htmlã€cssã€js ç­‰é™æ€æ–‡ä»¶ï¼Œåˆ™ä¼šç›´æ¥æŠŠè¿™ä¸ªæ–‡ä»¶è¿”å›ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¯·æ±‚ï¼Œé‚£ä¹ˆä¼šæ ¹æ® url é‡å†™æ¨¡å—çš„è§„åˆ™ï¼ŒæŠŠè¿™ä¸ªè¯·æ±‚é‡å†™åˆ°ä¸€ä¸ª rest é£æ ¼çš„ url ä¸Šï¼Œç„¶åæ ¹æ®åŠ¨æ€è¯­è¨€çš„è„šæœ¬ï¼Œæ¥å†³å®šè°ƒç”¨ä»€ä¹ˆç±»å‹çš„åŠ¨æ€æ–‡ä»¶è„šæœ¬è§£é‡Šå™¨æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚ æˆ‘ä»¬ä»¥ php è¯­è¨€ä¸ºä¾‹æ¥è¯´çš„è¯ï¼Œè¯·æ±‚åˆ°è¾¾ä¸€ä¸ª php çš„ mvc æ¡†æ¶ä¹‹åï¼Œæ¡†æ¶é¦–å…ˆåº”è¯¥ä¼šåˆå§‹åŒ–ä¸€äº›ç¯å¢ƒçš„å‚æ•°ï¼Œä¾‹å¦‚è¿œç«¯ ipï¼Œè¯·æ±‚å‚æ•°ç­‰ç­‰ï¼Œç„¶åæ ¹æ®è¯·æ±‚çš„ url é€åˆ°ä¸€ä¸ªè·¯ç”±å™¨ç±»é‡Œé¢å»åŒ¹é…è·¯ç”±ï¼Œè·¯ç”±ç”±ä¸Šåˆ°ä¸‹é€æ¡åŒ¹é…ï¼Œä¸€æ—¦é‡åˆ° url èƒ½å¤ŸåŒ¹é…çš„ä¸Šï¼Œè€Œä¸”è¯·æ±‚çš„æ–¹æ³•ä¹Ÿèƒ½å¤Ÿå‘½ä¸­çš„è¯ï¼Œé‚£ä¹ˆè¯·æ±‚å°±ä¼šç”±è¿™ä¸ªè·¯ç”±æ‰€å®šä¹‰çš„å¤„ç†æ–¹æ³•å»å¤„ç†ã€‚ è¯·æ±‚è¿›å…¥å¤„ç†å‡½æ•°ä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯æ‰€è¯·æ±‚éœ€è¦æµè§ˆçš„å†…å®¹æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å†…å®¹ï¼Œé‚£ä¹ˆå¤„ç†å‡½æ•°ä¼šç›¸åº”çš„ä»æ•°æ®æºé‡Œé¢å–å‡ºæ•°æ®ï¼Œè¿™ä¸ªåœ°æ–¹ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªç¼“å­˜ï¼Œä¾‹å¦‚ memcached æ¥å‡å° db çš„å‹åŠ›ï¼Œå¦‚æœå¼•å…¥äº† orm æ¡†æ¶çš„è¯ï¼Œé‚£ä¹ˆå¤„ç†å‡½æ•°ç›´æ¥å‘ orm æ¡†æ¶ç´¢è¦æ•°æ®å°±å¯ä»¥äº†ï¼Œç”± orm æ¡†æ¶æ¥å†³å®šæ˜¯ä½¿ç”¨å†…å­˜é‡Œé¢çš„ç¼“å­˜è¿˜æ˜¯ä» db å»å–æ•°æ®ï¼Œä¸€èˆ¬ç¼“å­˜éƒ½ä¼šæœ‰ä¸€ä¸ªè¿‡æœŸçš„æ—¶é—´ï¼Œè€Œ orm æ¡†æ¶ä¹Ÿä¼šåœ¨å–åˆ°æ•°æ®å›æ¥ä¹‹åï¼ŒæŠŠæ•°æ®å­˜ä¸€ä»½åœ¨å†…å­˜ç¼“å­˜ä¸­çš„ã€‚ orm æ¡†æ¶è´Ÿè´£æŠŠé¢å‘å¯¹è±¡çš„è¯·æ±‚ç¿»è¯‘æˆæ ‡å‡†çš„ sql è¯­å¥ï¼Œç„¶åé€åˆ°åç«¯çš„ db å»æ‰§è¡Œï¼Œdb è¿™é‡Œä»¥ mysql ä¸ºä¾‹çš„è¯ï¼Œé‚£ä¹ˆä¸€æ¡ sql è¿›æ¥ä¹‹åï¼Œdb æœ¬èº«ä¹Ÿæ˜¯æœ‰ç¼“å­˜çš„ï¼Œä¸è¿‡ db çš„ç¼“å­˜ä¸€èˆ¬æ˜¯ç”¨ sql è¯­è¨€ hash æ¥å­˜å–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæƒ³è¦ç¼“å­˜èƒ½å¤Ÿå‘½ä¸­ï¼Œé™¤äº†æŸ¥è¯¢çš„å­—æ®µå’Œæ–¹æ³•è¦ä¸€æ ·ä»¥å¤–ï¼ŒæŸ¥è¯¢çš„å‚æ•°ä¹Ÿè¦å®Œå…¨ä¸€æ¨¡ä¸€æ ·æ‰èƒ½å¤Ÿä½¿ç”¨ db æœ¬èº«çš„æŸ¥è¯¢ç¼“å­˜ï¼Œsql ç»è¿‡æŸ¥è¯¢ç¼“å­˜å™¨ï¼Œç„¶åå°±ä¼šåˆ°è¾¾æŸ¥è¯¢åˆ†æå™¨ï¼Œåœ¨è¿™é‡Œï¼Œdb ä¼šæ ¹æ®è¢«æœç´¢çš„æ•°æ®è¡¨çš„ç´¢å¼•å»ºç«‹æƒ…å†µï¼Œå’Œ sql è¯­è¨€æœ¬èº«çš„ç‰¹ç‚¹ï¼Œæ¥å†³å®šä½¿ç”¨å“ªä¸€ä¸ªå­—æ®µçš„ç´¢å¼•ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå³ä½¿ä¸€ä¸ªæ•°æ®è¡¨åŒæ—¶åœ¨å¤šä¸ªå­—æ®µå»ºç«‹äº†ç´¢å¼•ï¼Œä½†æ˜¯å¯¹äºä¸€æ¡ sql è¯­å¥æ¥è¯´ï¼Œè¿˜æ˜¯åªèƒ½ä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Œæ‰€ä»¥è¿™é‡Œå°±éœ€è¦åˆ†æä½¿ç”¨å“ªä¸ªç´¢å¼•æ•ˆç‡æœ€é«˜äº†ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œsql ä¼˜åŒ–åœ¨è¿™ä¸ªç‚¹ä¸Šä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ–¹é¢ã€‚ sql ç”± db è¿”å›ç»“æœé›†åï¼Œå†ç”± orm æ¡†æ¶æŠŠç»“æœè½¬æ¢æˆæ¨¡å‹å¯¹è±¡ï¼Œç„¶åç”± orm æ¡†æ¶è¿›è¡Œä¸€äº›é€»è¾‘å¤„ç†ï¼ŒæŠŠå‡†å¤‡å¥½çš„æ•°æ®ï¼Œé€åˆ°è§†å›¾å±‚çš„æ¸²æŸ“å¼•æ“å»æ¸²æŸ“ï¼Œæ¸²æŸ“å¼•æ“è´Ÿè´£æ¨¡æ¿çš„ç®¡ç†ï¼Œå­—æ®µçš„å‹å¥½æ˜¾ç¤ºï¼Œä¹ŸåŒ…æ‹¬è´Ÿè´£ä¸€äº›å¤šå›½è¯­è¨€ä¹‹ç±»çš„ä»»åŠ¡ã€‚å¯¹äºä¸€æ¡è¯·æ±‚åœ¨ mvc ä¸­çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œï¼Œä¸´æ‘¹äº†ä¸€ä¸ª PHP MVC æ¡†æ¶ï¼Œåœ¨è§†å›¾å±‚æŠŠé¡µé¢å‡†å¤‡å¥½åï¼Œå†ä»åŠ¨æ€è„šæœ¬è§£é‡Šå™¨é€å›åˆ° http æœåŠ¡å™¨ï¼Œç”± http æœåŠ¡å™¨æŠŠè¿™äº›æ­£æ–‡åŠ ä¸Šä¸€ä¸ªå“åº”å¤´ï¼Œå°è£…æˆä¸€ä¸ªæ ‡å‡†çš„ http å“åº”åŒ…ï¼Œå†é€šè¿‡ tcp ip åè®®ï¼Œé€å›åˆ°å®¢æˆ·æœºæµè§ˆå™¨ã€‚ 9ï¼‰æµè§ˆå™¨å¼€å§‹å¤„ç†æ•°æ®ä¿¡æ¯å¹¶æ¸²æŸ“é¡µé¢\\ å†ç»åƒè¾›ä¸‡è‹¦ï¼Œæˆ‘ä»¬è¯·æ±‚çš„å“åº”ç»ˆäºæˆåŠŸåˆ°è¾¾äº†å®¢æˆ·ç«¯çš„æµè§ˆå™¨ï¼Œå“åº”åˆ°è¾¾æµè§ˆå™¨ä¹‹åï¼Œæµè§ˆå™¨é¦–å…ˆä¼šæ ¹æ®è¿”å›çš„å“åº”æŠ¥æ–‡é‡Œçš„ä¸€ä¸ªé‡è¦ä¿¡æ¯â€”â€”çŠ¶æ€ç ï¼Œæ¥åšä¸ªåˆ¤æ–­ã€‚å¦‚æœæ˜¯ 200 å¼€å¤´çš„å°±å¥½åŠï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œç›´æ¥è¿›å…¥æ¸²æŸ“æµç¨‹ï¼Œå¦‚æœæ˜¯ 300 å¼€å¤´çš„å°±è¦å»ç›¸åº”å¤´é‡Œé¢æ‰¾ location åŸŸï¼Œæ ¹æ®è¿™ä¸ª location çš„æŒ‡å¼•ï¼Œè¿›è¡Œè·³è½¬ï¼Œè¿™é‡Œè·³è½¬éœ€è¦å¼€å¯ä¸€ä¸ªè·³è½¬è®¡æ•°å™¨ï¼Œæ˜¯ä¸ºäº†é¿å…ä¸¤ä¸ªæˆ–è€…å¤šä¸ªé¡µé¢ä¹‹é—´å½¢æˆçš„å¾ªç¯çš„è·³è½¬ï¼Œå½“è·³è½¬æ¬¡æ•°è¿‡å¤šä¹‹åï¼Œæµè§ˆå™¨ä¼šæŠ¥é”™ï¼ŒåŒæ—¶åœæ­¢ã€‚æ¯”å¦‚ï¼š301è¡¨ç¤ºæ°¸ä¹…é‡å®šå‘ï¼Œå³è¯·æ±‚çš„èµ„æºå·²ç»æ°¸ä¹…è½¬ç§»åˆ°æ–°çš„ä½ç½®ã€‚åœ¨è¿”å›301çŠ¶æ€ç çš„åŒæ—¶ï¼Œå“åº”æŠ¥æ–‡ä¹Ÿä¼šé™„å¸¦é‡å®šå‘çš„urlï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°åå°†httpè¯·æ±‚çš„urlåšç›¸åº”çš„æ”¹å˜å†é‡æ–°å‘é€ã€‚å¦‚æœæ˜¯ 400 å¼€å¤´æˆ–è€… 500 å¼€å¤´çš„çŠ¶æ€ç ï¼Œæµè§ˆå™¨ä¹Ÿä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯é¡µé¢ã€‚æ¯”å¦‚ï¼š404 not found å°±è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºæ‰¾ä¸åˆ°ã€‚ å½“æµè§ˆå¾—åˆ°ä¸€ä¸ªæ­£ç¡®çš„ 200 å“åº”ä¹‹åï¼Œæ¥ä¸‹æ¥é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¤šå›½è¯­è¨€çš„ç¼–ç è§£æäº†ï¼Œå“åº”å¤´æ˜¯ä¸€ä¸ª ascii çš„æ ‡å‡†å­—ç¬¦é›†çš„æ–‡æœ¬ï¼Œè¿™ä¸ªè¿˜å¥½åŠï¼Œä½†æ˜¯å“åº”çš„æ­£æ–‡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå­—èŠ‚æµï¼Œå¯¹äºè¿™ä¸€å¨å­—èŠ‚æµï¼Œæµè§ˆå™¨è¦æ€ä¹ˆå»å¤„ç†å‘¢ï¼Ÿé¦–å…ˆæµè§ˆå™¨ä¼šå»çœ‹å“åº”å¤´é‡Œé¢æŒ‡å®šçš„ encoding åŸŸï¼Œå¦‚æœæœ‰äº†è¿™ä¸ªä¸œè¥¿ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§æŒ‡å®šçš„ encoding å»è§£æå­—ç¬¦ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šä½¿ç”¨ä¸€äº›æ¯”è¾ƒæ™ºèƒ½çš„æ–¹å¼ï¼Œå»çŒœæµ‹å’Œåˆ¤æ–­è¿™ä¸€å¨å­—èŠ‚æµåº”è¯¥ä½¿ç”¨ä»€ä¹ˆå­—ç¬¦é›†å»è§£ç ã€‚ç›¸å…³çš„ç¬”è®°å¯ä»¥çœ‹è¿™é‡Œï¼Œå­—ç¬¦é›†ç¼–ç  æ¥ä¸‹æ¥å°±æ˜¯æ„å»º dom æ ‘äº†ï¼Œåœ¨ html è¯­è¨€åµŒå¥—æ­£å¸¸è€Œä¸”è§„èŒƒçš„æƒ…å†µä¸‹ï¼Œè¿™ç§ xml æ ‡è®°çš„è¯­è¨€æ˜¯æ¯”è¾ƒå®¹æ˜“çš„èƒ½å¤Ÿæ„å»ºå‡ºä¸€æ£µ dom æ ‘å‡ºæ¥çš„ï¼Œå½“ç„¶ï¼Œå¯¹äºäº’è”ç½‘ä¸Šå¤§é‡çš„ä¸è§„èŒƒçš„é¡µé¢ï¼Œä¸åŒçš„æµè§ˆå™¨åº”è¯¥æœ‰è‡ªå·±ä¸åŒçš„å®¹é”™å»å¤„ç†ã€‚æ„å»ºå‡ºæ¥çš„ dom æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€æ£µæŠ½è±¡çš„é€»è¾‘æ ‘ï¼Œæ„å»º dom æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†ç”± script æ ‡ç­¾åŒ…èµ·æ¥çš„ js åŠ¨æ€è„šæœ¬ä»£ç ï¼Œé‚£ä¹ˆä¼šæŠŠä»£ç é€åˆ° js å¼•æ“é‡Œé¢å»è·‘ï¼Œå¦‚æœé‡åˆ°äº† style æ ‡ç­¾åŒ…å›´èµ·æ¥çš„ css ä»£ç ï¼Œä¹Ÿä¼šä¿å­˜ä¸‹æ¥ï¼Œç”¨äºç¨åçš„æ¸²æŸ“ã€‚å¦‚æœé‡åˆ°äº† img æˆ– css å’Œ jsç­‰å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„æ ‡ç­¾ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šæ ¹æ®æŒ‡å®šçš„ url å†æ¬¡å‘èµ·ä¸€ä¸ªæ–°çš„ http è¯·æ±‚ï¼Œå»æŠŠè¿™ä¸ªæ–‡ä»¶æ‹‰å–å›æ¥ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯¹äºåŒä¸€ä¸ªåŸŸåä¸‹çš„ä¸‹è½½è¿‡ç¨‹æ¥è¯´ï¼Œæµè§ˆå™¨ä¸€èˆ¬å…è®¸çš„å¹¶å‘è¯·æ±‚æ˜¯æœ‰é™çš„ï¼Œé€šå¸¸æ§åˆ¶åœ¨ä¸¤ä¸ªå·¦å³ï¼Œæ‰€ä»¥å¦‚æœæœ‰å¾ˆå¤šçš„å›¾ç‰‡çš„è¯ï¼Œä¸€èˆ¬å‡ºäºä¼˜åŒ–çš„ç›®çš„ï¼Œéƒ½ä¼šæŠŠè¿™äº›å›¾ç‰‡ä½¿ç”¨ä¸€å°é™æ€æ–‡ä»¶çš„æœåŠ¡å™¨æ¥ä¿å­˜èµ·æ¥ï¼Œè´Ÿè´£å“åº”ï¼Œä»è€Œå‡å°‘ä¸»æœåŠ¡å™¨çš„å‹åŠ›ã€‚ dom æ ‘æ„é€ å¥½äº†ä¹‹åï¼Œå°±æ˜¯æ ¹æ® dom æ ‘å’Œ css æ ·å¼è¡¨æ¥æ„é€  render æ ‘äº†ï¼Œè¿™ä¸ªæ‰æ˜¯çœŸæ­£çš„ç”¨äºæ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„ä¸€ä¸ªä¸€ä¸ªçš„çŸ©å½¢æ¡†çš„æ ‘ï¼Œç½‘é¡µæ¸²æŸ“æ˜¯æµè§ˆå™¨æœ€å¤æ‚ã€æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå¯¹äº render æ ‘ä¸Šæ¯ä¸€ä¸ªæ¡†ï¼Œéœ€è¦ç¡®å®šä»–çš„ x y åæ ‡ï¼Œå°ºå¯¸ï¼Œè¾¹æ¡†ï¼Œå­—ä½“ï¼Œå½¢æ€ï¼Œç­‰ç­‰è¯¸å¤šæ–¹é¢çš„ä¸œè¥¿ï¼Œrender æ ‘ä¸€æ—¦æ„å»ºå®Œæˆï¼Œæ•´ä¸ªé¡µé¢ä¹Ÿå°±å‡†å¤‡å¥½äº†ï¼Œå¯ä»¥ä¸Šèœäº†ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä¸‹è½½é¡µé¢ï¼Œæ„å»º dom æ ‘ï¼Œæ„å»º render æ ‘è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯ä¸¥æ ¼çš„å…ˆåé¡ºåºçš„ï¼Œä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œæé«˜æ•ˆç‡ï¼Œè®©ç”¨æˆ·ä¸è¦ç­‰é‚£ä¹ˆä¹…ï¼Œç°åœ¨ä¸€èˆ¬éƒ½å¹¶è¡Œçš„å¾€å‰æ¨è¿›çš„ï¼Œç°ä»£çš„æµè§ˆå™¨éƒ½æ˜¯ä¸€è¾¹ä¸‹è½½ï¼Œä¸‹è½½åˆ°äº†ä¸€ç‚¹æ•°æ®å°±å¼€å§‹æ„å»º dom æ ‘ï¼Œä¹Ÿä¸€è¾¹å¼€å§‹æ„å»º render æ ‘ï¼Œæ„å»ºäº†ä¸€ç‚¹å°±æ˜¾ç¤ºä¸€ç‚¹å‡ºæ¥ï¼Œè¿™æ ·ç”¨æˆ·çœ‹èµ·æ¥å°±ä¸ç”¨ç­‰å¾…é‚£ä¹ˆä¹…äº†ã€‚ 10ï¼‰å°†æ¸²æŸ“å¥½çš„é¡µé¢å›¾åƒæ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶å¼€å§‹å“åº”ç”¨æˆ·çš„æ“ä½œã€‚\\ è¿™ä¸€æ­¥ä¸»è¦æ¶‰åŠæ˜¾å¡ï¼Œå†…å­˜åŠæ˜¾ç¤ºå™¨åŸç†ç­‰çŸ¥è¯†ï¼Œä¸åšè¯¦ç»†è§£è¯´ï¼Œå¤§æ¦‚å°±æ˜¯ä»å†…å­˜åˆ° LCD/LEDï¼Œå†ç”±å…‰çº¿è¿›å…¥äººçœ¼çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ ä»¥ä¸Šè¿‡ç¨‹ç®€å•è®²ä¸»è¦æ˜¯ï¼šä»è¾“å…¥ URL åˆ°æµè§ˆå™¨æ¥æ”¶ï¼ˆå›è½¦å‰ï¼‰ï¼Œä»æµè§ˆå™¨æ¥æ”¶åˆ°æ•°æ®å¦‚ä½•å‘é€ç»™ç½‘å¡ï¼ˆå›è½¦åï¼‰ï¼Œå†æŠŠæ¥æ”¶çš„æ•°æ®ä»æœ¬æœºç½‘å¡å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°æ•°æ®ååšäº†æ€ä¹ˆçš„å¤„ç†ï¼ŸæœåŠ¡å™¨è¿”å›æ•°æ®åæµè§ˆå™¨åˆåšäº†å“ªäº›å¤„ç†ï¼Ÿæµè§ˆå™¨åˆæ˜¯å¦‚ä½•å°†å¤„ç†å¥½çš„é¡µé¢å±•ç°åœ¨å±å¹•ä¸Šçš„ï¼Ÿçš„è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ã€‚ ä½†åªæ˜¯æœ€åŸºæœ¬çš„ä¸€äº›æ­¥éª¤ï¼Œå®é™…ä¸å¯èƒ½å°±è¿™ä¹ˆç®€å•ï¼Œä¸€äº›å¯é€‰çš„æ­¥éª¤ä¾‹å¦‚ç½‘é¡µç¼“å­˜ã€è¿æ¥æ± ã€åŠ è½½ç­–ç•¥ã€åŠ å¯†è§£å¯†ã€ä»£ç†ä¸­è½¬ç­‰ç­‰éƒ½æ²¡æœ‰æåŠã€‚å³ä½¿åŸºæœ¬æ­¥éª¤æœ¬èº«ä¹Ÿæœ‰å¾ˆå¤æ‚çš„å­æ­¥éª¤ï¼ŒTCP/IPã€DNSã€HTTPã€HTMLç­‰ç­‰ï¼Œè¿˜éœ€è¦è€ƒè™‘å¾ˆå¤šæƒ…å†µï¼Œæ¯”å¦‚å¹¿æ’­ã€æ‹†åŒ…è§£åŒ…åˆå¹¶åŒ…ä¸¢åŒ…é‡ä¼ ã€è·¯ç”±è¡¨ï¼ŒNATã€TCP çŠ¶æ€æœºã€CDNã€HTTPS è¯ä¹¦æ ¡éªŒä¸ä¸­é—´äººæ”»å‡»æ£€æµ‹ã€RSA å¯†é’¥åå•†ã€AES åŠ è§£å¯†ã€æµè§ˆå™¨è§£æ HTTP çš„æœ‰é™è‡ªåŠ¨çŠ¶æ€æœºã€GUI åº“ä¸ç»˜å›¾ã€OpenGL ç»˜å›¾ã€GPU åŠ é€Ÿï¼ˆOpenCL ä¸ CUDAï¼‰ã€JITï¼ˆJavaScript ä¼šæŠŠ JavaScript ä»£ç ç¼–è¯‘æˆæ±‡ç¼–ä»£ç ï¼‰ã€æœåŠ¡å™¨çš„æ•°æ®åº“ NoSQL æˆ– SQL æŸ¥è¯¢ã€ä¸»ä»æ•°æ®åº“åŒæ­¥ã€æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„å†…å­˜ç®¡ç†ï¼ˆWebKit å®ç°çš„ fastMalloc()ï¼ŒæœåŠ¡å™¨ä¸Šå¯èƒ½æ˜¯ TCMalloc æˆ–è€… JeMallocï¼‰ã€æœåŠ¡å™¨ä¸Šçš„è¯­è¨€è§£é‡Šå™¨ï¼ˆå¯èƒ½ä¹Ÿæ˜¯ JITï¼‰ã€å¤šåª’ä½“ï¼šå‚…é‡Œå¶å˜æ¢ã€H.264 è§£ç ï¼ˆç¡¬ä»¶è§£ç ï¼Œç¡¬ä»¶è§£ç çš„è¯ GPU çš„å¤„ç†å•å…ƒåˆåœ¨è®¡ç®—.......æˆ–è½¯ä»¶è§£ç ï¼‰ã€éŸ³é¢‘è§£ç ã€WebGL ç»˜å›¾ã€æµè§ˆå™¨çš„ Sandboxã€æœåŠ¡å™¨çš„ SQL æ³¨å…¥æ£€æŸ¥ã€äº§ç”Ÿçš„é”®ç›˜ä¸­æ–­ä¿¡å·å¤„ç†ï¼ˆæˆ–è€…æ˜¯é«˜çº§å±‚é¢çš„è¾“å…¥è¾“å‡ºé©±åŠ¨ï¼‰ã€ç½‘å¡é©±åŠ¨ã€ç½‘ç»œæ ˆçš„ TCP FastOpenã€SYN Cookie ä¹‹ç±»ä¼—å¤šæŠ€æœ¯â€¦â€¦æ¯ä¸€ä¸ªéƒ½å¯ä»¥å±•å¼€æˆåºå¤§çš„è¯¾é¢˜ï¼Œè€Œæµè§ˆå™¨çš„åŸºç¡€â€”â€”æ“ä½œç³»ç»Ÿã€ç¼–è¯‘å™¨ã€ç¡¬ä»¶ç­‰æ›´æ˜¯ä¸€ä¸ªæ¯”ä¸€ä¸ªå¤æ‚ã€‚å³ä¾¿æ˜¯è®¡ç®—æœºä¸“ä¸šçš„åŒå­¦çœ‹äº†ä¹Ÿä¼šå¤´å¤§ï¼Œä½†æˆ‘ä¿è¯è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªæ­¥éª¤éƒ½ç»è¿‡æ·±æ€ç†Ÿè™‘å’Œæ—¶é—´çš„è€ƒéªŒçš„ï¼Œå¹¶ä¸æ˜¯è°é—²çš„è›‹ç–¼éè¦æå¾—é‚£ä¹ˆå¤æ‚ï¼Œä¸å¤æ‚ä¹Ÿä¸è¡Œå•Šã€‚ä½ è¾“å…¥URLå³å¯æµè§ˆäº’è”ç½‘ï¼Œè€Œè®¡ç®—æœºç³»ç»Ÿåœ¨èƒŒååšäº†æ— æ•°ä½ çœ‹ä¸åˆ°çš„å·¥ä½œï¼Œè®¡ç®—æœºå„ä¸ªå­é¢†åŸŸæ— æ•°å·¥ç¨‹å¸ˆä¸ºæ­¤ä»˜å‡ºäº†ä½ éš¾ä»¥æƒ³è±¡çš„åŠªåŠ›ã€‚æœ‰å…´è¶£çš„å¯ä»¥é˜…è¯»ä¸‹ ä½ åˆšæ‰åœ¨æ·˜å®ä¸Šä¹°äº†ä¸€ä»¶ä¸œè¥¿ æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢åŸç† "},"æŠ€æœ¯ç¬”è®°/ç¼“å­˜ç­–ç•¥.html":{"url":"æŠ€æœ¯ç¬”è®°/ç¼“å­˜ç­–ç•¥.html","title":"ç¼“å­˜ç­–ç•¥","keywords":"","body":"ç¼“å­˜ç­–ç•¥ å¼ºç¼“å­˜ Cache-control: ç›¸å¯¹æ—¶é—´ publicï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰ privateï¼šæ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼ŒCache-Controlçš„é»˜è®¤å–å€¼ no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®š no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ max-age=xxx (xxx is numeric)ï¼šç¼“å­˜å†…å®¹å°†åœ¨xxxç§’åå¤±æ•ˆ expire: ç»å¯¹æ—¶é—´ Expiresæ˜¯HTTP/1.0æ§åˆ¶ç½‘é¡µç¼“å­˜çš„å­—æ®µï¼Œå…¶å€¼ä¸ºæœåŠ¡å™¨è¿”å›è¯¥è¯·æ±‚ç»“æœç¼“å­˜çš„åˆ°æœŸæ—¶é—´ï¼Œå³å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„æ—¶é—´å°äºExpiresçš„å€¼æ—¶ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ç»“æœã€‚ Expiresæ˜¯HTTP/1.0çš„å­—æ®µï¼Œä½†æ˜¯ç°åœ¨æµè§ˆå™¨é»˜è®¤ä½¿ç”¨çš„æ˜¯HTTP/1.1ï¼Œé‚£ä¹ˆåœ¨HTTP/1.1ä¸­ç½‘é¡µç¼“å­˜è¿˜æ˜¯å¦ç”±Expiresæ§åˆ¶ï¼Ÿ åˆ°äº†HTTP/1.1ï¼ŒExpireå·²ç»è¢«Cache-Controlæ›¿ä»£ï¼ŒåŸå› åœ¨äºExpiresæ§åˆ¶ç¼“å­˜çš„åŸç†æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯çš„æ—¶é—´ä¸æœåŠ¡ç«¯è¿”å›çš„æ—¶é—´åšå¯¹æ¯”ï¼Œé‚£ä¹ˆå¦‚æœå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„æ—¶é—´å› ä¸ºæŸäº›åŸå› ï¼ˆä¾‹å¦‚æ—¶åŒºä¸åŒï¼›å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æœ‰ä¸€æ–¹çš„æ—¶é—´ä¸å‡†ç¡®ï¼‰å‘ç”Ÿè¯¯å·®ï¼Œé‚£ä¹ˆå¼ºåˆ¶ç¼“å­˜åˆ™ä¼šç›´æ¥å¤±æ•ˆï¼Œè¿™æ ·çš„è¯å¼ºåˆ¶ç¼“å­˜çš„å­˜åœ¨åˆ™æ¯«æ— æ„ä¹‰ã€‚ åå•†ç¼“å­˜ etag&&if-none-matched Last-modify&&if-modify-since å¼ºç¼“å­˜ä¼˜å…ˆçº§: cache-control>expire åå•†ç¼“å­˜: å¦‚æœæœ‰etagï¼Œlast-modifyå°±ä¼šè¢«å¿½ç•¥ ä¼˜å…ˆçº§ï¼šå¼ºç¼“å­˜>åå•†ç¼“å­˜ "},"æŠ€æœ¯ç¬”è®°/è¡Œå†…å…ƒç´ ã€å—çº§å…ƒç´ .html":{"url":"æŠ€æœ¯ç¬”è®°/è¡Œå†…å…ƒç´ ã€å—çº§å…ƒç´ .html","title":"è¡Œå†…å…ƒç´ ã€å—çº§å…ƒç´ ","keywords":"","body":"è¡Œå†…å…ƒç´ ã€å—çº§å…ƒç´  å—çº§å…ƒç´ ç‰¹ç‚¹ æ€»æ˜¯åœ¨æ–°è¡Œä¸Šå¼€å§‹ï¼Œå æ®ä¸€æ•´è¡Œ é«˜åº¦ï¼Œè¡Œé«˜ä»¥åŠå¤–è¾¹è·å’Œå†…è¾¹è·éƒ½å¯æ§åˆ¶ å®½åº¦å§‹ç»ˆæ˜¯ä¸æµè§ˆå™¨ï¼ˆçˆ¶çº§ï¼‰å®½åº¦ä¸€æ ·ï¼Œä¸å†…å®¹æ— å…³ å¯ä»¥å®¹çº³è¡Œå†…å…ƒç´ å’Œå…¶ä»–å—çº§å…ƒç´  è¡Œå†…å…ƒç´ ç‰¹ç‚¹ å’Œå…¶ä»–è¡Œå†…å…ƒç´ éƒ½åœ¨ä¸€è¡Œä¸Š é«˜ã€è¡Œé«˜åŠå¤–è¾¹è·å’Œå†…è¾¹è·éƒ¨åˆ†å¯æ”¹å˜ å®½åº¦åªä¸å†…å®¹æœ‰å…³ è¡Œå†…å…ƒç´ èƒ½å®¹çº³æ–‡æœ¬æˆ–è€…å…¶ä»–è¡Œå†…å…ƒç´  ä¸å¯è®¾ç½®å®½é«˜ï¼Œå…¶å®½åº¦éšç€å†…å®¹å¢åŠ ï¼Œé«˜åº¦éšå­—ä½“å¤§å°è€Œæ”¹å˜ï¼Œå†…è”å…ƒç´ å¯ä»¥è®¾ç½®å¤–è¾¹ç•Œï¼Œä½†æ˜¯å¤–è¾¹ç•Œä¸å¯¹ä¸Šä¸‹èµ·ä½œç”¨ï¼Œåªèƒ½å¯¹å·¦å³èµ·ä½œç”¨ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å†…è¾¹ç•Œï¼Œä½†æ˜¯å†…è¾¹ç•Œåœ¨ie6ä¸­ä¸å¯¹ä¸Šä¸‹èµ·ä½œç”¨ï¼Œåªèƒ½å¯¹å·¦å³èµ·ä½œç”¨ "},"æŠ€æœ¯ç¬”è®°/è·¨æ ‡ç­¾é¡µé€šä¿¡.html":{"url":"æŠ€æœ¯ç¬”è®°/è·¨æ ‡ç­¾é¡µé€šä¿¡.html","title":"è·¨æ ‡ç­¾é¡µé€šä¿¡","keywords":"","body":"è·¨é¡µé¢é€šä¿¡ [TOC] åŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡ å¹¿æ’­æ¨¡å¼ 1ã€BroadCast Channel BroadCast Channel å¯ä»¥å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºå¹¿æ’­çš„é€šä¿¡é¢‘é“ã€‚å½“æ‰€æœ‰é¡µé¢éƒ½ç›‘å¬åŒä¸€é¢‘é“çš„æ¶ˆæ¯æ—¶ï¼Œå…¶ä¸­æŸä¸€ä¸ªé¡µé¢é€šè¿‡å®ƒå‘é€çš„æ¶ˆæ¯å°±ä¼šè¢«å…¶ä»–æ‰€æœ‰é¡µé¢æ”¶åˆ°ã€‚å®ƒçš„APIå’Œç”¨æ³•éƒ½éå¸¸ç®€å•ã€‚ ä¸‹é¢çš„æ–¹å¼å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ ‡è¯†ä¸ºAlienZHOUçš„é¢‘é“ï¼š const bc = new BroadcastChannel('AlienZHOU'); // æ ‡è¯†ä¸€è‡´çš„é¡µé¢éƒ½èƒ½æ”¶åˆ°å¹¿æ’­æ¶ˆæ¯ å„ä¸ªé¡µé¢å¯ä»¥é€šè¿‡onmessageæ¥ç›‘å¬è¢«å¹¿æ’­çš„æ¶ˆæ¯ï¼š bc.onmessage = function (e) { const data = e.data; const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from; console.log('[BroadcastChannel] receive message:', text); }; è¦å‘é€æ¶ˆæ¯æ—¶åªéœ€è¦è°ƒç”¨å®ä¾‹ä¸Šçš„postMessageæ–¹æ³•å³å¯ï¼š bc.postMessage(mydata); // myDataä¸ºonmessageé‡Œé¢çš„e.data å–æ¶ˆå½“å‰é¡µé¢çš„å¹¿æ’­ç›‘å¬ï¼š ä¸€ç§æ–¹å¼æ˜¯å–æ¶ˆæˆ–è€…ä¿®æ”¹ç›¸åº”çš„'message'äº‹ä»¶ç›‘å¬ å¦ä¸€ç§ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ Broadcast Channel å®ä¾‹ä¸ºæˆ‘ä»¬æä¾›çš„closeæ–¹æ³•ã€‚ bc.close(); ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ï¼š å–æ¶ˆ'message'ç›‘å¬åªæ˜¯è®©é¡µé¢ä¸å¯¹å¹¿æ’­æ¶ˆæ¯è¿›è¡Œå“åº”ï¼ŒBroadcast Channel ä»ç„¶å­˜åœ¨ï¼›è€Œè°ƒç”¨closeæ–¹æ³•è¿™ä¼šåˆ‡æ–­ä¸ Broadcast Channel çš„è¿æ¥ï¼Œæµè§ˆå™¨æ‰èƒ½å¤Ÿå°è¯•å›æ”¶è¯¥å¯¹è±¡ï¼Œå› ä¸ºæ­¤æ—¶æµè§ˆå™¨æ‰ä¼šçŸ¥é“ç”¨æˆ·å·²ç»ä¸éœ€è¦ä½¿ç”¨å¹¿æ’­é¢‘é“äº†ã€‚ 2ã€Service Worker Service Worker æ˜¯ä¸€ä¸ªå¯ä»¥é•¿æœŸè¿è¡Œåœ¨åå°çš„ Workerï¼Œèƒ½å¤Ÿå®ç°ä¸é¡µé¢çš„åŒå‘é€šä¿¡ã€‚å¤šé¡µé¢å…±äº«é—´çš„ Service Worker å¯ä»¥å…±äº«ï¼Œå°† Service Worker ä½œä¸ºæ¶ˆæ¯çš„å¤„ç†ä¸­å¿ƒï¼ˆä¸­å¤®ç«™ï¼‰å³å¯å®ç°å¹¿æ’­æ•ˆæœã€‚ Service Worker ä¹Ÿæ˜¯ PWA ä¸­çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œç”±äºæœ¬æ–‡é‡ç‚¹ä¸åœ¨ PWA ï¼Œå› æ­¤å¦‚æœæƒ³è¿›ä¸€æ­¥äº†è§£ Service Workerï¼Œå¯ä»¥é˜…è¯»æˆ‘ä¹‹å‰çš„æ–‡ç« ã€PWAå­¦ä¹ ä¸å®è·µã€‘(3) è®©ä½ çš„WebAppç¦»çº¿å¯ç”¨ã€‚ é¦–å…ˆåœ¨æ ¹ç›®å½•åˆ›å»ºsw.jsï¼Œè‡³äºä¸ºä»€ä¹ˆè¦åœ¨æ ¹ç›®å½•åˆ›å»ºï¼Œæ˜¯å› ä¸ºService Workeré»˜è®¤çš„scopeå‚æ•°ï¼ˆå¯æ§åˆ¶å†…å®¹ç›®å½•ï¼‰ä¸ºå½“å‰jsçš„ç›®å½•ï¼Œä¸”åªèƒ½è®¾ç½®è¯¥ç›®å½•çš„ç›®å½•ï¼Œè‹¥è¦æ§åˆ¶æ›´ä¸Šå±‚çš„ç›®å½•ï¼Œå¿…é¡»è¦è¿”å›Service-Worker-Allowedå¤´ï¼Œå‚è€ƒï¼šã€PWAå­¦ä¹ ä¸å®è·µã€‘(9)ç”Ÿäº§ç¯å¢ƒä¸­PWAå®è·µçš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ /* ../sw.js Service Worker é€»è¾‘ */ self.addEventListener('message', function (e) { console.log('service worker receive message', e.data); e.waitUntil( self.clients.matchAll().then(function (clients) { if (!clients || clients.length === 0) { return; } clients.forEach(function (client) { client.postMessage(e.data); }); }) ); }); ç„¶ååœ¨é¡µé¢æ³¨å†ŒService Workerï¼š /* é¡µé¢é€»è¾‘ */ navigator.serviceWorker.register('../sw.js').then(function () { console.log('Service Worker æ³¨å†ŒæˆåŠŸ'); }); å¤„ç†å®Œ Service Workerï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ç›‘å¬ Service Worker å‘é€æ¥çš„æ¶ˆæ¯ï¼š /* é¡µé¢é€»è¾‘ */ navigator.serviceWorker.addEventListener('message', function (e) { const data = e.data; const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from; console.log('[Service Worker] receive message:', text); }); æœ€åï¼Œå½“éœ€è¦åŒæ­¥æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥è°ƒç”¨ Service Worker çš„postMessageæ–¹æ³•ï¼š /* é¡µé¢é€»è¾‘ */ navigator.serviceWorker.controller.postMessage(mydata); æˆ‘ä»¬åœ¨ Service Worker ä¸­ç›‘å¬äº†messageäº‹ä»¶ï¼Œè·å–é¡µé¢ï¼ˆä» Service Worker çš„è§’åº¦å« clientï¼‰å‘é€çš„ä¿¡æ¯ã€‚ç„¶åé€šè¿‡self.clients.matchAll()è·å–å½“å‰æ³¨å†Œäº†è¯¥ Service Worker çš„æ‰€æœ‰é¡µé¢ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ªclientï¼ˆå³é¡µé¢ï¼‰çš„postMessageæ–¹æ³•ï¼Œå‘é¡µé¢å‘é€æ¶ˆæ¯ã€‚è¿™æ ·å°±æŠŠä»ä¸€å¤„ï¼ˆæŸä¸ªTabé¡µé¢ï¼‰æ”¶åˆ°çš„æ¶ˆæ¯é€šçŸ¥ç»™äº†å…¶ä»–é¡µé¢ã€‚ 3ã€LocalStorage LocalStorage ä½œä¸ºå‰ç«¯æœ€å¸¸ç”¨çš„æœ¬åœ°å­˜å‚¨ï¼Œå¤§å®¶åº”è¯¥å·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼›ä½†StorageEventè¿™ä¸ªä¸å®ƒç›¸å…³çš„äº‹ä»¶æœ‰äº›åŒå­¦å¯èƒ½ä¼šæ¯”è¾ƒé™Œç”Ÿã€‚ å½“ LocalStorage å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘storageäº‹ä»¶ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼ŒæŠŠæ¶ˆæ¯å†™å…¥åˆ°æŸä¸ª LocalStorage ä¸­ï¼›ç„¶ååœ¨å„ä¸ªé¡µé¢å†…ï¼Œé€šè¿‡ç›‘å¬storageäº‹ä»¶å³å¯æ”¶åˆ°é€šçŸ¥ã€‚ window.addEventListener('storage', function (e) { if (e.key === 'ctc-msg') { const data = JSON.parse(e.newValue); const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from; console.log('[Storage I] receive message:', text); } }); åœ¨å„ä¸ªé¡µé¢æ·»åŠ å¦‚ä¸Šçš„ä»£ç ï¼Œå³å¯ç›‘å¬åˆ° LocalStorage çš„å˜åŒ–ã€‚å½“æŸä¸ªé¡µé¢éœ€è¦å‘é€æ¶ˆæ¯æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„setItemæ–¹æ³•å³å¯ï¼š mydata.st = +(new Date); window.localStorage.setItem('ctc-msg', JSON.stringify(mydata)); æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼šæˆ‘ä»¬åœ¨mydataä¸Šæ·»åŠ äº†ä¸€ä¸ªå–å½“å‰æ¯«ç§’æ—¶é—´æˆ³çš„.stå±æ€§ã€‚è¿™æ˜¯å› ä¸ºï¼Œstorageäº‹ä»¶åªæœ‰åœ¨å€¼çœŸæ­£æ”¹å˜æ—¶æ‰ä¼šè§¦å‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼š window.localStorage.setItem('test', '123'); window.localStorage.setItem('test', '123'); ç”±äºç¬¬äºŒæ¬¡çš„å€¼'123'ä¸ç¬¬ä¸€æ¬¡çš„å€¼ç›¸åŒï¼Œæ‰€ä»¥ä»¥ä¸Šçš„ä»£ç åªä¼šåœ¨ç¬¬ä¸€æ¬¡setItemæ—¶è§¦å‘storageäº‹ä»¶ã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡è®¾ç½®stæ¥ä¿è¯æ¯æ¬¡è°ƒç”¨æ—¶ä¸€å®šä¼šè§¦å‘storageäº‹ä»¶ã€‚ å…±äº«å­˜å‚¨-è½®è¯¢æ¨¡å¼ 1ã€Shared Worker Shared Worker æ˜¯ Worker å®¶æ—çš„å¦ä¸€ä¸ªæˆå‘˜ã€‚æ™®é€šçš„ Worker ä¹‹é—´æ˜¯ç‹¬ç«‹è¿è¡Œã€æ•°æ®äº’ä¸ç›¸é€šï¼›è€Œå¤šä¸ª Tab æ³¨å†Œçš„ Shared Worker åˆ™å¯ä»¥å®ç°æ•°æ®å…±äº«ã€‚ Shared Worker åœ¨å®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„é—®é¢˜åœ¨äºï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è½®è¯¢çš„æ–¹å¼ï¼Œæ¥æ‹‰å–æœ€æ–°çš„æ•°æ®ã€‚æ€è·¯å¦‚ä¸‹ï¼š è®© Shared Worker æ”¯æŒä¸¤ç§æ¶ˆæ¯ã€‚ä¸€ç§æ˜¯ postï¼ŒShared Worker æ”¶åˆ°åä¼šå°†è¯¥æ•°æ®ä¿å­˜ä¸‹æ¥ï¼›å¦ä¸€ç§æ˜¯ getï¼ŒShared Worker æ”¶åˆ°è¯¥æ¶ˆæ¯åä¼šå°†ä¿å­˜çš„æ•°æ®é€šè¿‡postMessageä¼ ç»™æ³¨å†Œå®ƒçš„é¡µé¢ã€‚ä¹Ÿå°±æ˜¯è®©é¡µé¢é€šè¿‡ get æ¥ä¸»åŠ¨è·å–ï¼ˆåŒæ­¥ï¼‰æœ€æ–°æ¶ˆæ¯ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šåœ¨é¡µé¢ä¸­å¯åŠ¨ä¸€ä¸ª Shared Workerï¼Œå¯åŠ¨æ–¹å¼éå¸¸ç®€å•ï¼š // æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ Shared Worker åç§°ï¼Œä¹Ÿå¯ä»¥ç•™ç©º const sharedWorker = new SharedWorker('../util.shared.js', 'ctc'); ç„¶åï¼Œåœ¨è¯¥ Shared Worker ä¸­æ”¯æŒ get ä¸ post å½¢å¼çš„æ¶ˆæ¯ï¼š /* ../util.shared.js: Shared Worker ä»£ç  */ let data = null; self.addEventListener('connect', function (e) { const port = e.ports[0]; port.addEventListener('message', function (event) { // get æŒ‡ä»¤åˆ™è¿”å›å­˜å‚¨çš„æ¶ˆæ¯æ•°æ® if (event.data.get) { data && port.postMessage(data); } // é get æŒ‡ä»¤åˆ™å­˜å‚¨è¯¥æ¶ˆæ¯æ•°æ® else { data = event.data; } }); port.start(); }); ä¹‹åï¼Œé¡µé¢å®šæ—¶å‘é€ get æŒ‡ä»¤çš„æ¶ˆæ¯ç»™ Shared Workerï¼Œè½®è¯¢æœ€æ–°çš„æ¶ˆæ¯æ•°æ®ï¼Œå¹¶åœ¨é¡µé¢ç›‘å¬è¿”å›ä¿¡æ¯ï¼š // å®šæ—¶è½®è¯¢ï¼Œå‘é€ get æŒ‡ä»¤çš„æ¶ˆæ¯ setInterval(function () { sharedWorker.port.postMessage({get: true}); }, 1000); // ç›‘å¬ get æ¶ˆæ¯çš„è¿”å›æ•°æ® sharedWorker.port.addEventListener('message', (e) => { const data = e.data; const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from; console.log('[Shared Worker] receive message:', text); }, false); sharedWorker.port.start(); æœ€åï¼Œå½“è¦è·¨é¡µé¢é€šä¿¡æ—¶ï¼Œåªéœ€ç»™ Shared Worker postMessageå³å¯ï¼š sharedWorker.port.postMessage(mydata); æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨addEventListeneræ¥æ·»åŠ  Shared Worker çš„æ¶ˆæ¯ç›‘å¬ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨MessagePort.startæ–¹æ³•ï¼Œå³ä¸Šæ–‡ä¸­çš„sharedWorker.port.start()ï¼›å¦‚æœä½¿ç”¨onmessageç»‘å®šç›‘å¬åˆ™ä¸éœ€è¦ã€‚ 2ã€IndexedDB é™¤äº†å¯ä»¥åˆ©ç”¨ Shared Worker æ¥å…±äº«å­˜å‚¨æ•°æ®ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸€äº›â€œå…¨å±€æ€§â€ï¼ˆæ”¯æŒè·¨é¡µé¢ï¼‰çš„å­˜å‚¨æ–¹æ¡ˆã€‚ä¾‹å¦‚ IndexedDB æˆ– cookieã€‚ é‰´äºå¤§å®¶å¯¹ cookie å·²ç»å¾ˆç†Ÿæ‚‰ï¼ŒåŠ ä¹‹ä½œä¸ºâ€œäº’è”ç½‘æœ€æ—©æœŸçš„å­˜å‚¨æ–¹æ¡ˆä¹‹ä¸€â€ï¼Œcookie å·²ç»åœ¨å®é™…åº”ç”¨ä¸­æ‰¿å—äº†è¿œå¤šäºå…¶è®¾è®¡ä¹‹åˆçš„è´£ä»»ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼šä½¿ç”¨ IndexedDB æ¥å®ç°ã€‚ å…¶æ€è·¯å¾ˆç®€å•ï¼šä¸ Shared Worker æ–¹æ¡ˆç±»ä¼¼ï¼Œæ¶ˆæ¯å‘é€æ–¹å°†æ¶ˆæ¯å­˜è‡³ IndexedDB ä¸­ï¼›æ¥æ”¶æ–¹ï¼ˆä¾‹å¦‚æ‰€æœ‰é¡µé¢ï¼‰åˆ™é€šè¿‡è½®è¯¢å»è·å–æœ€æ–°çš„ä¿¡æ¯ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•å°è£…å‡ ä¸ª IndexedDB çš„å·¥å…·æ–¹æ³•ã€‚ æ‰“å¼€æ•°æ®åº“è¿æ¥ï¼š function openStore() { const storeName = 'ctc_aleinzhou'; return new Promise(function (resolve, reject) { if (!('indexedDB' in window)) { return reject('don\\'t support indexedDB'); } const request = indexedDB.open('CTC_DB', 1); request.onerror = reject; request.onsuccess = e => resolve(e.target.result); request.onupgradeneeded = function (e) { const db = e.srcElement.result; if (e.oldVersion === 0 && !db.objectStoreNames.contains(storeName)) { const store = db.createObjectStore(storeName, {keyPath: 'tag'}); store.createIndex(storeName + 'Index', 'tag', {unique: false}); } } }); } å­˜å‚¨æ•°æ® function saveData(db, data) { return new Promise(function (resolve, reject) { const STORE_NAME = 'ctc_aleinzhou'; const tx = db.transaction(STORE_NAME, 'readwrite'); const store = tx.objectStore(STORE_NAME); const request = store.put({tag: 'ctc_data', data}); request.onsuccess = () => resolve(db); request.onerror = reject; }); } æŸ¥è¯¢/è¯»å–æ•°æ® function query(db) { const STORE_NAME = 'ctc_aleinzhou'; return new Promise(function (resolve, reject) { try { const tx = db.transaction(STORE_NAME, 'readonly'); const store = tx.objectStore(STORE_NAME); const dbRequest = store.get('ctc_data'); dbRequest.onsuccess = e => resolve(e.target.result); dbRequest.onerror = reject; } catch (err) { reject(err); } }); } å‰©ä¸‹çš„å·¥ä½œå°±éå¸¸ç®€å•äº†ã€‚é¦–å…ˆæ‰“å¼€æ•°æ®è¿æ¥ï¼Œå¹¶åˆå§‹åŒ–æ•°æ®ï¼š openStore().then(db => saveData(db, null)) å¯¹äºæ¶ˆæ¯è¯»å–ï¼Œå¯ä»¥åœ¨è¿æ¥ä¸åˆå§‹åŒ–åè½®è¯¢ï¼š openStore().then(db => saveData(db, null)).then(function (db) { setInterval(function () { query(db).then(function (res) { if (!res || !res.data) { return; } const data = res.data; const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from; console.log('[Storage I] receive message:', text); }); }, 1000); }); æœ€åï¼Œè¦å‘é€æ¶ˆæ¯æ—¶ï¼Œåªéœ€å‘ IndexedDB å­˜å‚¨æ•°æ®å³å¯ï¼š openStore().then(db => saveData(db, null)).then(function (db) { // â€¦â€¦ çœç•¥ä¸Šé¢çš„è½®è¯¢ä»£ç  // è§¦å‘ saveData çš„æ–¹æ³•å¯ä»¥æ”¾åœ¨ç”¨æˆ·æ“ä½œçš„äº‹ä»¶ç›‘å¬å†… saveData(db, mydata); }); å°æŠ€å·§: åœ¨â€œå¹¿æ’­æ¨¡å¼â€å¤–ï¼Œæˆ‘ä»¬åˆäº†è§£äº†â€œå…±äº«å­˜å‚¨+é•¿è½®è¯¢â€è¿™ç§æ¨¡å¼ã€‚ä¹Ÿè®¸ä½ ä¼šè®¤ä¸ºé•¿è½®è¯¢æ²¡æœ‰å¹¿æ’­æ¨¡å¼ä¼˜é›…ï¼Œä½†å®é™…ä¸Šï¼Œæœ‰äº›æ—¶å€™ä½¿ç”¨â€œå…±äº«å­˜å‚¨â€çš„å½¢å¼æ—¶ï¼Œä¸ä¸€å®šè¦æ­é…é•¿è½®è¯¢ã€‚ ä¾‹å¦‚ï¼Œåœ¨å¤š Tab åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç¦»å¼€ Tab A åˆ°å¦ä¸€ä¸ª Tab B ä¸­æ“ä½œï¼›è¿‡äº†ä¸€ä¼šæˆ‘ä»¬ä» Tab B åˆ‡æ¢å› Tab A æ—¶ï¼Œå¸Œæœ›å°†ä¹‹å‰åœ¨ Tab B ä¸­çš„æ“ä½œçš„ä¿¡æ¯åŒæ­¥å›æ¥ã€‚è¿™æ—¶å€™ï¼Œå…¶å®åªç”¨åœ¨ Tab A ä¸­ç›‘å¬visibilitychangeè¿™æ ·çš„äº‹ä»¶ï¼Œæ¥åšä¸€æ¬¡ä¿¡æ¯åŒæ­¥å³å¯ã€‚ ä¸‹é¢ï¼Œæˆ‘ä¼šå†ä»‹ç»ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œæˆ‘æŠŠå®ƒç§°ä¸ºâ€œå£å£ç›¸ä¼ â€æ¨¡å¼ã€‚ å£å£ç›¸ä¼ æ¨¡å¼ å½“æˆ‘ä»¬ä½¿ç”¨window.openæ‰“å¼€é¡µé¢æ—¶ï¼Œæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¢«æ‰“å¼€é¡µé¢windowçš„å¼•ç”¨ã€‚è€Œåœ¨æœªæ˜¾ç¤ºæŒ‡å®šnoopeneræ—¶ï¼Œè¢«æ‰“å¼€çš„é¡µé¢å¯ä»¥é€šè¿‡window.openerè·å–åˆ°æ‰“å¼€å®ƒçš„é¡µé¢çš„å¼•ç”¨ â€”â€” é€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬å°±å°†è¿™äº›é¡µé¢å»ºç«‹èµ·äº†è”ç³»ï¼ˆä¸€ç§æ ‘å½¢ç»“æ„ï¼‰ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠwindow.openæ‰“å¼€çš„é¡µé¢çš„windowå¯¹è±¡æ”¶é›†èµ·æ¥ï¼š let childWins = []; document.getElementById('btn').addEventListener('click', function () { const win = window.open('./some/sample'); childWins.push(win); }); ç„¶åï¼Œå½“æˆ‘ä»¬éœ€è¦å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œä½œä¸ºæ¶ˆæ¯çš„å‘èµ·æ–¹ï¼Œä¸€ä¸ªé¡µé¢éœ€è¦åŒæ—¶é€šçŸ¥å®ƒæ‰“å¼€çš„é¡µé¢ä¸æ‰“å¼€å®ƒçš„é¡µé¢ï¼š // è¿‡æ»¤æ‰å·²ç»å…³é—­çš„çª—å£ childWins = childWins.filter(w => !w.closed); if (childWins.length > 0) { mydata.fromOpenner = false; childWins.forEach(w => w.postMessage(mydata)); } if (window.opener && !window.opener.closed) { mydata.fromOpenner = true; window.opener.postMessage(mydata); } æ³¨æ„ï¼Œæˆ‘è¿™é‡Œå…ˆç”¨.closedå±æ€§è¿‡æ»¤æ‰å·²ç»è¢«å…³é—­çš„ Tab çª—å£ã€‚è¿™æ ·ï¼Œä½œä¸ºæ¶ˆæ¯å‘é€æ–¹çš„ä»»åŠ¡å°±å®Œæˆäº†ã€‚ä¸‹é¢çœ‹çœ‹ï¼Œä½œä¸ºæ¶ˆæ¯æ¥æ”¶æ–¹ï¼Œå®ƒéœ€è¦åšä»€ä¹ˆã€‚ æ­¤æ—¶ï¼Œä¸€ä¸ªæ”¶åˆ°æ¶ˆæ¯çš„é¡µé¢å°±ä¸èƒ½é‚£ä¹ˆè‡ªç§äº†ï¼Œé™¤äº†å±•ç¤ºæ”¶åˆ°çš„æ¶ˆæ¯ï¼Œå®ƒè¿˜éœ€è¦å°†æ¶ˆæ¯å†ä¼ é€’ç»™å®ƒæ‰€â€œçŸ¥é“çš„äººâ€ï¼ˆæ‰“å¼€ä¸è¢«å®ƒæ‰“å¼€çš„é¡µé¢ï¼‰: éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘è¿™é‡Œé€šè¿‡åˆ¤æ–­æ¶ˆæ¯æ¥æºï¼Œé¿å…å°†æ¶ˆæ¯å›ä¼ ç»™å‘é€æ–¹ï¼Œé˜²æ­¢æ¶ˆæ¯åœ¨ä¸¤è€…é—´æ­»å¾ªç¯çš„ä¼ é€’ã€‚ï¼ˆè¯¥æ–¹æ¡ˆä¼šæœ‰äº›å…¶ä»–å°é—®é¢˜ï¼Œå®é™…ä¸­å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰ window.addEventListener('message', function (e) { const data = e.data; const text = '[receive] ' + data.msg + ' â€”â€” tab ' + data.from; console.log('[Cross-document Messaging] receive message:', text); // é¿å…æ¶ˆæ¯å›ä¼  if (window.opener && !window.opener.closed && data.fromOpenner) { window.opener.postMessage(data); } // è¿‡æ»¤æ‰å·²ç»å…³é—­çš„çª—å£ childWins = childWins.filter(w => !w.closed); // é¿å…æ¶ˆæ¯å›ä¼  if (childWins && !data.fromOpenner) { childWins.forEach(w => w.postMessage(data)); } }); è¿™æ ·ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼ˆé¡µé¢ï¼‰éƒ½è‚©è´Ÿèµ·äº†ä¼ é€’æ¶ˆæ¯çš„è´£ä»»ï¼Œä¹Ÿå°±æ˜¯æˆ‘è¯´çš„â€œå£å£ç›¸ä¼ â€ï¼Œè€Œæ¶ˆæ¯å°±åœ¨è¿™ä¸ªæ ‘çŠ¶ç»“æ„ä¸­æµè½¬äº†èµ·æ¥ã€‚ å°æ†©ä¸€ä¸‹ æ˜¾ç„¶ï¼Œâ€œå£å£ç›¸ä¼ â€çš„æ¨¡å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœé¡µé¢ä¸æ˜¯é€šè¿‡åœ¨å¦ä¸€ä¸ªé¡µé¢å†…çš„window.openæ‰“å¼€çš„ï¼ˆä¾‹å¦‚ç›´æ¥åœ¨åœ°å€æ è¾“å…¥ï¼Œæˆ–ä»å…¶ä»–ç½‘ç«™é“¾æ¥è¿‡æ¥ï¼‰ï¼Œè¿™ä¸ªè”ç³»å°±è¢«æ‰“ç ´äº†ã€‚ é™¤äº†ä¸Šé¢è¿™å…­ä¸ªå¸¸è§æ–¹æ³•ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§ï¼ˆç¬¬ä¸ƒç§ï¼‰åšæ³•æ˜¯é€šè¿‡ WebSocket è¿™ç±»çš„â€œæœåŠ¡å™¨æ¨â€æŠ€æœ¯æ¥è¿›è¡ŒåŒæ­¥ã€‚è¿™å¥½æ¯”å°†æˆ‘ä»¬çš„â€œä¸­å¤®ç«™â€ä»å‰ç«¯ç§»åˆ°äº†åç«¯ã€‚ å…³äº WebSocket ä¸å…¶ä»–â€œæœåŠ¡å™¨æ¨â€æŠ€æœ¯ï¼Œä¸äº†è§£çš„åŒå­¦å¯ä»¥é˜…è¯»è¿™ç¯‡ã€Šå„ç±»â€œæœåŠ¡å™¨æ¨â€æŠ€æœ¯åŸç†ä¸å®ä¾‹ï¼ˆPolling/COMET/SSE/WebSocketï¼‰ã€‹ åœ¨çº¿æ¼”ç¤ºçš„ Demo >> éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡ ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä¸ƒç§å‰ç«¯è·¨é¡µé¢é€šä¿¡çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬å¤§éƒ½å—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ã€‚ç„¶è€Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸åŒåŸŸåçš„äº§å“çº¿ï¼Œä¹Ÿå¸Œæœ›å®ƒä»¬ä¸‹é¢çš„æ‰€æœ‰é¡µé¢ä¹‹é—´èƒ½æ— éšœç¢åœ°é€šä¿¡ã€‚é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ è¦å®ç°è¯¥åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç”¨æˆ·ä¸å¯è§çš„ iframe ä½œä¸ºâ€œæ¡¥â€ã€‚ç”±äº iframe ä¸çˆ¶é¡µé¢é—´å¯ä»¥é€šè¿‡æŒ‡å®šoriginæ¥å¿½ç•¥åŒæºé™åˆ¶ï¼Œå› æ­¤å¯ä»¥åœ¨æ¯ä¸ªé¡µé¢ä¸­åµŒå…¥ä¸€ä¸ª iframe ï¼ˆä¾‹å¦‚ï¼šhttp://sample.com/bridge.htmlï¼‰ï¼Œè€Œè¿™äº› iframe ç”±äºä½¿ç”¨çš„æ˜¯ä¸€ä¸ª urlï¼Œå› æ­¤å±äºåŒæºé¡µé¢ï¼Œå…¶é€šä¿¡æ–¹å¼å¯ä»¥å¤ç”¨ä¸Šé¢ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„å„ç§æ–¹å¼ã€‚ é¡µé¢ä¸ iframe é€šä¿¡éå¸¸ç®€å•ï¼Œé¦–å…ˆéœ€è¦åœ¨é¡µé¢ä¸­ç›‘å¬ iframe å‘æ¥çš„æ¶ˆæ¯ï¼Œåšç›¸åº”çš„ä¸šåŠ¡å¤„ç† /* ä¸šåŠ¡é¡µé¢ä»£ç  */ window.addEventListener('message', function (e) { // â€¦â€¦ do something }); ç„¶åï¼Œå½“é¡µé¢è¦ä¸å…¶ä»–çš„åŒæºæˆ–éåŒæºé¡µé¢é€šä¿¡æ—¶ï¼Œä¼šå…ˆç»™ iframe å‘é€æ¶ˆæ¯ï¼š /* ä¸šåŠ¡é¡µé¢ä»£ç  */ window.frames[0].window.postMessage(mydata, '*'); å…¶ä¸­ä¸ºäº†ç®€ä¾¿æ­¤å¤„å°†postMessageçš„ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºäº†'*'ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ä¸º iframe çš„ URLã€‚iframe æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šä½¿ç”¨æŸç§è·¨é¡µé¢æ¶ˆæ¯é€šä¿¡æŠ€æœ¯åœ¨æ‰€æœ‰ iframe é—´åŒæ­¥æ¶ˆæ¯ï¼Œä¾‹å¦‚ä¸‹é¢ä½¿ç”¨çš„ Broadcast Channelï¼š /* iframe å†…ä»£ç  */ const bc = new BroadcastChannel('AlienZHOU'); // æ”¶åˆ°æ¥è‡ªé¡µé¢çš„æ¶ˆæ¯åï¼Œåœ¨ iframe é—´è¿›è¡Œå¹¿æ’­ window.addEventListener('message', function (e) { bc.postMessage(e.data); }); å…¶ä»– iframe æ”¶åˆ°é€šçŸ¥åï¼Œåˆ™ä¼šå°†è¯¥æ¶ˆæ¯åŒæ­¥ç»™æ‰€å±çš„é¡µé¢ï¼š /* iframe å†…ä»£ç  */ // å¯¹äºæ”¶åˆ°çš„ï¼ˆiframeï¼‰å¹¿æ’­æ¶ˆæ¯ï¼Œé€šçŸ¥ç»™æ‰€å±çš„ä¸šåŠ¡é¡µé¢ bc.onmessage = function (e) { window.parent.postMessage(e.data, '*'); }; ä¸‹å›¾å°±æ˜¯ä½¿ç”¨ iframe ä½œä¸ºâ€œæ¡¥â€çš„éåŒæºé¡µé¢é—´é€šä¿¡æ¨¡å¼å›¾ã€‚ å…¶ä¸­â€œåŒæºè·¨åŸŸé€šä¿¡æ–¹æ¡ˆâ€å¯ä»¥ä½¿ç”¨æ–‡ç« ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„æŸç§æŠ€æœ¯ã€‚ æ€»ç»“ ä»Šå¤©å’Œå¤§å®¶åˆ†äº«äº†ä¸€ä¸‹è·¨é¡µé¢é€šä¿¡çš„å„ç§æ–¹å¼ã€‚ å¯¹äºåŒæºé¡µé¢ï¼Œå¸¸è§çš„æ–¹å¼åŒ…æ‹¬ï¼š å¹¿æ’­æ¨¡å¼ï¼šBroadcast Channe / Service Worker / LocalStorage + StorageEvent å…±äº«å­˜å‚¨æ¨¡å¼ï¼šShared Worker / IndexedDB / cookie å£å£ç›¸ä¼ æ¨¡å¼ï¼šwindow.open + window.opener åŸºäºæœåŠ¡ç«¯ï¼šWebsocket / Comet / SSE ç­‰ è€Œå¯¹äºéåŒæºé¡µé¢ï¼Œåˆ™å¯ä»¥é€šè¿‡åµŒå…¥åŒæº iframe ä½œä¸ºâ€œæ¡¥â€ï¼Œå°†éåŒæºé¡µé¢é€šä¿¡è½¬æ¢ä¸ºåŒæºé¡µé¢é€šä¿¡ã€‚ "},"æŠ€æœ¯ç¬”è®°/é‡æ’å’Œé‡ç»˜.html":{"url":"æŠ€æœ¯ç¬”è®°/é‡æ’å’Œé‡ç»˜.html","title":"é‡æ’å’Œé‡ç»˜","keywords":"","body":"é‡æ’(reflow)å’Œé‡ç»˜(repaint) é¡µé¢ç”Ÿæˆçš„è¿‡ç¨‹ï¼š 1.HTML è¢« HTML è§£æå™¨è§£ææˆ DOM æ ‘ï¼› 2.CSS è¢« CSS è§£æå™¨è§£ææˆ CSSOM æ ‘ï¼› 3.ç»“åˆ DOM æ ‘å’Œ CSSOM æ ‘ï¼Œç”Ÿæˆä¸€æ£µæ¸²æŸ“æ ‘(Render Tree)ï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¸º Attachmentï¼› 4.ç”Ÿæˆå¸ƒå±€(flow)ï¼Œæµè§ˆå™¨åœ¨å±å¹•ä¸Šâ€œç”»â€å‡ºæ¸²æŸ“æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼› 5.å°†å¸ƒå±€ç»˜åˆ¶(paint)åœ¨å±å¹•ä¸Šï¼Œæ˜¾ç¤ºå‡ºæ•´ä¸ªé¡µé¢ã€‚ ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥æ˜¯æœ€è€—æ—¶çš„éƒ¨åˆ†ï¼Œè¿™ä¸¤æ­¥åˆèµ·æ¥ï¼Œå°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„æ¸²æŸ“ã€‚ æ¸²æŸ“ï¼š åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œç½‘é¡µç”Ÿæˆçš„æ—¶å€™ï¼Œè‡³å°‘ä¼šæ¸²æŸ“ä¸€æ¬¡ã€‚åœ¨ç”¨æˆ·è®¿é—®çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šä¸æ–­è§¦å‘é‡æ’(reflow)å’Œé‡ç»˜(repaint)ï¼Œä¸ç®¡é¡µé¢å‘ç”Ÿäº†é‡ç»˜è¿˜æ˜¯é‡æ’ï¼Œéƒ½ä¼šå½±å“æ€§èƒ½ï¼Œæœ€å¯æ€•çš„æ˜¯é‡æ’ï¼Œä¼šä½¿æˆ‘ä»¬ä»˜å‡ºé«˜é¢çš„æ€§èƒ½ä»£ä»·ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å°½é‡é¿å…ã€‚ é‡æ’æ¯”é‡ç»˜å¤§ï¼š å¤§ï¼Œåœ¨è¿™ä¸ªè¯­å¢ƒé‡Œçš„æ„æ€æ˜¯ï¼šè°èƒ½å½±å“è°ï¼Ÿ é‡ç»˜ï¼šæŸäº›å…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜ï¼Œä¾‹å¦‚ï¼šå…ƒç´ çš„å¡«å……é¢œè‰² é‡æ’ï¼šé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å…ƒç´ ã€‚ å°±å¦‚ä¸Šé¢çš„æ¦‚å¿µä¸€æ ·ï¼Œå•å•æ”¹å˜å…ƒç´ çš„å¤–è§‚ï¼Œè‚¯å®šä¸ä¼šå¼•èµ·ç½‘é¡µé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œä½†å½“æµè§ˆå™¨å®Œæˆé‡æ’ä¹‹åï¼Œå°†ä¼šé‡æ–°ç»˜åˆ¶å—åˆ°æ­¤æ¬¡é‡æ’å½±å“çš„éƒ¨åˆ†ã€‚æ¯”å¦‚æ”¹å˜å…ƒç´ é«˜åº¦ï¼Œè¿™ä¸ªå…ƒç´ ä¹ƒè‡³å‘¨è¾¹doméƒ½éœ€è¦é‡æ–°ç»˜åˆ¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼šé‡ç»˜ä¸ä¸€å®šå¯¼è‡´é‡æ’ï¼Œä½†é‡æ’ä¸€å®šä¼šå¯¼è‡´é‡ç»˜ã€‚ "}}